var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fr(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var xi={exports:{}},zn={exports:{}},ra=void 0,Fn=function(o){return o!==ra&&o!==null},ia=Fn,na={object:!0,function:!0,undefined:!0},sa=function(o){return ia(o)?hasOwnProperty.call(na,typeof o):!1},aa=sa,oa=function(o){if(!aa(o))return!1;try{return o.constructor?o.constructor.prototype===o:!1}catch{return!1}},ua=oa,la=function(o){if(typeof o!="function"||!hasOwnProperty.call(o,"length"))return!1;try{if(typeof o.length!="number"||typeof o.call!="function"||typeof o.apply!="function")return!1}catch{return!1}return!ua(o)},ha=la,fa=/^\s*class[\s{/}]/,ca=Function.prototype.toString,da=function(o){return!(!ha(o)||fa.test(ca.call(o)))},pa=function(){var o=Object.assign,e;return typeof o!="function"?!1:(e={foo:"raz"},o(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},fi,rn;function ma(){return rn||(rn=1,fi=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),fi}var ga=function(){},va=ga(),Ri=function(o){return o!==va&&o!==null},ci,nn;function ya(){if(nn)return ci;nn=1;var o=Ri,e=Object.keys;return ci=function(t){return e(o(t)?Object(t):t)},ci}var di,sn;function _a(){return sn||(sn=1,di=ma()()?Object.keys:ya()),di}var pi,an;function ba(){if(an)return pi;an=1;var o=Ri;return pi=function(e){if(!o(e))throw new TypeError("Cannot use null or undefined");return e},pi}var mi,on;function wa(){if(on)return mi;on=1;var o=_a(),e=ba(),t=Math.max;return mi=function(r,i){var n,s,a=t(arguments.length,2),u;for(r=Object(e(r)),u=function(l){try{r[l]=i[l]}catch(f){n||(n=f)}},s=1;s<a;++s)i=arguments[s],o(i).forEach(u);if(n!==void 0)throw n;return r},mi}var Ea=pa()?Object.assign:wa(),xa=Ri,Aa=Array.prototype.forEach,Da=Object.create,Ca=function(o,e){var t;for(t in o)e[t]=o[t]},ka=function(o){var e=Da(null);return Aa.call(arguments,function(t){xa(t)&&Ca(Object(t),e)}),e},gi="razdwatrzy",Sa=function(){return typeof gi.contains!="function"?!1:gi.contains("dwa")===!0&&gi.contains("foo")===!1},vi,un;function Ta(){if(un)return vi;un=1;var o=String.prototype.indexOf;return vi=function(e){return o.call(this,e,arguments[1])>-1},vi}var Na=Sa()?String.prototype.contains:Ta(),Fr=Fn,ln=da,Pn=Ea,Un=ka,br=Na,Ia=zn.exports=function(o,e){var t,r,i,n,s;return arguments.length<2||typeof o!="string"?(n=e,e=o,o=null):n=arguments[2],Fr(o)?(t=br.call(o,"c"),r=br.call(o,"e"),i=br.call(o,"w")):(t=i=!0,r=!1),s={value:e,configurable:t,enumerable:r,writable:i},n?Pn(Un(n),s):s};Ia.gs=function(o,e,t){var r,i,n,s;return typeof o!="string"?(n=t,t=e,e=o,o=null):n=arguments[3],Fr(e)?ln(e)?Fr(t)?ln(t)||(n=t,t=void 0):t=void 0:(n=e,e=t=void 0):e=void 0,Fr(o)?(r=br.call(o,"c"),i=br.call(o,"e")):(r=!0,i=!1),s={get:e,set:t,configurable:r,enumerable:i},n?Pn(Un(n),s):s};var Ra=zn.exports,Oa=function(o){if(typeof o!="function")throw new TypeError(o+" is not a function");return o};(function(o,e){var t=Ra,r=Oa,i=Function.prototype.apply,n=Function.prototype.call,s=Object.create,a=Object.defineProperty,u=Object.defineProperties,l=Object.prototype.hasOwnProperty,f={configurable:!0,enumerable:!1,writable:!0},c,v,p,w,y,h,d;c=function(g,E){var C;return r(E),l.call(this,"__ee__")?C=this.__ee__:(C=f.value=s(null),a(this,"__ee__",f),f.value=null),C[g]?typeof C[g]=="object"?C[g].push(E):C[g]=[C[g],E]:C[g]=E,this},v=function(g,E){var C,_;return r(E),_=this,c.call(this,g,C=function(){p.call(_,g,C),i.call(E,this,arguments)}),C.__eeOnceListener__=E,this},p=function(g,E){var C,_,D,S;if(r(E),!l.call(this,"__ee__"))return this;if(C=this.__ee__,!C[g])return this;if(_=C[g],typeof _=="object")for(S=0;D=_[S];++S)(D===E||D.__eeOnceListener__===E)&&(_.length===2?C[g]=_[S?0:1]:_.splice(S,1));else(_===E||_.__eeOnceListener__===E)&&delete C[g];return this},w=function(g){var E,C,_,D,S;if(l.call(this,"__ee__")&&(D=this.__ee__[g],!!D))if(typeof D=="object"){for(C=arguments.length,S=new Array(C-1),E=1;E<C;++E)S[E-1]=arguments[E];for(D=D.slice(),E=0;_=D[E];++E)i.call(_,this,S)}else switch(arguments.length){case 1:n.call(D,this);break;case 2:n.call(D,this,arguments[1]);break;case 3:n.call(D,this,arguments[1],arguments[2]);break;default:for(C=arguments.length,S=new Array(C-1),E=1;E<C;++E)S[E-1]=arguments[E];i.call(D,this,S)}},y={on:c,once:v,off:p,emit:w},h={on:t(c),once:t(v),off:t(p),emit:t(w)},d=u({},h),o.exports=e=function(g){return g==null?s(d):u(Object(g),h)},e.methods=y})(xi,xi.exports);var Ba=xi.exports;const zt=fr(Ba);var Zt={},Vt={};function La(o,e,t){if(t===void 0&&(t=Array.prototype),o&&typeof t.find=="function")return t.find.call(o,e);for(var r=0;r<o.length;r++)if(Object.prototype.hasOwnProperty.call(o,r)){var i=o[r];if(e.call(void 0,i,r,o))return i}}function Oi(o,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(o):o}var Mn=Oi({HTML:"text/html",isHTML:function(o){return o===Mn.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),jn=Oi({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(o){return o===jn.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Vt.find=La;Vt.freeze=Oi;Vt.MIME_TYPE=Mn;Vt.NAMESPACE=jn;var Wn=Vt,Ot=Wn.find,wr=Wn.NAMESPACE;function za(o){return o!==""}function Fa(o){return o?o.split(/[\t\n\f\r ]+/).filter(za):[]}function Pa(o,e){return o.hasOwnProperty(e)||(o[e]=!0),o}function hn(o){if(!o)return[];var e=Fa(o);return Object.keys(e.reduce(Pa,{}))}function Ua(o){return function(e){return o&&o.indexOf(e)!==-1}}function kr(o,e){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}function _t(o,e){var t=o.prototype;if(!(t instanceof e)){let r=function(){};r.prototype=e.prototype,r=new r,kr(t,r),o.prototype=t=r}t.constructor!=o&&(typeof o!="function"&&console.error("unknown Class:"+o),t.constructor=o)}var bt={},It=bt.ELEMENT_NODE=1,or=bt.ATTRIBUTE_NODE=2,jr=bt.TEXT_NODE=3,qn=bt.CDATA_SECTION_NODE=4,Hn=bt.ENTITY_REFERENCE_NODE=5,Ma=bt.ENTITY_NODE=6,Zn=bt.PROCESSING_INSTRUCTION_NODE=7,Vn=bt.COMMENT_NODE=8,Gn=bt.DOCUMENT_NODE=9,Yn=bt.DOCUMENT_TYPE_NODE=10,Ut=bt.DOCUMENT_FRAGMENT_NODE=11,ja=bt.NOTATION_NODE=12,gt={},ft={};gt.INDEX_SIZE_ERR=(ft[1]="Index size error",1);gt.DOMSTRING_SIZE_ERR=(ft[2]="DOMString size error",2);var yt=gt.HIERARCHY_REQUEST_ERR=(ft[3]="Hierarchy request error",3);gt.WRONG_DOCUMENT_ERR=(ft[4]="Wrong document",4);gt.INVALID_CHARACTER_ERR=(ft[5]="Invalid character",5);gt.NO_DATA_ALLOWED_ERR=(ft[6]="No data allowed",6);gt.NO_MODIFICATION_ALLOWED_ERR=(ft[7]="No modification allowed",7);var $n=gt.NOT_FOUND_ERR=(ft[8]="Not found",8);gt.NOT_SUPPORTED_ERR=(ft[9]="Not supported",9);var fn=gt.INUSE_ATTRIBUTE_ERR=(ft[10]="Attribute in use",10);gt.INVALID_STATE_ERR=(ft[11]="Invalid state",11);gt.SYNTAX_ERR=(ft[12]="Syntax error",12);gt.INVALID_MODIFICATION_ERR=(ft[13]="Invalid modification",13);gt.NAMESPACE_ERR=(ft[14]="Invalid namespace",14);gt.INVALID_ACCESS_ERR=(ft[15]="Invalid access",15);function nt(o,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,ft[o]),this.message=ft[o],Error.captureStackTrace&&Error.captureStackTrace(this,nt);return t.code=o,e&&(this.message=this.message+": "+e),t}nt.prototype=Error.prototype;kr(gt,nt);function Pt(){}Pt.prototype={length:0,item:function(o){return o>=0&&o<this.length?this[o]:null},toString:function(o,e){for(var t=[],r=0;r<this.length;r++)sr(this[r],t,o,e);return t.join("")},filter:function(o){return Array.prototype.filter.call(this,o)},indexOf:function(o){return Array.prototype.indexOf.call(this,o)}};function ur(o,e){this._node=o,this._refresh=e,Bi(this)}function Bi(o){var e=o._node._inc||o._node.ownerDocument._inc;if(o._inc!==e){var t=o._refresh(o._node);if(os(o,"length",t.length),!o.$$length||t.length<o.$$length)for(var r=t.length;r in o;r++)Object.prototype.hasOwnProperty.call(o,r)&&delete o[r];kr(t,o),o._inc=e}}ur.prototype.item=function(o){return Bi(this),this[o]||null};_t(ur,Pt);function Wr(){}function Xn(o,e){for(var t=o.length;t--;)if(o[t]===e)return t}function cn(o,e,t,r){if(r?e[Xn(e,r)]=t:e[e.length++]=t,o){t.ownerElement=o;var i=o.ownerDocument;i&&(r&&Qn(i,o,r),Wa(i,o,t))}}function dn(o,e,t){var r=Xn(e,t);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,o){var n=o.ownerDocument;n&&(Qn(n,o,t),t.ownerElement=null)}}else throw new nt($n,new Error(o.tagName+"@"+t))}Wr.prototype={length:0,item:Pt.prototype.item,getNamedItem:function(o){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==o)return t}},setNamedItem:function(o){var e=o.ownerElement;if(e&&e!=this._ownerElement)throw new nt(fn);var t=this.getNamedItem(o.nodeName);return cn(this._ownerElement,this,o,t),t},setNamedItemNS:function(o){var e=o.ownerElement,t;if(e&&e!=this._ownerElement)throw new nt(fn);return t=this.getNamedItemNS(o.namespaceURI,o.localName),cn(this._ownerElement,this,o,t),t},removeNamedItem:function(o){var e=this.getNamedItem(o);return dn(this._ownerElement,this,e),e},removeNamedItemNS:function(o,e){var t=this.getNamedItemNS(o,e);return dn(this._ownerElement,this,t),t},getNamedItemNS:function(o,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==o)return r}return null}};function Kn(){}Kn.prototype={hasFeature:function(o,e){return!0},createDocument:function(o,e,t){var r=new Sr;if(r.implementation=this,r.childNodes=new Pt,r.doctype=t||null,t&&r.appendChild(t),e){var i=r.createElementNS(o,e);r.appendChild(i)}return r},createDocumentType:function(o,e,t){var r=new ei;return r.name=o,r.nodeName=o,r.publicId=e||"",r.systemId=t||"",r}};function Xe(){}Xe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(o,e){return qr(this,o,e)},replaceChild:function(o,e){qr(this,o,e,ts),e&&this.removeChild(e)},removeChild:function(o){return es(this,o)},appendChild:function(o){return this.insertBefore(o,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(o){return Ai(this.ownerDocument||this,this,o)},normalize:function(){for(var o=this.firstChild;o;){var e=o.nextSibling;e&&e.nodeType==jr&&o.nodeType==jr?(this.removeChild(e),o.appendData(e.data)):(o.normalize(),o=e)}},isSupported:function(o,e){return this.ownerDocument.implementation.hasFeature(o,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(o){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r]===o)return r}e=e.nodeType==or?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(o){for(var e=this;e;){var t=e._nsMap;if(t&&o in t&&Object.prototype.hasOwnProperty.call(t,o))return t[o];e=e.nodeType==or?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(o){var e=this.lookupPrefix(o);return e==null}};function Jn(o){return o=="<"&&"&lt;"||o==">"&&"&gt;"||o=="&"&&"&amp;"||o=='"'&&"&quot;"||"&#"+o.charCodeAt()+";"}kr(bt,Xe);kr(bt,Xe.prototype);function Er(o,e){if(e(o))return!0;if(o=o.firstChild)do if(Er(o,e))return!0;while(o=o.nextSibling)}function Sr(){this.ownerDocument=this}function Wa(o,e,t){o&&o._inc++;var r=t.namespaceURI;r===wr.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Qn(o,e,t,r){o&&o._inc++;var i=t.namespaceURI;i===wr.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Li(o,e,t){if(o&&o._inc){o._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var i=e.firstChild,n=0;i;)r[n++]=i,i=i.nextSibling;r.length=n,delete r[r.length]}}}function es(o,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:o.firstChild=r,r?r.previousSibling=t:o.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Li(o.ownerDocument,o),e}function qa(o){return o&&(o.nodeType===Xe.DOCUMENT_NODE||o.nodeType===Xe.DOCUMENT_FRAGMENT_NODE||o.nodeType===Xe.ELEMENT_NODE)}function Ha(o){return o&&(Bt(o)||zi(o)||Mt(o)||o.nodeType===Xe.DOCUMENT_FRAGMENT_NODE||o.nodeType===Xe.COMMENT_NODE||o.nodeType===Xe.PROCESSING_INSTRUCTION_NODE)}function Mt(o){return o&&o.nodeType===Xe.DOCUMENT_TYPE_NODE}function Bt(o){return o&&o.nodeType===Xe.ELEMENT_NODE}function zi(o){return o&&o.nodeType===Xe.TEXT_NODE}function pn(o,e){var t=o.childNodes||[];if(Ot(t,Bt)||Mt(e))return!1;var r=Ot(t,Mt);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function mn(o,e){var t=o.childNodes||[];function r(n){return Bt(n)&&n!==e}if(Ot(t,r))return!1;var i=Ot(t,Mt);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function Za(o,e,t){if(!qa(o))throw new nt(yt,"Unexpected parent node type "+o.nodeType);if(t&&t.parentNode!==o)throw new nt($n,"child not in parent");if(!Ha(e)||Mt(e)&&o.nodeType!==Xe.DOCUMENT_NODE)throw new nt(yt,"Unexpected node type "+e.nodeType+" for parent node type "+o.nodeType)}function Va(o,e,t){var r=o.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xe.DOCUMENT_FRAGMENT_NODE){var n=i.filter(Bt);if(n.length>1||Ot(i,zi))throw new nt(yt,"More than one element or text in fragment");if(n.length===1&&!pn(o,t))throw new nt(yt,"Element in fragment can not be inserted before doctype")}if(Bt(e)&&!pn(o,t))throw new nt(yt,"Only one element can be added and only after doctype");if(Mt(e)){if(Ot(r,Mt))throw new nt(yt,"Only one doctype is allowed");var s=Ot(r,Bt);if(t&&r.indexOf(s)<r.indexOf(t))throw new nt(yt,"Doctype can only be inserted before an element");if(!t&&s)throw new nt(yt,"Doctype can not be appended since element is present")}}function ts(o,e,t){var r=o.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xe.DOCUMENT_FRAGMENT_NODE){var n=i.filter(Bt);if(n.length>1||Ot(i,zi))throw new nt(yt,"More than one element or text in fragment");if(n.length===1&&!mn(o,t))throw new nt(yt,"Element in fragment can not be inserted before doctype")}if(Bt(e)&&!mn(o,t))throw new nt(yt,"Only one element can be added and only after doctype");if(Mt(e)){if(Ot(r,function(u){return Mt(u)&&u!==t}))throw new nt(yt,"Only one doctype is allowed");var s=Ot(r,Bt);if(t&&r.indexOf(s)<r.indexOf(t))throw new nt(yt,"Doctype can only be inserted before an element")}}function qr(o,e,t,r){Za(o,e,t),o.nodeType===Xe.DOCUMENT_NODE&&(r||Va)(o,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Ut){var n=e.firstChild;if(n==null)return e;var s=e.lastChild}else n=s=e;var a=t?t.previousSibling:o.lastChild;n.previousSibling=a,s.nextSibling=t,a?a.nextSibling=n:o.firstChild=n,t==null?o.lastChild=s:t.previousSibling=s;do n.parentNode=o;while(n!==s&&(n=n.nextSibling));return Li(o.ownerDocument||o,o),e.nodeType==Ut&&(e.firstChild=e.lastChild=null),e}function Ga(o,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=o,e.previousSibling=o.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:o.firstChild=e,o.lastChild=e,Li(o.ownerDocument,o,e),e}Sr.prototype={nodeName:"#document",nodeType:Gn,doctype:null,documentElement:null,_inc:1,insertBefore:function(o,e){if(o.nodeType==Ut){for(var t=o.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return o}return qr(this,o,e),o.ownerDocument=this,this.documentElement===null&&o.nodeType===It&&(this.documentElement=o),o},removeChild:function(o){return this.documentElement==o&&(this.documentElement=null),es(this,o)},replaceChild:function(o,e){qr(this,o,e,ts),o.ownerDocument=this,e&&this.removeChild(e),Bt(o)&&(this.documentElement=o)},importNode:function(o,e){return as(this,o,e)},getElementById:function(o){var e=null;return Er(this.documentElement,function(t){if(t.nodeType==It&&t.getAttribute("id")==o)return e=t,!0}),e},getElementsByClassName:function(o){var e=hn(o);return new ur(this,function(t){var r=[];return e.length>0&&Er(t.documentElement,function(i){if(i!==t&&i.nodeType===It){var n=i.getAttribute("class");if(n){var s=o===n;if(!s){var a=hn(n);s=e.every(Ua(a))}s&&r.push(i)}}}),r})},createElement:function(o){var e=new Gt;e.ownerDocument=this,e.nodeName=o,e.tagName=o,e.localName=o,e.childNodes=new Pt;var t=e.attributes=new Wr;return t._ownerElement=e,e},createDocumentFragment:function(){var o=new ti;return o.ownerDocument=this,o.childNodes=new Pt,o},createTextNode:function(o){var e=new Fi;return e.ownerDocument=this,e.appendData(o),e},createComment:function(o){var e=new Pi;return e.ownerDocument=this,e.appendData(o),e},createCDATASection:function(o){var e=new Ui;return e.ownerDocument=this,e.appendData(o),e},createProcessingInstruction:function(o,e){var t=new ji;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=o,t.nodeValue=t.data=e,t},createAttribute:function(o){var e=new Hr;return e.ownerDocument=this,e.name=o,e.nodeName=o,e.localName=o,e.specified=!0,e},createEntityReference:function(o){var e=new Mi;return e.ownerDocument=this,e.nodeName=o,e},createElementNS:function(o,e){var t=new Gt,r=e.split(":"),i=t.attributes=new Wr;return t.childNodes=new Pt,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=o,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(o,e){var t=new Hr,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=o,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};_t(Sr,Xe);function Gt(){this._nsMap={}}Gt.prototype={nodeType:It,hasAttribute:function(o){return this.getAttributeNode(o)!=null},getAttribute:function(o){var e=this.getAttributeNode(o);return e&&e.value||""},getAttributeNode:function(o){return this.attributes.getNamedItem(o)},setAttribute:function(o,e){var t=this.ownerDocument.createAttribute(o);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(o){var e=this.getAttributeNode(o);e&&this.removeAttributeNode(e)},appendChild:function(o){return o.nodeType===Ut?this.insertBefore(o,null):Ga(this,o)},setAttributeNode:function(o){return this.attributes.setNamedItem(o)},setAttributeNodeNS:function(o){return this.attributes.setNamedItemNS(o)},removeAttributeNode:function(o){return this.attributes.removeNamedItem(o.nodeName)},removeAttributeNS:function(o,e){var t=this.getAttributeNodeNS(o,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(o,e){return this.getAttributeNodeNS(o,e)!=null},getAttributeNS:function(o,e){var t=this.getAttributeNodeNS(o,e);return t&&t.value||""},setAttributeNS:function(o,e,t){var r=this.ownerDocument.createAttributeNS(o,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(o,e){return this.attributes.getNamedItemNS(o,e)},getElementsByTagName:function(o){return new ur(this,function(e){var t=[];return Er(e,function(r){r!==e&&r.nodeType==It&&(o==="*"||r.tagName==o)&&t.push(r)}),t})},getElementsByTagNameNS:function(o,e){return new ur(this,function(t){var r=[];return Er(t,function(i){i!==t&&i.nodeType===It&&(o==="*"||i.namespaceURI===o)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};Sr.prototype.getElementsByTagName=Gt.prototype.getElementsByTagName;Sr.prototype.getElementsByTagNameNS=Gt.prototype.getElementsByTagNameNS;_t(Gt,Xe);function Hr(){}Hr.prototype.nodeType=or;_t(Hr,Xe);function Tr(){}Tr.prototype={data:"",substringData:function(o,e){return this.data.substring(o,o+e)},appendData:function(o){o=this.data+o,this.nodeValue=this.data=o,this.length=o.length},insertData:function(o,e){this.replaceData(o,0,e)},appendChild:function(o){throw new Error(ft[yt])},deleteData:function(o,e){this.replaceData(o,e,"")},replaceData:function(o,e,t){var r=this.data.substring(0,o),i=this.data.substring(o+e);t=r+t+i,this.nodeValue=this.data=t,this.length=t.length}};_t(Tr,Xe);function Fi(){}Fi.prototype={nodeName:"#text",nodeType:jr,splitText:function(o){var e=this.data,t=e.substring(o);e=e.substring(0,o),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};_t(Fi,Tr);function Pi(){}Pi.prototype={nodeName:"#comment",nodeType:Vn};_t(Pi,Tr);function Ui(){}Ui.prototype={nodeName:"#cdata-section",nodeType:qn};_t(Ui,Tr);function ei(){}ei.prototype.nodeType=Yn;_t(ei,Xe);function rs(){}rs.prototype.nodeType=ja;_t(rs,Xe);function is(){}is.prototype.nodeType=Ma;_t(is,Xe);function Mi(){}Mi.prototype.nodeType=Hn;_t(Mi,Xe);function ti(){}ti.prototype.nodeName="#document-fragment";ti.prototype.nodeType=Ut;_t(ti,Xe);function ji(){}ji.prototype.nodeType=Zn;_t(ji,Xe);function ns(){}ns.prototype.serializeToString=function(o,e,t){return ss.call(o,e,t)};Xe.prototype.toString=ss;function ss(o,e){var t=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,n=r.namespaceURI;if(n&&i==null){var i=r.lookupPrefix(n);if(i==null)var s=[{namespace:n,prefix:null}]}return sr(this,t,o,e,s),t.join("")}function gn(o,e,t){var r=o.prefix||"",i=o.namespaceURI;if(!i||r==="xml"&&i===wr.XML||i===wr.XMLNS)return!1;for(var n=t.length;n--;){var s=t[n];if(s.prefix===r)return s.namespace!==i}return!0}function yi(o,e,t){o.push(" ",e,'="',t.replace(/[<&"]/g,Jn),'"')}function sr(o,e,t,r,i){if(i||(i=[]),r)if(o=r(o),o){if(typeof o=="string"){e.push(o);return}}else return;switch(o.nodeType){case It:var n=o.attributes,s=n.length,d=o.firstChild,a=o.tagName;t=wr.isHTML(o.namespaceURI)||t;var u=a;if(!t&&!o.prefix&&o.namespaceURI){for(var l,f=0;f<n.length;f++)if(n.item(f).name==="xmlns"){l=n.item(f).value;break}if(!l)for(var c=i.length-1;c>=0;c--){var v=i[c];if(v.prefix===""&&v.namespace===o.namespaceURI){l=v.namespace;break}}if(l!==o.namespaceURI)for(var c=i.length-1;c>=0;c--){var v=i[c];if(v.namespace===o.namespaceURI){v.prefix&&(u=v.prefix+":"+a);break}}}e.push("<",u);for(var p=0;p<s;p++){var w=n.item(p);w.prefix=="xmlns"?i.push({prefix:w.localName,namespace:w.value}):w.nodeName=="xmlns"&&i.push({prefix:"",namespace:w.value})}for(var p=0;p<s;p++){var w=n.item(p);if(gn(w,t,i)){var y=w.prefix||"",h=w.namespaceURI;yi(e,y?"xmlns:"+y:"xmlns",h),i.push({prefix:y,namespace:h})}sr(w,e,t,r,i)}if(a===u&&gn(o,t,i)){var y=o.prefix||"",h=o.namespaceURI;yi(e,y?"xmlns:"+y:"xmlns",h),i.push({prefix:y,namespace:h})}if(d||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),t&&/^script$/i.test(a))for(;d;)d.data?e.push(d.data):sr(d,e,t,r,i.slice()),d=d.nextSibling;else for(;d;)sr(d,e,t,r,i.slice()),d=d.nextSibling;e.push("</",u,">")}else e.push("/>");return;case Gn:case Ut:for(var d=o.firstChild;d;)sr(d,e,t,r,i.slice()),d=d.nextSibling;return;case or:return yi(e,o.name,o.value);case jr:return e.push(o.data.replace(/[<&]/g,Jn).replace(/]]>/g,"]]&gt;"));case qn:return e.push("<![CDATA[",o.data,"]]>");case Vn:return e.push("<!--",o.data,"-->");case Yn:var g=o.publicId,E=o.systemId;if(e.push("<!DOCTYPE ",o.name),g)e.push(" PUBLIC ",g),E&&E!="."&&e.push(" ",E),e.push(">");else if(E&&E!=".")e.push(" SYSTEM ",E,">");else{var C=o.internalSubset;C&&e.push(" [",C,"]"),e.push(">")}return;case Zn:return e.push("<?",o.target," ",o.data,"?>");case Hn:return e.push("&",o.nodeName,";");default:e.push("??",o.nodeName)}}function as(o,e,t){var r;switch(e.nodeType){case It:r=e.cloneNode(!1),r.ownerDocument=o;case Ut:break;case or:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=o,r.parentNode=null,t)for(var i=e.firstChild;i;)r.appendChild(as(o,i,t)),i=i.nextSibling;return r}function Ai(o,e,t){var r=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=e[i];typeof n!="object"&&n!=r[i]&&(r[i]=n)}switch(e.childNodes&&(r.childNodes=new Pt),r.ownerDocument=o,r.nodeType){case It:var s=e.attributes,a=r.attributes=new Wr,u=s.length;a._ownerElement=r;for(var l=0;l<u;l++)r.setAttributeNode(Ai(o,s.item(l),!0));break;case or:t=!0}if(t)for(var f=e.firstChild;f;)r.appendChild(Ai(o,f,t)),f=f.nextSibling;return r}function os(o,e,t){o[e]=t}try{if(Object.defineProperty){let o=function(e){switch(e.nodeType){case It:case Ut:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(o(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(ur.prototype,"length",{get:function(){return Bi(this),this.$$length}}),Object.defineProperty(Xe.prototype,"textContent",{get:function(){return o(this)},set:function(e){switch(this.nodeType){case It:case Ut:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),os=function(e,t,r){e["$$"+t]=r}}}catch{}Zt.DocumentType=ei;Zt.DOMException=nt;Zt.DOMImplementation=Kn;Zt.Element=Gt;Zt.Node=Xe;Zt.NodeList=Pt;Zt.XMLSerializer=ns;var Nr={},us={};(function(o){var e=Vt.freeze;o.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),o.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),o.entityMap=o.HTML_ENTITIES})(us);var Wi={},xr=Vt.NAMESPACE,Di=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,vn=new RegExp("[\\-\\.0-9"+Di.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),yn=new RegExp("^"+Di.source+vn.source+"*(?::"+Di.source+vn.source+"*)?$"),mr=0,qt=1,Kt=2,gr=3,Jt=4,Qt=5,vr=6,Lr=7;function lr(o,e){this.message=o,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,lr)}lr.prototype=new Error;lr.prototype.name=lr.name;function ls(){}ls.prototype={parse:function(o,e,t){var r=this.domBuilder;r.startDocument(),hs(e,e={}),Ya(o,e,t,r,this.errorHandler),r.endDocument()}};function Ya(o,e,t,r,i){function n(ce){if(ce>65535){ce-=65536;var K=55296+(ce>>10),fe=56320+(ce&1023);return String.fromCharCode(K,fe)}else return String.fromCharCode(ce)}function s(ce){var K=ce.slice(1,-1);return K in t?t[K]:K.charAt(0)==="#"?n(parseInt(K.substr(1).replace("x","0x"))):(i.error("entity not found:"+ce),ce)}function a(ce){if(ce>y){var K=o.substring(y,ce).replace(/&#?\w+;/g,s);v&&u(y),r.characters(K,0,ce-y),y=ce}}function u(ce,K){for(;ce>=f&&(K=c.exec(o));)l=K.index,f=l+K[0].length,v.lineNumber++;v.columnNumber=ce-l+1}for(var l=0,f=0,c=/.*(?:\r\n?|\n)|.*$/g,v=r.locator,p=[{currentNSMap:e}],w={},y=0;;){try{var h=o.indexOf("<",y);if(h<0){if(!o.substr(y).match(/^\s*$/)){var d=r.doc,g=d.createTextNode(o.substr(y));d.appendChild(g),r.currentElement=g}return}switch(h>y&&a(h),o.charAt(h+1)){case"/":var X=o.indexOf(">",h+3),E=o.substring(h+2,X).replace(/[ \t\n\r]+$/g,""),C=p.pop();X<0?(E=o.substring(h+2).replace(/[\s<].*/,""),i.error("end tag name: "+E+" is not complete:"+C.tagName),X=h+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),i.error("end tag name: "+E+" maybe not complete"),X=h+1+E.length);var _=C.localNSMap,D=C.tagName==E,S=D||C.tagName&&C.tagName.toLowerCase()==E.toLowerCase();if(S){if(r.endElement(C.uri,C.localName,E),_)for(var R in _)Object.prototype.hasOwnProperty.call(_,R)&&r.endPrefixMapping(R);D||i.fatalError("end tag name: "+E+" is not match the current start tagName:"+C.tagName)}else p.push(C);X++;break;case"?":v&&u(h),X=Qa(o,h,r);break;case"!":v&&u(h),X=Ja(o,h,r,i);break;default:v&&u(h);var z=new fs,F=p[p.length-1].currentNSMap,X=$a(o,h,z,F,s,i),N=z.length;if(!z.closed&&Ka(o,X,z.tagName,w)&&(z.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),v&&N){for(var q=_n(v,{}),x=0;x<N;x++){var $=z[x];u($.offset),$.locator=_n(v,{})}r.locator=q,bn(z,r,F)&&p.push(z),r.locator=v}else bn(z,r,F)&&p.push(z);xr.isHTML(z.uri)&&!z.closed?X=Xa(o,X,z.tagName,s,r):X++}}catch(ce){if(ce instanceof lr)throw ce;i.error("element parse error: "+ce),X=-1}X>y?y=X:a(Math.max(h,y)+1)}}function _n(o,e){return e.lineNumber=o.lineNumber,e.columnNumber=o.columnNumber,e}function $a(o,e,t,r,i,n){function s(v,p,w){t.attributeNames.hasOwnProperty(v)&&n.fatalError("Attribute "+v+" redefined"),t.addValue(v,p,w)}for(var a,u,l=++e,f=mr;;){var c=o.charAt(l);switch(c){case"=":if(f===qt)a=o.slice(e,l),f=gr;else if(f===Kt)f=gr;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===gr||f===qt)if(f===qt&&(n.warning('attribute value must after "="'),a=o.slice(e,l)),e=l+1,l=o.indexOf(c,e),l>0)u=o.slice(e,l).replace(/&#?\w+;/g,i),s(a,u,e-1),f=Qt;else throw new Error("attribute value no end '"+c+"' match");else if(f==Jt)u=o.slice(e,l).replace(/&#?\w+;/g,i),s(a,u,e),n.warning('attribute "'+a+'" missed start quot('+c+")!!"),e=l+1,f=Qt;else throw new Error('attribute value must after "="');break;case"/":switch(f){case mr:t.setTagName(o.slice(e,l));case Qt:case vr:case Lr:f=Lr,t.closed=!0;case Jt:case qt:break;case Kt:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),f==mr&&t.setTagName(o.slice(e,l)),l;case">":switch(f){case mr:t.setTagName(o.slice(e,l));case Qt:case vr:case Lr:break;case Jt:case qt:u=o.slice(e,l),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case Kt:f===Kt&&(u=a),f==Jt?(n.warning('attribute "'+u+'" missed quot(")!'),s(a,u.replace(/&#?\w+;/g,i),e)):((!xr.isHTML(r[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case gr:throw new Error("attribute value missed!!")}return l;case"":c=" ";default:if(c<=" ")switch(f){case mr:t.setTagName(o.slice(e,l)),f=vr;break;case qt:a=o.slice(e,l),f=Kt;break;case Jt:var u=o.slice(e,l).replace(/&#?\w+;/g,i);n.warning('attribute "'+u+'" missed quot(")!!'),s(a,u,e);case Qt:f=vr;break}else switch(f){case Kt:t.tagName,(!xr.isHTML(r[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,e),e=l,f=qt;break;case Qt:n.warning('attribute space is required"'+a+'"!!');case vr:f=qt,e=l;break;case gr:f=Jt,e=l;break;case Lr:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function bn(o,e,t){for(var r=o.tagName,i=null,c=o.length;c--;){var n=o[c],s=n.qName,a=n.value,v=s.indexOf(":");if(v>0)var u=n.prefix=s.slice(0,v),l=s.slice(v+1),f=u==="xmlns"&&l;else l=s,u=null,f=s==="xmlns"&&"";n.localName=l,f!==!1&&(i==null&&(i={},hs(t,t={})),t[f]=i[f]=a,n.uri=xr.XMLNS,e.startPrefixMapping(f,a))}for(var c=o.length;c--;){n=o[c];var u=n.prefix;u&&(u==="xml"&&(n.uri=xr.XML),u!=="xmlns"&&(n.uri=t[u||""]))}var v=r.indexOf(":");v>0?(u=o.prefix=r.slice(0,v),l=o.localName=r.slice(v+1)):(u=null,l=o.localName=r);var p=o.uri=t[u||""];if(e.startElement(p,l,r,o),o.closed){if(e.endElement(p,l,r),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return o.currentNSMap=t,o.localNSMap=i,!0}function Xa(o,e,t,r,i){if(/^(?:script|textarea)$/i.test(t)){var n=o.indexOf("</"+t+">",e),s=o.substring(e+1,n);if(/[&<]/.test(s))return/^script$/i.test(t)?(i.characters(s,0,s.length),n):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),n)}return e+1}function Ka(o,e,t,r){var i=r[t];return i==null&&(i=o.lastIndexOf("</"+t+">"),i<e&&(i=o.lastIndexOf("</"+t)),r[t]=i),i<e}function hs(o,e){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}function Ja(o,e,t,r){var i=o.charAt(e+2);switch(i){case"-":if(o.charAt(e+3)==="-"){var n=o.indexOf("-->",e+4);return n>e?(t.comment(o,e+4,n-e-4),n+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(o.substr(e+3,6)=="CDATA["){var n=o.indexOf("]]>",e+9);return t.startCDATA(),t.characters(o,e+9,n-e-9),t.endCDATA(),n+3}var s=eo(o,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],l=!1,f=!1;a>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],f=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var c=s[a-1];return t.startDTD(u,l,f),t.endDTD(),c.index+c[0].length}}return-1}function Qa(o,e,t){var r=o.indexOf("?>",e);if(r){var i=o.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,t.processingInstruction(i[1],i[2]),r+2):-1}return-1}function fs(){this.attributeNames={}}fs.prototype={setTagName:function(o){if(!yn.test(o))throw new Error("invalid tagName:"+o);this.tagName=o},addValue:function(o,e,t){if(!yn.test(o))throw new Error("invalid attribute:"+o);this.attributeNames[o]=this.length,this[this.length++]={qName:o,value:e,offset:t}},length:0,getLocalName:function(o){return this[o].localName},getLocator:function(o){return this[o].locator},getQName:function(o){return this[o].qName},getURI:function(o){return this[o].uri},getValue:function(o){return this[o].value}};function eo(o,e){var t,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(o);t=i.exec(o);)if(r.push(t),t[1])return r}Wi.XMLReader=ls;Wi.ParseError=lr;var to=Vt,qi=Zt,wn=us,cs=Wi,ro=qi.DOMImplementation,En=to.NAMESPACE,io=cs.ParseError,no=cs.XMLReader;function ds(o){this.options=o||{locator:{}}}ds.prototype.parseFromString=function(o,e){var t=this.options,r=new no,i=t.domBuilder||new Ir,n=t.errorHandler,s=t.locator,a=t.xmlns||{},u=/\/x?html?$/.test(e),l=u?wn.HTML_ENTITIES:wn.XML_ENTITIES;return s&&i.setDocumentLocator(s),r.errorHandler=so(n,i,s),r.domBuilder=t.domBuilder||i,u&&(a[""]=En.HTML),a.xml=a.xml||En.XML,o&&typeof o=="string"?r.parse(o,a,l):r.errorHandler.error("invalid doc source"),i.doc};function so(o,e,t){if(!o){if(e instanceof Ir)return e;o=e}var r={},i=o instanceof Function;t=t||{};function n(s){var a=o[s];!a&&i&&(a=o.length==2?function(u){o(s,u)}:o),r[s]=a&&function(u){a("[xmldom "+s+"]	"+u+Ci(t))}||function(){}}return n("warning"),n("error"),n("fatalError"),r}function Ir(){this.cdata=!1}function er(o,e){e.lineNumber=o.lineNumber,e.columnNumber=o.columnNumber}Ir.prototype={startDocument:function(){this.doc=new ro().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(o,e,t,r){var i=this.doc,n=i.createElementNS(o,t||e),s=r.length;zr(this,n),this.currentElement=n,this.locator&&er(this.locator,n);for(var a=0;a<s;a++){var o=r.getURI(a),u=r.getValue(a),t=r.getQName(a),l=i.createAttributeNS(o,t);this.locator&&er(r.getLocator(a),l),l.value=l.nodeValue=u,n.setAttributeNode(l)}},endElement:function(o,e,t){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(o,e){},endPrefixMapping:function(o){},processingInstruction:function(o,e){var t=this.doc.createProcessingInstruction(o,e);this.locator&&er(this.locator,t),zr(this,t)},ignorableWhitespace:function(o,e,t){},characters:function(o,e,t){if(o=xn.apply(this,arguments),o){if(this.cdata)var r=this.doc.createCDATASection(o);else var r=this.doc.createTextNode(o);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(o)&&this.doc.appendChild(r),this.locator&&er(this.locator,r)}},skippedEntity:function(o){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(o){(this.locator=o)&&(o.lineNumber=0)},comment:function(o,e,t){o=xn.apply(this,arguments);var r=this.doc.createComment(o);this.locator&&er(this.locator,r),zr(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(o,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(o,e,t);this.locator&&er(this.locator,i),zr(this,i),this.doc.doctype=i}},warning:function(o){console.warn("[xmldom warning]	"+o,Ci(this.locator))},error:function(o){console.error("[xmldom error]	"+o,Ci(this.locator))},fatalError:function(o){throw new io(o,this.locator)}};function Ci(o){if(o)return`
@`+(o.systemId||"")+"#[line:"+o.lineNumber+",col:"+o.columnNumber+"]"}function xn(o,e,t){return typeof o=="string"?o.substr(e,t):o.length>=e+t||e?new java.lang.String(o,e,t)+"":o}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(o){Ir.prototype[o]=function(){return null}});function zr(o,e){o.currentElement?o.currentElement.appendChild(e):o.doc.appendChild(e)}Nr.__DOMHandler=Ir;Nr.DOMParser=ds;Nr.DOMImplementation=qi.DOMImplementation;Nr.XMLSerializer=qi.XMLSerializer;var ps=Nr.DOMParser;const Hi=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,ao=1,oo=3,ms=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function ri(){var o=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(t=="x"?r:r&7|8).toString(16)});return e}function uo(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function gs(o){return!!(o&&o.nodeType==1)}function tt(o){return!isNaN(parseFloat(o))&&isFinite(o)}function vs(o){let e=parseFloat(o);return tt(o)===!1?!1:typeof o=="string"&&o.indexOf(".")>-1?!0:Math.floor(e)!==e}function rr(o){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=o.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return o;for(var n=0;n<i;n++)if(typeof document.body.style[t[n]+r]<"u")return t[n]+r;return o}function ys(o){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var i in r)o[i]===void 0&&(o[i]=r[i])}return o}function dt(o){var e=[].slice.call(arguments,1);return e.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}),o}function lo(o,e,t){var r=hr(o,e,t);return e.splice(r,0,o),r}function hr(o,e,t,r,i){var n=r||0,s=i||e.length,a=parseInt(n+(s-n)/2),u;return t||(t=function(l,f){if(l>f)return 1;if(l<f)return-1;if(l==f)return 0}),s-n<=0?a:(u=t(e[a],o),s-n===1?u>=0?a:a+1:u===0?a:u===-1?hr(o,e,t,a,s):hr(o,e,t,n,a))}function Zr(o,e,t,r,i){var n=r||0,s=i||e.length,a=parseInt(n+(s-n)/2),u;return t||(t=function(l,f){if(l>f)return 1;if(l<f)return-1;if(l==f)return 0}),s-n<=0?-1:(u=t(e[a],o),s-n===1?u===0?a:-1:u===0?a:u===-1?Zr(o,e,t,a,s):Zr(o,e,t,n,a))}function Pr(o){var e=window.getComputedStyle(o),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,n=0;return t.forEach(function(s){i+=parseFloat(e[s])||0}),r.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:i}}function Vr(o){var e=window.getComputedStyle(o),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,n=0;return t.forEach(function(s){i+=parseFloat(e[s])||0}),r.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:i}}function ki(o){let e,t=o.ownerDocument;if(o.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(o),e=r.getBoundingClientRect()}else e=o.getBoundingClientRect();return e}function Gr(){var o=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:o,bottom:e,width:o,height:e}}function Zi(o,e){for(var t=o.parentNode,r=t.childNodes,i,n=-1,s=0;s<r.length&&(i=r[s],i.nodeType===e&&n++,i!=o);s++);return n}function ho(o){return Zi(o,oo)}function _s(o){return Zi(o,ao)}function Ar(o){return["xml","opf","ncx"].indexOf(o)>-1}function bs(o,e){return new Blob([o],{type:e})}function Yr(o,e){var t,r=bs(o,e);return t=ms.createObjectURL(r),t}function ws(o){return ms.revokeObjectURL(o)}function Si(o,e){var t,r;if(typeof o=="string")return t=btoa(o),r="data:"+e+";base64,"+t,r}function Es(o){return Object.prototype.toString.call(o).slice(8,-1)}function Lt(o,e,t){var r,i;return typeof DOMParser>"u"||t?i=ps:i=DOMParser,o.charCodeAt(0)===65279&&(o=o.slice(1)),r=new i().parseFromString(o,e),r}function Ke(o,e){var t;if(!o)throw new Error("No Element Provided");if(typeof o.querySelector<"u")return o.querySelector(e);if(t=o.getElementsByTagName(e),t.length)return t[0]}function jt(o,e){return typeof o.querySelector<"u"?o.querySelectorAll(e):o.getElementsByTagName(e)}function ir(o,e,t){var r,i;if(typeof o.querySelector<"u"){e+="[";for(var n in t)e+=n+"~='"+t[n]+"'";return e+="]",o.querySelector(e)}else if(r=o.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(s){for(var a in t)if(s.getAttribute(a)===t[a])return!0;return!1}),i)return i[0]}function $r(o,e){var t=o.ownerDocument||o;typeof t.createTreeWalker<"u"?xs(o,e,NodeFilter.SHOW_TEXT):Vi(o,function(r){r&&r.nodeType===3&&e(r)})}function xs(o,e,t){var r=document.createTreeWalker(o,t,null,!1);let i;for(;i=r.nextNode();)e(i)}function Vi(o,e){if(e(o))return!0;if(o=o.firstChild,o)do{if(Vi(o,e))return!0;o=o.nextSibling}while(o)}function As(o){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(o),r.onloadend=function(){e(r.result)}})}function Ve(){this.resolve=null,this.reject=null,this.id=ri(),this.promise=new Promise((o,e)=>{this.resolve=o,this.reject=e}),Object.freeze(this)}function Xr(o,e,t){var r;if(typeof o.querySelector<"u"&&(r=o.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=jt(o,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[i].getAttribute("epub:type")===t)return r[i]}else return r}function Ti(o){for(var e=[],t=o.childNodes,r=0;r<t.length;r++){let i=t[r];i.nodeType===1&&e.push(i)}return e}function Ni(o){for(var e=[o];o;o=o.parentNode)e.unshift(o);return e}function nr(o,e,t){for(var r=[],i=o.childNodes,n=0;n<i.length;n++){let s=i[n];if(s.nodeType===1&&s.nodeName.toLowerCase()===e){if(t)return s;r.push(s)}}if(!t)return r}function fo(o,e){let t;if(!(o===null||e===""))for(t=o.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class Ds{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var r=Ni(e||this.startContainer),i=Ni(t||this.endContainer);if(r[0]==i[0]){for(var n=0;n<r.length;n++)if(r[n]!=i[n])return r[n-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const co=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:Ds,blob2base64:As,borders:Vr,bounds:Pr,createBase64Url:Si,createBlob:bs,createBlobUrl:Yr,defaults:ys,defer:Ve,documentHeight:uo,extend:dt,filterChildren:nr,findChildren:Ti,getParentByTagName:fo,indexOfElementNode:_s,indexOfNode:Zi,indexOfSorted:Zr,indexOfTextNode:ho,insert:lo,isElement:gs,isFloat:vs,isNumber:tt,isXml:Ar,locationOf:hr,nodeBounds:ki,parents:Ni,parse:Lt,prefixed:rr,qs:Ke,qsa:jt,qsp:ir,querySelectorByType:Xr,requestAnimationFrame:Hi,revokeBlobUrl:ws,sprint:$r,treeWalker:xs,type:Es,uuid:ri,walk:Vi,windowBounds:Gr},Symbol.toStringTag,{value:"Module"}));if(!Cs)var Cs={cwd:function(){return"/"}};function Rt(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+o)}function An(o,e){for(var t="",r=-1,i=0,n,s=0;s<=o.length;++s){if(s<o.length)n=o.charCodeAt(s);else{if(n===47)break;n=47}if(n===47){if(!(r===s-1||i===1))if(r!==s-1&&i===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var a=t.length-1,u=a;u>=0&&t.charCodeAt(u)!==47;--u);if(u!==a){u===-1?t="":t=t.slice(0,u),r=s,i=0;continue}}else if(t.length===2||t.length===1){t="",r=s,i=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+o.slice(r+1,s):t=o.slice(r+1,s);r=s,i=0}else n===46&&i!==-1?++i:i=-1}return t}function po(o,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+o+r:r}var Ur={resolve:function(){for(var e="",t=!1,r,i=arguments.length-1;i>=-1&&!t;i--){var n;i>=0?n=arguments[i]:(r===void 0&&(r=Cs.cwd()),n=r),Rt(n),n.length!==0&&(e=n+"/"+e,t=n.charCodeAt(0)===47)}return e=An(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Rt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=An(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Rt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];Rt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Ur.normalize(e)},relative:function(e,t){if(Rt(e),Rt(t),e===t||(e=Ur.resolve(e),t=Ur.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,n=i-r,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var a=t.length,u=a-s,l=n<u?n:u,f=-1,c=0;c<=l;++c){if(c===l){if(u>l){if(t.charCodeAt(s+c)===47)return t.slice(s+c+1);if(c===0)return t.slice(s+c)}else n>l&&(e.charCodeAt(r+c)===47?f=c:c===0&&(f=0));break}var v=e.charCodeAt(r+c),p=t.charCodeAt(s+c);if(v!==p)break;v===47&&(f=c)}var w="";for(c=r+f+1;c<=i;++c)(c===i||e.charCodeAt(c)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+t.slice(s+f):(s+=f,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(Rt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,i=-1,n=!0,s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),t===47){if(!n){i=s;break}}else n=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Rt(e);var r=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,u=-1;for(s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(l===47){if(!n){r=s+1;break}}else u===-1&&(n=!1,u=s+1),a>=0&&(l===t.charCodeAt(a)?--a===-1&&(i=s):(a=-1,i=u))}return r===i?i=u:i===-1&&(i=e.length),e.slice(r,i)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!n){r=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Rt(e);for(var t=-1,r=0,i=-1,n=!0,s=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!n){r=a+1;break}continue}i===-1&&(n=!1,i=a+1),u===46?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return po("/",e)},parse:function(e){Rt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,n;i?(t.root="/",n=1):n=0;for(var s=-1,a=0,u=-1,l=!0,f=e.length-1,c=0;f>=n;--f){if(r=e.charCodeAt(f),r===47){if(!l){a=f+1;break}continue}u===-1&&(l=!1,u=f+1),r===46?s===-1?s=f:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||u===-1||c===0||c===1&&s===u-1&&s===a+1?u!==-1&&(a===0&&i?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(a,u)):(a===0&&i?(t.name=e.slice(1,s),t.base=e.slice(1,u)):(t.name=e.slice(a,s),t.base=e.slice(a,u)),t.ext=e.slice(s,u)),a>0?t.dir=e.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null},mo=Ur;const Ht=fr(mo);class Wt{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return Ht.parse(e)}isAbsolute(e){return Ht.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Ht.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Ht.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Tt{constructor(e,t){var r=e.indexOf("://")>-1,i=e,n;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(n=new Wt(this.base),i=n.resolve(i))}this.Path=new Wt(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=Ht.resolve(this.directory,e),this.origin+r)}relative(e){return Ht.relative(e,this.directory)}toString(){return this.href}}const tr=1,At=3,go=9;class Ge{constructor(e,t,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Ge))return new Ge(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),i=this.checkType(e),i==="string")return this.str=e,dt(this,this.parse(e));if(i==="range")return dt(this,this.fromRange(e,this.base,r));if(i==="node")return dt(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(Es(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof Ge?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,n;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),i=this.getPathComponent(e),t.path=this.parseComponent(i),n=this.getRange(e),n&&(t.range=!0,t.start=this.parseComponent(n[0]),t.end=this.parseComponent(n[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),n;return r.length>1&&(n=r[1],t.terminal=this.parseTerminal(n)),i[0]===""&&i.shift(),t.steps=i.map(function(s){return this.parseStep(s)}.bind(this)),t}parseStep(e){var t,r,i,n,s;if(n=e.match(/\[(.*)\]/),n&&n[1]&&(s=n[1]),r=parseInt(e),!isNaN(r))return r%2===0?(t="element",i=r/2-1):(t="text",i=(r-1)/2),{type:t,index:i,id:s||null}}parseTerminal(e){var t,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(t=parseInt(e.split("[")[0]),r=i[1]):t=parseInt(e),tt(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,i,n,s;if(typeof e=="string"&&(e=new Ge(e)),typeof t=="string"&&(t=new Ge(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),n=e.start.terminal):(r=e.path.steps,n=e.path.terminal),t.range?(i=t.path.steps.concat(t.start.steps),s=t.start.terminal):(i=t.path.steps,s=t.path.terminal);for(var a=0;a<r.length;a++){if(!r[a])return-1;if(!i[a]||r[a].index>i[a].index)return 1;if(r[a].index<i[a].index)return-1}return r.length<i.length?-1:n.offset>s.offset?1:n.offset<s.offset?-1:0}step(e){var t=e.nodeType===At?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),i;if(r)return i=r.nodeType===At?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},n=e,s;n&&n.parentNode&&n.parentNode.nodeType!=go;)r?s=this.filteredStep(n,r):s=this.step(n),s&&i.steps.unshift(s),n=n.parentNode;return t!=null&&t>=0&&(i.terminal.offset=t,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null},n=e.startContainer,s=e.endContainer,a=e.startOffset,u=e.endOffset,l=!1;if(r&&(l=n.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),e.collapsed)l&&(a=this.patchOffset(n,a,r)),i.path=this.pathTo(n,a,r);else{i.range=!0,l&&(a=this.patchOffset(n,a,r)),i.start=this.pathTo(n,a,r),l&&(u=this.patchOffset(s,u,r)),i.end=this.pathTo(s,u,r),i.path={steps:[],terminal:null};var f=i.start.steps.length,c;for(c=0;c<f&&this.equalStep(i.start.steps[c],i.end.steps[c]);c++)c===f-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[c]),i.range=!1):i.path.steps.push(i.start.steps[c]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),i.path=this.pathTo(e,null,r),i}filter(e,t){var r,i,n,s,a,u=!1;return e.nodeType===At?(u=!0,n=e.parentNode,r=e.parentNode.classList.contains(t)):(u=!1,r=e.classList.contains(t)),r&&u?(s=n.previousSibling,a=n.nextSibling,s&&s.nodeType===At?i=s:a&&a.nodeType===At&&(i=a),i||e):r&&!u?!1:e}patchOffset(e,t,r){if(e.nodeType!=At)throw new Error("Anchor must be a text node");var i=e,n=t;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===tr)if(i.previousSibling.classList.contains(r))n+=i.previousSibling.textContent.length;else break;else n+=i.previousSibling.textContent.length;i=i.previousSibling}return n}normalizedMap(e,t,r){var i={},n=-1,s,a=e.length,u,l;for(s=0;s<a;s++)u=e[s].nodeType,u===tr&&e[s].classList.contains(r)&&(u=At),s>0&&u===At&&l===At?i[s]=n:t===u&&(n=n+1,i[s]=n),l=u;return i}position(e){var t,r;return e.nodeType===tr?(t=e.parentNode.children,t||(t=Ti(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,i,n;return e.nodeType===tr?(r=e.parentNode.children,n=this.normalizedMap(r,tr,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),n=this.normalizedMap(r,At,t)),i=Array.prototype.indexOf.call(r,e),n[i]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+i+"]"):t.push("*["+i+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+i+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===At?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var i=t||document,n=i.documentElement,s,a,u=e.length,l;for(l=0;l<u&&(a=e[l],a.type==="element"?a.id?n=i.getElementById(a.id):(s=n.children||Ti(n),n=s[a.index]):a.type==="text"&&(n=this.textNodes(n,r)[a.index]),!!n);l++);return n}findNode(e,t,r){var i=t||document,n,s;return!r&&typeof i.evaluate<"u"?(s=this.stepsToXpath(e),n=i.evaluate(s,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?n=this.walkToNode(e,i,r):n=this.walkToNode(e,i),n}fixMiss(e,t,r,i){var n=this.findNode(e.slice(0,-1),r,i),s=n.childNodes,a=this.normalizedMap(s,At,i),u,l,f=e[e.length-1].index;for(let c in a){if(!a.hasOwnProperty(c))return;if(a[c]===f)if(u=s[c],l=u.textContent.length,t>l)t=t-l;else{u.nodeType===tr?n=u.childNodes[0]:n=u;break}}return{container:n,offset:t}}toRange(e,t){var r=e||document,i,n,s,a,u,l=this,f,c,v=t?r.querySelector("."+t)!=null:!1,p;if(typeof r.createRange<"u"?i=r.createRange():i=new Ds,l.range?(n=l.start,f=l.path.steps.concat(n.steps),a=this.findNode(f,r,v?t:null),s=l.end,c=l.path.steps.concat(s.steps),u=this.findNode(c,r,v?t:null)):(n=l.path,f=l.path.steps,a=this.findNode(l.path.steps,r,v?t:null)),a)try{n.terminal.offset!=null?i.setStart(a,n.terminal.offset):i.setStart(a,0)}catch{p=this.fixMiss(f,n.terminal.offset,r,v?t:null),i.setStart(p.container,p.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{s.terminal.offset!=null?i.setEnd(u,s.terminal.offset):i.setEnd(u,0)}catch{p=this.fixMiss(c,l.end.terminal.offset,r,v?t:null),i.setEnd(p.container,p.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var i=parseInt(t),n=(e+1)*2,s="/"+n+"/";return s+=(i+1)*2,r&&(s+="["+r+"]"),s}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Nt{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(i){try{var n=i.apply(t,e)}catch(s){console.log(s)}n&&typeof n.then=="function"&&r.push(n)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function ks(o,e){var t,r,i=e.url,n=i.indexOf("://")>-1;o&&(r=Ke(o,"head"),t=Ke(r,"base"),t||(t=o.createElement("base"),r.insertBefore(t,r.firstChild)),!n&&window&&window.location&&(i=window.location.origin+i),t.setAttribute("href",i))}function vo(o,e){var t,r,i=e.canonical;o&&(t=Ke(o,"head"),r=Ke(t,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=o.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),t.appendChild(r)))}function yo(o,e){var t,r,i=e.idref;o&&(t=Ke(o,"head"),r=Ke(t,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=o.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),t.appendChild(r)))}function _o(o,e){var t=o.querySelectorAll("a[href]");if(t.length)for(var r=Ke(o.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,n=function(a){var u=a.getAttribute("href");if(u.indexOf("mailto:")!==0){var l=u.indexOf("://")>-1;if(l)a.setAttribute("target","_blank");else{var f;try{f=new Tt(u,i)}catch{}a.onclick=function(){return f&&f.hash?e(f.Path.path+f.hash):e(f?f.Path.path:u),!1}}}}.bind(this),s=0;s<t.length;s++)n(t[s])}function Dn(o,e,t){return e.forEach(function(r,i){r&&t[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=o.replace(new RegExp(r,"g"),t[i]))}),o}function Dr(o,e,t,r){var i=typeof window<"u"?window.URL:!1,n=i?"blob":"arraybuffer",s=new Ve,a=new XMLHttpRequest,u=XMLHttpRequest.prototype,l;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),t&&(a.withCredentials=!0),a.onreadystatechange=c,a.onerror=f,a.open("GET",o,!0);for(l in r)a.setRequestHeader(l,r[l]);e=="json"&&a.setRequestHeader("Accept","application/json"),e||(e=new Wt(o).extension),e=="blob"&&(a.responseType=n),Ar(e)&&a.overrideMimeType("text/xml"),e=="binary"&&(a.responseType="arraybuffer"),a.send();function f(v){s.reject(v)}function c(){if(this.readyState===XMLHttpRequest.DONE){var v=!1;if((this.responseType===""||this.responseType==="document")&&(v=this.responseXML),this.status===200||this.status===0||v){var p;if(!this.response&&!v)return s.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),s.promise;if(this.status===403)return s.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),s.promise;v?p=this.responseXML:Ar(e)?p=Lt(this.response,"text/xml"):e=="xhtml"?p=Lt(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?p=Lt(this.response,"text/html"):e=="json"?p=JSON.parse(this.response):e=="blob"?i?p=this.response:p=new Blob([this.response]):p=this.response,s.resolve(p)}else s.reject({status:this.status,message:this.response,stack:new Error().stack})}}return s.promise}class bo{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new Nt(this),this.hooks.content=new Nt(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||Dr,r=new Ve,i=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then(function(n){return this.document=n,this.contents=n.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){r.resolve(this.contents)}.bind(this)).catch(function(n){r.reject(n)}),i}base(){return ks(this.document,this)}render(e){var t=new Ve,r=t.promise;return this.output,this.load(e).then(function(i){var n=typeof navigator<"u"&&navigator.userAgent||"",s=n.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||s?a=ps:a=XMLSerializer;var u=new a;return this.output=u.serializeToString(i),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(i){t.reject(i)}),r}find(e){var t=this,r=[],i=e.toLowerCase(),n=function(s){for(var a=s.textContent.toLowerCase(),u=t.document.createRange(),l,f,c=-1,v,p=150;f!=-1;)f=a.indexOf(i,c+1),f!=-1&&(u=t.document.createRange(),u.setStart(s,f),u.setEnd(s,f+i.length),l=t.cfiFromRange(u),s.textContent.length<p?v=s.textContent:(v=s.textContent.substring(f-p/2,f+p/2),v="..."+v+"..."),r.push({cfi:l,excerpt:v})),c=f};return $r(t.document,function(s){n(s)}),r}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,n=this,s=e.toLowerCase(),a=function(c){const w=c.reduce((y,h)=>y+h.textContent,"").toLowerCase().indexOf(s);if(w!=-1){const h=w+s.length;let d=0,g=0;if(w<c[0].length){let E;for(;d<c.length-1&&(g+=c[d].length,!(h<=g));)d+=1;let C=c[0],_=c[d],D=n.document.createRange();D.setStart(C,w);let S=c.slice(0,d).reduce((z,F)=>z+F.textContent.length,0);D.setEnd(_,S>h?h:h-S),E=n.cfiFromRange(D);let R=c.slice(0,d+1).reduce((z,F)=>z+F.textContent,"");R.length>i&&(R=R.substring(w-i/2,w+i/2),R="..."+R+"..."),r.push({cfi:E,excerpt:R})}}},u=document.createTreeWalker(n.document,NodeFilter.SHOW_TEXT,null,!1);let l,f=[];for(;l=u.nextNode();)f.push(l),f.length==t&&(a(f.slice(0,t)),f=f.slice(1,t));return f.length>0&&a(f),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),n=i.indexOf("-"),s,a;n!=-1&&(s=i.slice(0,n),a=i.slice(n+1),t[s]=a)}),t}cfiFromRange(e){return new Ge(e,this.cfiBase).toString()}cfiFromElement(e){return new Ge(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class wo{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Nt,this.hooks.content=new Nt,this.hooks.content.register(ks),this.hooks.content.register(vo),this.hooks.content.register(yo),this.epubcfi=new Ge,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,n)=>{var s=this.manifest[i.idref],a;i.index=n,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=t(i.href,!0),i.canonical=r(i.href)),s&&(i.href=s.href,i.url=t(i.href,!0),i.canonical=r(i.href),s.properties.length&&i.properties.push.apply(i.properties,s.properties)),i.linear==="yes"?(i.prev=function(){let u=i.index;for(;u>0;){let l=this.get(u-1);if(l&&l.linear)return l;u-=1}}.bind(this),i.next=function(){let u=i.index;for(;u<this.spineItems.length-1;){let l=this.get(u+1);if(l&&l.linear)return l;u+=1}}.bind(this)):(i.prev=function(){},i.next=function(){}),a=new bo(i,this.hooks),this.append(a)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new Ge(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Gi{constructor(e){this._q=[],this.context=e,this.tick=Hi,this.running=!1,this.paused=!1}enqueue(){var e,t,r,i=[].shift.call(arguments),n=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new Ve,t=e.promise,r={task:i,args:n,deferred:e,promise:t}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new Ve,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Ve),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const ii="0.3",Mr=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],xe={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class Ss{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new Gi(this),this.epubcfi=new Ge,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then(function(t){var r=new Ve,i=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}.bind(this))}parse(e,t,r){var i=[],n,s=e.ownerDocument,a=Ke(s,"body"),u=0,l,f=r||this.break,c=function(v){var p=v.length,w,y=0;if(v.textContent.trim().length===0)return!1;for(u==0&&(n=this.createRange(),n.startContainer=v,n.startOffset=0),w=f-u,w>p&&(u+=p,y=p);y<p;)if(w=f-u,u===0&&(y+=1,n=this.createRange(),n.startContainer=v,n.startOffset=y),y+w>=p)u+=p-y,y=p;else{y+=w,n.endContainer=v,n.endOffset=y;let h=new Ge(n,t).toString();i.push(h),u=0}l=v};if($r(a,c.bind(this)),n&&n.startContainer&&l){n.endContainer=l,n.endOffset=l.length;let v=new Ge(n,t).toString();i.push(v),u=0}return i}generateFromWords(e,t,r){var i=e?new Ge(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(n){n.linear&&(i?n.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),n,t,i,r):this.q.enqueue(this.processWords.bind(this),n,t,i,r))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(e,t,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then(function(n){var s=new Ve,a=this.parseWords(n,e,t,r),u=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=i?a.slice(0,u):a),e.unload(),this.processingTimeout=setTimeout(()=>s.resolve(a),this.pause),s.promise}.bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,i){var n=t.cfiBase,s=[],a=e.ownerDocument,u=Ke(a,"body"),l=r,f=i?i.spinePos!==t.index:!0,c;i&&t.index===i.spinePos&&(c=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var v=function(p){if(!f)if(p===c)f=!0;else return!1;if(p.textContent.length<10&&p.textContent.trim().length===0)return!1;var w=this.countWords(p.textContent),y,h=0;if(w===0)return!1;for(y=l-this._wordCounter,y>w&&(this._wordCounter+=w,h=w);h<w;)if(y=l-this._wordCounter,h+y>=w)this._wordCounter+=w-h,h=w;else{h+=y;let d=new Ge(p,n);s.push({cfi:d.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return $r(u,v.bind(this)),s}locationFromCfi(e){let t;return Ge.prototype.isCfiString(e)&&(e=new Ge(e)),this._locations.length===0?-1:(t=hr(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new Ge(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(xe.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}zt(Ss.prototype);class Eo{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=Ke(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Ht.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Cn{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,i;if(!e)throw new Error("Package File Not Found");if(t=Ke(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=Ke(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=Ke(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=_s(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=jt(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(n){var s=n.getAttribute("id"),a=n.getAttribute("href")||"",u=n.getAttribute("media-type")||"",l=n.getAttribute("media-overlay")||"",f=n.getAttribute("properties")||"";t[s]={href:a,type:u,overlay:l,properties:f.length?f.split(" "):[]}}),t}parseSpine(e,t){var r=[],i=jt(e,"itemref"),n=Array.prototype.slice.call(i);return n.forEach(function(s,a){var u=s.getAttribute("idref"),l=s.getAttribute("properties")||"",f=l.length?l.split(" "):[],c={id:s.getAttribute("id"),idref:u,linear:s.getAttribute("linear")||"yes",properties:f,index:a};r.push(c)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=ir(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=ir(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=t.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=Ke(e,"package");t.getAttribute("version");var r=ir(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=ir(e,"meta",{name:"cover"});if(i){var n=i.getAttribute("content"),s=e.getElementById(n);return s?s.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=ir(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class _i{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,i;t&&(r=Ke(e,"html"),i=Ke(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;const i=r[t];if(i&&(e===i.id||e===i.href))return i;{let n;for(let s=0;s<r.length&&(n=this.getByIndex(e,t,r[s].subitems),!n);++s);return n}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=Xr(e,"nav","toc"),r=[];if(!t)return r;let i=nr(t,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,t){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const n=this.navItem(e.children[i],t);n&&r.push(n)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,i=nr(e,"a",!0)||nr(e,"span",!0);if(!i)return;let n=i.getAttribute("href")||"";r||(r=n);let s=i.textContent||"",a=[],u=nr(e,"ol",!0);return u&&(a=this.parseNavList(u,r)),{id:r,href:n,label:s,subitems:a,parent:t}}parseLandmarks(e){var t=Xr(e,"nav","landmarks"),r=t?jt(t,"li"):[],i=r.length,n,s=[],a;if(!r||i===0)return s;for(n=0;n<i;++n)a=this.landmarkItem(r[n]),a&&(s.push(a),this.landmarksByType[a.type]=n);return s}landmarkItem(e){let t=nr(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=t.getAttribute("href")||"",n=t.textContent||"";return{href:i,label:n,type:r}}parseNcx(e){var t=jt(e,"navPoint"),r=t.length,i,n={},s=[],a,u;if(!t||r===0)return s;for(i=0;i<r;++i)a=this.ncxItem(t[i]),n[a.id]=a,a.parent?(u=n[a.parent],u.subitems.push(a)):s.push(a);return s}ncxItem(e){var t=e.getAttribute("id")||!1,r=Ke(e,"content"),i=r.getAttribute("src"),n=Ke(e,"navLabel"),s=n.textContent?n.textContent:"",a=[],u=e.parentNode,l;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(l=u.getAttribute("id")),{id:t,href:i,label:s,subitems:a,parent:l}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var yr={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},xo=function(){var o,e,t,r,i={};for(o in yr)if(yr.hasOwnProperty(o)){for(e in yr[o])if(yr[o].hasOwnProperty(e))if(t=yr[o][e],typeof t=="string")i[t]=o+"/"+e;else for(r=0;r<t.length;r++)i[t[r]]=o+"/"+e}return i}(),Ao="text/plain";function Do(o){return o&&xo[o.split(".").pop().toLowerCase()]||Ao}const ar={lookup:Do};class Co{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new Tt(e),r=ar.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>As(i)).then(i=>Si(i,r)):this.settings.request(e,"blob").then(i=>Yr(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise(function(t){t(this.urls)}.bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(i){var n=this.createCssFile(i,e,t).then(function(s){var a=this.urls.indexOf(i);a>-1&&(this.replacementUrls[a]=s)}.bind(this));r.push(n)}.bind(this)),Promise.all(r)}createCssFile(e){var t;if(Ht.isAbsolute(e))return new Promise(function(s){s()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var n=this.urls.map(s=>{var a=this.settings.resolver(s),u=new Wt(r).relative(a);return u});return i?i.then(s=>(s=Dn(s,n,this.replacementUrls),this.settings.replacements==="base64"?t=Si(s,"text/css"):t=Yr(s,"text/css"),t),s=>new Promise(function(a){a()})):new Promise(function(s){s()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map(function(r){var i=t(r),n=new Wt(e).relative(i);return n}.bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise(function(r,i){r(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,Dn(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class bi{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new Ge,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=Ke(e,"html"),r=Ke(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=Xr(e,"nav","page-list"),r=t?jt(t,"li"):[],i=r.length,n,s=[],a;if(!r||i===0)return s;for(n=0;n<i;++n)a=this.item(r[n]),s.push(a);return s}parseNcx(e){var t=[],r=0,i,n,s,a=0;if(n=Ke(e,"pageList"),!n||(s=jt(n,"pageTarget"),a=s.length,!s||s.length===0))return t;for(r=0;r<a;++r)i=this.ncxItem(s[r]),t.push(i);return t}ncxItem(e){var t=Ke(e,"navLabel"),r=Ke(t,"text"),i=r.textContent,n=Ke(e,"content"),s=n.getAttribute("src"),a=parseInt(i,10);return{href:s,page:a}}item(e){var t=Ke(e,"a"),r=t.getAttribute("href")||"",i=t.textContent||"",n=parseInt(i),s=r.indexOf("epubcfi"),a,u,l;return s!=-1?(a=r.split("#"),u=a[0],l=a.length>1?a[1]:!1,{cfi:l,href:r,packageUrl:u,page:n}):{href:r,page:n}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=Zr(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=hr(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class Ts{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var i=1,n=r||0,s=e,a=t,u=Math.floor(s/12),l,f,c,v;this._spread&&s>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(n=u%2===0?u:u-1),this.name==="pre-paginated"&&(n=0),i>1?(l=s/i-n,c=l+n):(l=s,c=s),this.name==="pre-paginated"&&i>1&&(s=l),f=l*i+n,v=s,this.width=s,this.height=a,this.spreadWidth=f,this.pageWidth=c,this.delta=v,this.columnWidth=l,this.gap=n,this.divisor=i,this.update({width:s,height:a,spreadWidth:f,pageWidth:c,delta:v,columnWidth:l,gap:n,divisor:i})}format(e,t,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,t){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),i=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=dt(this.props,e);this.emit(xe.LAYOUT.UPDATED,t,e)}}}zt(Ts.prototype);class ko{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new Tt(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(t),i.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,i;for(var n in r)r.hasOwnProperty(n)&&(n===this._current||n==="default")&&(i=r[n],(i.rules&&Object.keys(i.rules).length>0||i.url&&t.indexOf(i.url)===-1)&&this.add(n,e),this._injected.push(n));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var i=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},i.forEach(n=>{n.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Kr{constructor(e,t,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=i}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,i){var n=e&&e.document?e.document.body:!1,s;if(n){if(s=this.rangePairToCfiPair(t,{start:this.findStart(n,r,i),end:this.findEnd(n,r,i)}),this._dev===!0){let a=e.document,u=new Ge(s.start).toRange(a),l=new Ge(s.end).toRange(a),f=a.defaultView.getSelection(),c=a.createRange();f.removeAllRanges(),c.setStart(u.startContainer,u.startOffset),c.setEnd(l.endContainer,l.endOffset),f.addRange(c)}return s}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),s,a;(s=n.nextNode())&&(a=t(s),!a););return a}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),n=i*this.layout.divisor,s=this.layout.columnWidth,a=this.layout.gap,u,l,f=0;f<n.pages;f++)u=(s+a)*f,l=s*(f+1)+a*f,t.push({start:this.findStart(e.document.body,u,l),end:this.findEnd(e.document.body,u,l)});return t}findStart(e,t,r){for(var i=[e],n,s,a=e;i.length;)if(n=i.shift(),s=this.walk(n,u=>{var l,f,c,v,p;if(p=ki(u),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?p.left:p.top,f=this.horizontal?p.right:p.bottom,l>=t&&l<=r)return u;if(f>t)return u;a=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=p.left,f=p.right,f<=r&&f>=t)return u;if(l<r)return u;a=u,i.push(u)}else{if(c=p.top,v=p.bottom,c>=t&&c<=r)return u;if(v>t)return u;a=u,i.push(u)}}),s)return this.findTextStartRange(s,t,r);return this.findTextStartRange(a,t,r)}findEnd(e,t,r){for(var i=[e],n,s=e,a;i.length;)if(n=i.shift(),a=this.walk(n,u=>{var l,f,c,v,p;if(p=ki(u),this.horizontal&&this.direction==="ltr"){if(l=Math.round(p.left),f=Math.round(p.right),l>r&&s)return s;if(f>r)return u;s=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?p.left:p.top),f=Math.round(this.horizontal?p.right:p.bottom),f<t&&s)return s;if(l<t)return u;s=u,i.push(u)}else{if(c=Math.round(p.top),v=Math.round(p.bottom),c>r&&s)return s;if(v>r)return u;s=u,i.push(u)}}),a)return this.findTextEndRange(a,t,r);return this.findTextEndRange(s,t,r)}findTextStartRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),n,s,a,u,l,f=0;f<i.length;f++)if(n=i[f],s=n.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=s.left,a>=t)return n}else if(this.horizontal&&this.direction==="rtl"){if(l=s.right,l<=r)return n}else if(u=s.top,u>=t)return n;return i[0]}findTextEndRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),n,s,a,u,l,f,c,v=0;v<i.length;v++){if(s=i[v],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=a.left,l=a.right,u>r&&n)return n;if(l>r)return s}else if(this.horizontal&&this.direction==="rtl"){if(u=a.left,l=a.right,l<t&&n)return n;if(u<t)return s}else{if(f=a.top,c=a.bottom,f>r&&n)return n;if(c>r)return s}n=s}return i[i.length-1]}splitTextNodeIntoRanges(e,t){var r=[],i=e.textContent||"",n=i.trim(),s,a=e.ownerDocument,u=t||" ",l=n.indexOf(u);if(l===-1||e.nodeType!=Node.TEXT_NODE)return s=a.createRange(),s.selectNodeContents(e),[s];for(s=a.createRange(),s.setStart(e,0),s.setEnd(e,l),r.push(s),s=!1;l!=-1;)l=n.indexOf(u,l+1),l>0&&(s&&(s.setEnd(e,l),r.push(s)),s=a.createRange(),s.setStart(e,l+1));return s&&(s.setEnd(e,n.length),r.push(s)),r}rangePairToCfiPair(e,t){var r=t.start,i=t.end;r.collapse(!0),i.collapse(!1);let n=new Ge(r,e).toString(),s=new Ge(i,e).toString();return{start:n,end:s}}rangeListToCfiList(e,t){for(var r=[],i,n=0;n<t.length;n++)i=this.rangePairToCfiPair(e,t[n]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const Ns=typeof navigator<"u",So=Ns&&/Chrome/.test(navigator.userAgent),kn=Ns&&!So&&/AppleWebKit/.test(navigator.userAgent),To=1;class Yi{constructor(e,t,r,i){this.epubcfi=new Ge,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",ii),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Mr}width(e){var t=this.content;return e&&tt(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&tt(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&tt(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&tt(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),i=this.content||this.document.body,n=Vr(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.width,n&&n.width&&(t+=n.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var i=this.content||this.document.body;return t?i.style.setProperty(e,t,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],n={};if(t&&t.hasAttribute("content")){let s=t.getAttribute("content"),a=s.match(/width\s*=\s*([^,]*)/),u=s.match(/height\s*=\s*([^,]*)/),l=s.match(/initial-scale\s*=\s*([^,]*)/),f=s.match(/minimum-scale\s*=\s*([^,]*)/),c=s.match(/maximum-scale\s*=\s*([^,]*)/),v=s.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(r.width=a[1]),u&&u.length&&typeof u[1]<"u"&&(r.height=u[1]),l&&l.length&&typeof l[1]<"u"&&(r.scale=l[1]),f&&f.length&&typeof f[1]<"u"&&(r.minimum=f[1]),c&&c.length&&typeof c[1]<"u"&&(r.maximum=c[1]),v&&v.length&&typeof v[1]<"u"&&(r.scalable=v[1])}return n=ys(e||{},r),e&&(n.width&&i.push("width="+n.width),n.height&&i.push("height="+n.height),n.scale&&i.push("initial-scale="+n.scale),n.scalable==="no"?(i.push("minimum-scale="+n.scale),i.push("maximum-scale="+n.scale),i.push("user-scalable="+n.scalable)):(n.scalable&&i.push("user-scalable="+n.scalable),n.minimum&&i.push("minimum-scale="+n.minimum),n.maximum&&i.push("minimum-scale="+n.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),n}expand(){this.emit(xe.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(xe.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var n=0;n<i.length;n+=1)if(i[n].media){var s=this.window.matchMedia(i[n].media.mediaText);s.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let n=new Ge(e).toRange(this.document,t);if(n){try{if(!n.endContainer||n.startContainer==n.endContainer&&n.startOffset==n.endOffset){let s=n.startContainer.textContent.indexOf(" ",n.startOffset);s==-1&&(s=n.startContainer.textContent.length),n.setEnd(n.startContainer,s)}}catch(s){console.error("setting end offset to start container length failed",s)}if(n.startContainer.nodeType===Node.ELEMENT_NODE)r=n.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(kn){let s=n.startContainer,a=new Range;try{s.nodeType===To?r=s.getBoundingClientRect():n.startOffset+2<s.length?(a.setStart(s,n.startOffset),a.setEnd(s,n.startOffset+2),r=a.getBoundingClientRect()):n.startOffset-2>0?(a.setStart(s,n.startOffset-2),a.setEnd(s,n.startOffset),r=a.getBoundingClientRect()):r=s.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else r=n.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let n=e.substring(e.indexOf("#")+1),s=this.document.getElementById(n);if(s)if(kn){let a=new Range;a.selectNode(s),r=a.getBoundingClientRect()}else r=s.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise(function(t,r){var i,n=!1;if(!this.document){t(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){t(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(i)}.bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,n=e.length;i<n;i++){var s=1,a=e[i],u=e[i][0],l="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],s=0);for(var f=a.length;s<f;s++){var c=a[s];l+=c[0]+":"+c[1]+(c[2]?" !important":"")+`;
`}r.insertRule(u+"{"+l+"}",r.cssRules.length)}else Object.keys(e).forEach(p=>{const w=e[p];if(Array.isArray(w))w.forEach(y=>{const d=Object.keys(y).map(g=>`${g}:${y[g]}`).join(";");r.insertRule(`${p}{${d}}`,r.cssRules.length)});else{const h=Object.keys(w).map(d=>`${d}:${w[d]}`).join(";");r.insertRule(`${p}{${h}}`,r.cssRules.length)}})}addScript(e){return new Promise(function(t,r){var i,n=!1;if(!this.document){t(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(i)}.bind(this))}addClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),Mr.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(Mr.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}.bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new Ge(t,this.cfiBase).toString(),this.emit(xe.CONTENTS.SELECTED,r),this.emit(xe.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new Ge(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new Ge(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new Ge(e,this.cfiBase,t).toString()}map(e){var t=new Kr(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,i,n){let s=rr("column-axis"),a=rr("column-gap"),u=rr("column-width"),l=rr("column-fill"),c=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),n==="rtl"&&c==="horizontal"&&this.direction(n),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),c==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(s,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(s,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(l,"auto"),this.css(a,i+"px"),this.css(u,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var i="scale("+e+")",n="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(n=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",i+n)}fit(e,t,r){var i=this.viewport(),n=parseInt(i.width),s=parseInt(i.height),a=e/n,u=t/s,l=a<u?a:u;if(this.layoutStyle("paginated"),this.width(n),this.height(s),this.overflow("hidden"),this.scaler(l,0,0),this.css("background-size",n*l+"px "+s*l+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var f=e-n*l;this.css("margin-left",f+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,i,n){var s=new Kr(t,n);return s.page(this,e,r,i)}linksHandler(){_o(this.content,e=>{this.emit(xe.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=rr("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}zt(Yi.prototype);class No{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,i,n,s){let a=encodeURI(t+e),l=new Ge(t).spinePos,f=new Is({type:e,cfiRange:t,data:r,sectionIndex:l,cb:i,className:n,styles:s});return this._annotations[a]=f,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(a):this._annotationsBySectionIndex[l]=[a],this.rendition.views().forEach(v=>{f.sectionIndex===v.index&&f.attach(v)}),f}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let i=this._annotations[r];if(t&&i.type!==t)return;this.rendition.views().forEach(s=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===s.index&&i.detach(s)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,i,n){return this.add("highlight",e,t,r,i,n)}underline(e,t,r,i,n){return this.add("underline",e,t,r,i,n)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class Is{constructor({type:e,cfiRange:t,data:r,sectionIndex:i,cb:n,className:s,styles:a}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=n,this.className=s,this.styles=a}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:i,mark:n,cb:s,className:a,styles:u}=this,l;return i==="highlight"?l=e.highlight(t,r,s,a,u):i==="underline"?l=e.underline(t,r,s,a,u):i==="mark"&&(l=e.mark(t,r,s)),this.mark=l,this.emit(xe.ANNOTATION.ATTACH,l),l}detach(e){let{cfiRange:t,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(t):r==="underline"?i=e.ununderline(t):r==="mark"&&(i=e.unmark(t))),this.mark=void 0,this.emit(xe.ANNOTATION.DETACH,i),i}text(){}}zt(Is.prototype);var Ft={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.createElement=Rs;function Rs(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}ni.default={createElement:Rs};var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.proxyMouse=Os;Rr.clone=Bs;Rr.default={proxyMouse:Os};function Os(o,e){function t(s){for(var a=e.length-1;a>=0;a--){var u=e[a],l=s.clientX,f=s.clientY;if(s.touches&&s.touches.length&&(l=s.touches[0].clientX,f=s.touches[0].clientY),!!Io(u,o,l,f)){u.dispatchEvent(Bs(s));break}}}if(o.nodeName==="iframe"||o.nodeName==="IFRAME")try{this.target=o.contentDocument}catch{this.target=o}else this.target=o;for(var r=["mouseup","mousedown","click","touchstart"],i=0;i<r.length;i++){var n=r[i];this.target.addEventListener(n,function(s){return t(s)},!1)}}function Bs(o){var e=Object.assign({},o,{bubbles:!1});try{return new MouseEvent(o.type,e)}catch{var t=document.createEvent("MouseEvents");return t.initMouseEvent(o.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function Io(o,e,t,r){var i=e.getBoundingClientRect();function n(f,c,v){var p=f.top-i.top,w=f.left-i.left,y=p+f.height,h=w+f.width;return p<=v&&w<=c&&y>v&&h>c}var s=o.getBoundingClientRect();if(!n(s,t,r))return!1;for(var a=o.getClientRects(),u=0,l=a.length;u<l;u++)if(n(a[u],t,r))return!0;return!1}var Jr,$i;Object.defineProperty(Ft,"__esModule",{value:!0});var Ls=Ft.Underline=$i=Ft.Highlight=Ft.Mark=Jr=Ft.Pane=void 0,Ro=function o(e,t,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(i===void 0){var n=Object.getPrototypeOf(e);return n===null?void 0:o(n,t,r)}else{if("value"in i)return i.value;var s=i.get;return s===void 0?void 0:s.call(r)}},si=function(){function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),Oo=ni,Cr=zs(Oo),Bo=Rr,Lo=zs(Bo);function zs(o){return o&&o.__esModule?o:{default:o}}function Fs(o,e){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:o}function Ps(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(o,e):o.__proto__=e)}function ai(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}Jr=Ft.Pane=function(){function o(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;ai(this,o),this.target=e,this.element=Cr.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),Lo.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return si(o,[{key:"addMark",value:function(t){var r=Cr.default.createElement("g");return this.element.appendChild(r),t.bind(r,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var r=this.marks.indexOf(t);if(r!==-1){var i=t.unbind();this.element.removeChild(i),this.marks.splice(r,1)}}},{key:"render",value:function(){Uo(this.element,Po(this.target,this.container));var t=!0,r=!1,i=void 0;try{for(var n=this.marks[Symbol.iterator](),s;!(t=(s=n.next()).done);t=!0){var a=s.value;a.render()}}catch(u){r=!0,i=u}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}}}]),o}();var zo=Ft.Mark=function(){function o(){ai(this,o),this.element=null}return si(o,[{key:"bind",value:function(t,r){this.element=t,this.container=r}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){this.element&&this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],r=this.element.firstChild;r;)t.push(r.getBoundingClientRect()),r=r.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(r){for(var i=0;i<t.length;i++){if(t[i]===r)return!0;var n=Mo(t[i],r);if(n)return!1}return!0})}}]),o}(),Fo=$i=Ft.Highlight=function(o){Ps(e,o);function e(t,r,i,n){ai(this,e);var s=Fs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.range=t,s.className=r,s.data=i||{},s.attributes=n||{},s}return si(e,[{key:"bind",value:function(r,i){Ro(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,i);for(var n in this.data)this.data.hasOwnProperty(n)&&(this.element.dataset[n]=this.data[n]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&this.element.setAttribute(n,this.attributes[n]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),n=this.element.getBoundingClientRect(),s=this.container.getBoundingClientRect(),a=0,u=i.length;a<u;a++){var l=i[a],f=Cr.default.createElement("rect");f.setAttribute("x",l.left-n.left+s.left),f.setAttribute("y",l.top-n.top+s.top),f.setAttribute("height",l.height),f.setAttribute("width",l.width),r.appendChild(f)}this.element.appendChild(r)}}]),e}(zo);Ls=Ft.Underline=function(o){Ps(e,o);function e(t,r,i,n){return ai(this,e),Fs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i,n))}return si(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),n=this.element.getBoundingClientRect(),s=this.container.getBoundingClientRect(),a=0,u=i.length;a<u;a++){var l=i[a],f=Cr.default.createElement("rect");f.setAttribute("x",l.left-n.left+s.left),f.setAttribute("y",l.top-n.top+s.top),f.setAttribute("height",l.height),f.setAttribute("width",l.width),f.setAttribute("fill","none");var c=Cr.default.createElement("line");c.setAttribute("x1",l.left-n.left+s.left),c.setAttribute("x2",l.left-n.left+s.left+l.width),c.setAttribute("y1",l.top-n.top+s.top+l.height-1),c.setAttribute("y2",l.top-n.top+s.top+l.height-1),c.setAttribute("stroke-width",1),c.setAttribute("stroke","black"),c.setAttribute("stroke-linecap","square"),r.appendChild(f),r.appendChild(c)}this.element.appendChild(r)}}]),e}(Fo);function Po(o,e){var t=e.getBoundingClientRect(),r=o.getBoundingClientRect();return{top:r.top-t.top,left:r.left-t.left,height:o.scrollHeight,width:o.scrollWidth}}function Uo(o,e){o.style.setProperty("top",e.top+"px","important"),o.style.setProperty("left",e.left+"px","important"),o.style.setProperty("height",e.height+"px","important"),o.style.setProperty("width",e.width+"px","important")}function Mo(o,e){return e.right<=o.right&&e.left>=o.left&&e.top>=o.top&&e.bottom<=o.bottom}class Us{constructor(e,t){this.settings=dt({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+ri(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Ge,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Pr(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(r){return this.load(r)}.bind(this)).then(function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(xe.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(xe.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((n,s)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),n()})}.bind(this),function(r){return this.emit(xe.VIEWS.LOAD_ERROR,r),new Promise((i,n)=>{n(r)})}.bind(this)).then(function(){this.emit(xe.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,i=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,t,r){var i=Vr(this.element),n;this.iframe?n=Vr(this.iframe):n={width:0,height:0},e=="width"&&tt(t)&&(this.lockedWidth=t-i.width-n.width),e=="height"&&tt(r)&&(this.lockedHeight=r-i.height-n.height),e==="both"&&tt(t)&&tt(r)&&(this.lockedWidth=t-i.width-n.width,this.lockedHeight=r-i.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;tt(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),tt(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let i=this.prevBounds?e-this.prevBounds.width:e,n=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:i,heightDelta:n},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let s;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(s=this.marks[a],this.placeMark(s.element,s.range))}),this.onResize(this,r),this.emit(xe.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=Pr(this.element)}load(e){var t=new Ve,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=function(n){this.onLoad(n,t)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=Yr(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Yi(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(xe.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(xe.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new Ve;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(xe.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(xe.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(xe.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Pr(this.element)),this.elementBounds}highlight(e,t={},r,i="epubjs-hl",n={}){if(!this.contents)return;const s=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),u=()=>{this.emit(xe.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new Jr(this.iframe,this.element));let l=new $i(a,i,t,s),f=this.pane.addMark(l);return this.highlights[e]={mark:f,element:f.element,listeners:[u,r]},f.element.setAttribute("ref",i),f.element.addEventListener("click",u),f.element.addEventListener("touchstart",u),r&&(f.element.addEventListener("click",r),f.element.addEventListener("touchstart",r)),f}underline(e,t={},r,i="epubjs-ul",n={}){if(!this.contents)return;const s=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),u=()=>{this.emit(xe.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new Jr(this.iframe,this.element));let l=new Ls(a,i,t,s),f=this.pane.addMark(l);return this.underlines[e]={mark:f,element:f.element,listeners:[u,r]},f.element.setAttribute("ref",i),f.element.addEventListener("click",u),f.element.addEventListener("touchstart",u),r&&(f.element.addEventListener("click",r),f.element.addEventListener("touchstart",r)),f}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let n=i.commonAncestorContainer,s=n.nodeType===1?n:n.parentNode,a=l=>{this.emit(xe.VIEWS.MARK_CLICKED,e,t)};i.collapsed&&n.nodeType===1?(i=new Range,i.selectNodeContents(n)):i.collapsed&&(i=new Range,i.selectNodeContents(s));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,t&&Object.keys(t).forEach(l=>{u.dataset[l]=t[l]}),r&&(u.addEventListener("click",r),u.addEventListener("touchstart",r)),u.addEventListener("click",a),u.addEventListener("touchstart",a),this.placeMark(u,i),this.element.appendChild(u),this.marks[e]={element:u,range:i,listeners:[a,r]},s}placeMark(e,t){let r,i,n;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=t.getBoundingClientRect();r=a.top,i=a.right}else{let a=t.getClientRects(),u;for(var s=0;s!=a.length;s++)u=a[s],(!n||u.left<n)&&(n=u.left,i=Math.ceil(n/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=u.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&ws(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}zt(Us.prototype);function jo(){var o="reverse",e=Wo();return document.body.appendChild(e),e.scrollLeft>0?o="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(o="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(o="negative")),document.body.removeChild(e),o}function Wo(){var o=document.createElement("div");o.dir="rtl",o.style.position="fixed",o.style.width="1px",o.style.height="1px",o.style.top="0px",o.style.left="0px",o.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),o.appendChild(e),o}function qo(o){var e=typeof o;return o!=null&&(e=="object"||e=="function")}var Xi=qo,Ho=typeof mt=="object"&&mt&&mt.Object===Object&&mt,Zo=Ho,Vo=Zo,Go=typeof self=="object"&&self&&self.Object===Object&&self,Yo=Vo||Go||Function("return this")(),Ms=Yo,$o=Ms,Xo=function(){return $o.Date.now()},Ko=Xo,Jo=/\s/;function Qo(o){for(var e=o.length;e--&&Jo.test(o.charAt(e)););return e}var eu=Qo,tu=eu,ru=/^\s+/;function iu(o){return o&&o.slice(0,tu(o)+1).replace(ru,"")}var nu=iu,su=Ms,au=su.Symbol,js=au,Sn=js,Ws=Object.prototype,ou=Ws.hasOwnProperty,uu=Ws.toString,_r=Sn?Sn.toStringTag:void 0;function lu(o){var e=ou.call(o,_r),t=o[_r];try{o[_r]=void 0;var r=!0}catch{}var i=uu.call(o);return r&&(e?o[_r]=t:delete o[_r]),i}var hu=lu,fu=Object.prototype,cu=fu.toString;function du(o){return cu.call(o)}var pu=du,Tn=js,mu=hu,gu=pu,vu="[object Null]",yu="[object Undefined]",Nn=Tn?Tn.toStringTag:void 0;function _u(o){return o==null?o===void 0?yu:vu:Nn&&Nn in Object(o)?mu(o):gu(o)}var bu=_u;function wu(o){return o!=null&&typeof o=="object"}var Eu=wu,xu=bu,Au=Eu,Du="[object Symbol]";function Cu(o){return typeof o=="symbol"||Au(o)&&xu(o)==Du}var ku=Cu,Su=nu,In=Xi,Tu=ku,Rn=0/0,Nu=/^[-+]0x[0-9a-f]+$/i,Iu=/^0b[01]+$/i,Ru=/^0o[0-7]+$/i,Ou=parseInt;function Bu(o){if(typeof o=="number")return o;if(Tu(o))return Rn;if(In(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=In(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=Su(o);var t=Iu.test(o);return t||Ru.test(o)?Ou(o.slice(2),t?2:8):Nu.test(o)?Rn:+o}var Lu=Bu,zu=Xi,wi=Ko,On=Lu,Fu="Expected a function",Pu=Math.max,Uu=Math.min;function Mu(o,e,t){var r,i,n,s,a,u,l=0,f=!1,c=!1,v=!0;if(typeof o!="function")throw new TypeError(Fu);e=On(e)||0,zu(t)&&(f=!!t.leading,c="maxWait"in t,n=c?Pu(On(t.maxWait)||0,e):n,v="trailing"in t?!!t.trailing:v);function p(D){var S=r,R=i;return r=i=void 0,l=D,s=o.apply(R,S),s}function w(D){return l=D,a=setTimeout(d,e),f?p(D):s}function y(D){var S=D-u,R=D-l,z=e-S;return c?Uu(z,n-R):z}function h(D){var S=D-u,R=D-l;return u===void 0||S>=e||S<0||c&&R>=n}function d(){var D=wi();if(h(D))return g(D);a=setTimeout(d,y(D))}function g(D){return a=void 0,v&&r?p(D):(r=i=void 0,s)}function E(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function C(){return a===void 0?s:g(wi())}function _(){var D=wi(),S=h(D);if(r=arguments,i=this,u=D,S){if(a===void 0)return w(u);if(c)return clearTimeout(a),a=setTimeout(d,e),p(u)}return a===void 0&&(a=setTimeout(d,e)),s}return _.cancel=E,_.flush=C,_}var qs=Mu;const ju=fr(qs);var Wu=qs,qu=Xi,Hu="Expected a function";function Zu(o,e,t){var r=!0,i=!0;if(typeof o!="function")throw new TypeError(Hu);return qu(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Wu(o,e,{leading:r,maxWait:e,trailing:i})}var Vu=Zu;const Gu=fr(Vu);class Yu{constructor(e){this.settings=e||{},this.id="epubjs-container-"+ri(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,i=e.overflow||!1,n=e.axis||"vertical",s=e.direction;dt(this.settings,e),e.height&&tt(e.height)&&(t=e.height+"px"),e.width&&tt(e.width)&&(r=e.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",n==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),r&&(a.style.width=r),t&&(a.style.height=t),i&&(i==="scroll"&&n==="vertical"?(a.style["overflow-y"]=i,a.style["overflow-x"]="hidden"):i==="scroll"&&n==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=i):a.style.overflow=i),s&&(a.dir=s,a.style.direction=s),s&&this.settings.fullsize&&(document.body.style.direction=s),a}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(gs(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!tt(this.settings.width)||!tt(this.settings.height))&&(this.resizeFunc=Gu(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let i=e||this.settings.width,n=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):tt(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):tt(t)?this.container.style.height=t+"px":this.container.style.height=t,tt(e)||(e=this.container.clientWidth),tt(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let s=Gr(),a=window.getComputedStyle(document.body),u={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return i||(e=s.width-u.left-u.right),(this.settings.fullsize&&!n||!n)&&(t=s.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?Gr():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(n){for(var s in n)n.hasOwnProperty(s)&&(i+=s+":"+n[s]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class $u{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,i=0;i<r;i++)if(t=this._views[i],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,i=0;i<r;i++)t=this._views[i],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class Qr{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new Gi(this),this.settings=dt(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),dt(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=jo(),this.stage=new Yu({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new $u(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(t){this.destroy()}.bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(xe.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let i=this.stage.size(e,t);if(this.winBounds=Gr(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(xe.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,dt(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(i=t.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,t){var r=new Ve,i=r.promise;(t===e.href||tt(t))&&(t=void 0);var n=this.views.find(e);if(n&&e&&this.layout.name!=="pre-paginated"){let a=n.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let u=n.width();this.scrollTo(a.left+u,a.top,!0)}if(t){let u=n.locationOf(t),l=n.width();this.moveTo(u,l)}return r.resolve(),i}this.clear();let s=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(s=!0),this.add(e,s).then(function(a){if(t){let u=a.locationOf(t),l=a.width();this.moveTo(u,l)}}.bind(this),a=>{r.reject(a)}).then(function(){return this.handleNextPrePaginated(s,e,this.add)}.bind(this)).then(function(){this.views.show(),r.resolve()}.bind(this)),i}afterDisplayed(e){this.emit(xe.MANAGERS.ADDED,e)}afterResized(e){this.emit(xe.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,i,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(xe.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(xe.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(xe.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(xe.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(xe.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(xe.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(xe.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then(function(){return this.handleNextPrePaginated(i,e,this.append)}.bind(this),n=>n).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then(function(){var n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(n=e.prev(),n))return this.prepend(n)}.bind(this),n=>n).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,i=t.width<window.innerWidth?t.width:window.innerWidth,n=this.settings.axis==="vertical";this.settings.direction;let s=0,a=0;return this.settings.fullsize&&(s=n?window.scrollY:window.scrollX),e.map(l=>{let{index:f,href:c}=l.section,v=l.position(),p=l.width(),w=l.height(),y,h,d,g;n?(y=s+t.top-v.top+a,h=y+r-a,g=this.layout.count(w,r).pages,d=r):(y=s+t.left-v.left+a,h=y+i-a,g=this.layout.count(p,i).pages,d=i);let E=Math.ceil(y/d),C=[],_=Math.ceil(h/d);if(this.settings.direction==="rtl"&&!n){let R=E;E=g-_,_=g-R}C=[];for(var D=E;D<=_;D++){let R=D+1;C.push(R)}let S=this.mapping.page(l.contents,l.section.cfiBase,y,h);return{index:f,href:c,pages:C,totalPages:g,mapping:S}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(s=>{let{index:a,href:u}=s.section,l,f=s.position(),c=s.width(),v,p,w;this.settings.direction==="rtl"?(l=t.right-r,w=Math.min(Math.abs(l-f.left),this.layout.width)-i,p=f.width-(f.right-l)-i,v=p-w):(l=t.left+r,w=Math.min(f.right-l,this.layout.width)-i,v=l-f.left+i,p=v+w),i+=w;let y=this.mapping.page(s.contents,s.section.cfiBase,v,p),h=this.layout.count(c).pages,d=Math.floor(v/this.layout.pageWidth),g=[],E=Math.floor(p/this.layout.pageWidth);if(d<0&&(d=0,E=E+1),this.settings.direction==="rtl"){let _=d;d=h-E,E=h-_}for(var C=d+1;C<=E;C++){let _=C;g.push(_)}return{index:a,href:u,pages:g,totalPages:h,mapping:y}})}isVisible(e,t,r,i){var n=e.position(),s=i||this.bounds();return this.settings.axis==="horizontal"&&n.right>s.left-t&&n.left<s.right+r?!0:this.settings.axis==="vertical"&&n.bottom>s.top-t&&n.top<s.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,i=[],n,s,a=0;a<r;a++)s=t[a],n=this.isVisible(s,0,0,e),n===!0&&i.push(s);return i}scrollBy(e,t,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,t*i):(e&&(this.container.scrollLeft+=e*i),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(xe.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(xe.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Kr(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Kr(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}zt(Qr.prototype);const Xu=Math.PI/2,Ku={easeOutSine:function(o){return Math.sin(o*Xu)},easeInOutSine:function(o){return-.5*(Math.cos(Math.PI*o)-1)},easeInOutQuint:function(o){return(o/=.5)<1?.5*Math.pow(o,5):.5*(Math.pow(o-2,5)+2)},easeInCubic:function(o){return Math.pow(o,3)}};class Ii{constructor(e,t){this.settings=dt({duration:80,minVelocity:.2,minDistance:10,easing:Ku.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(xe.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(xe.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,i=>this.triggerViewEvent(i,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),i=this.endTime-this.startTime,n=t/i,s=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(n>s)return-1;if(n<-s)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(t/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const t=new Ve,r=this.scrollLeft,i=this.now(),n=this.settings.duration,s=this.settings.easing;this.snapping=!0;function a(){const u=this.now(),l=Math.min(1,(u-i)/n);if(s(l),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}l<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(r+(e-r)*l,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return a.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}zt(Ii.prototype);class Ju extends Qr{constructor(e){super(e),this.name="continuous",this.settings=dt(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),dt(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return Qr.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}fill(e){var t=e||new Ve;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(xe.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(xe.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(xe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(xe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(xe.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(xe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(xe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(xe.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(xe.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(xe.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),i=r.length,n=typeof e<"u"?e:this.settings.offset||0,s,a,u=new Ve,l=[],f=0;f<i;f++)if(a=r[f],s=this.isVisible(a,n,n,t),s===!0)if(a.displayed)a.show();else{let c=a.display(this.request).then(function(v){v.show()},v=>{a.hide()});l.push(c)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return l.length?Promise.all(l).catch(c=>{u.reject(c)}):(u.resolve(),u.promise)}check(e,t){var r=new Ve,i=[],n=this.settings.axis==="horizontal",s=this.settings.offset||0;e&&n&&(s=e),t&&!n&&(s=t);var a=this._bounds;let u=n?this.scrollLeft:this.scrollTop,l=n?Math.floor(a.width):a.height,f=n?this.container.scrollWidth:this.container.scrollHeight,c=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",v=this.settings.rtlScrollType,p=this.settings.direction==="rtl";this.settings.fullsize?(n&&p&&v==="negative"||!n&&p&&v==="default")&&(u=u*-1):(p&&v==="default"&&c==="horizontal"&&(u=f-l-u),p&&v==="negative"&&c==="horizontal"&&(u=u*-1));let w=()=>{let E=this.views.first(),C=E&&E.section.prev();C&&i.push(this.prepend(C))},y=()=>{let E=this.views.last(),C=E&&E.section.next();C&&i.push(this.append(C))},h=u+l+s,d=u-s;h>=f&&y(),d<0&&w();let g=i.map(E=>E.display(this.request));return i.length?Promise.all(g).then(()=>this.check()).then(()=>this.update(s),E=>E):(this.q.enqueue(function(){this.update()}.bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new Ve,t=this.views.displayed(),r=t[0],i=t[t.length-1],n=this.views.indexOf(r),s=this.views.indexOf(i),a=this.views.slice(0,n),u=this.views.slice(s+1),l=0;l<a.length-1;l++)this.erase(a[l],a);for(var f=1;f<u.length;f++)this.erase(u[f]);return e.resolve(),e.promise}erase(e,t){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var n=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-n.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(n.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(n.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(t){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Ii(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Hi;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=ju(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(xe.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(xe.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Ii(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Ki{constructor(e,t){this.settings=dt(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),dt(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Nt(this),this.hooks.serialize=new Nt(this),this.hooks.content=new Nt(this),this.hooks.unloaded=new Nt(this),this.hooks.layout=new Nt(this),this.hooks.render=new Nt(this),this.hooks.show=new Nt(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new ko(this),this.annotations=new No(this),this.epubcfi=new Ge,this.q=new Gi(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Ve,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=Qr:typeof e=="string"&&e==="continuous"?t=Ju:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=Us:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(xe.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(xe.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(xe.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(xe.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(xe.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(xe.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(xe.RENDITION.ATTACHED)}.bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var t=new Ve,r=t.promise,i;return this.displaying=t,this.book.locations.length()&&vs(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{t.resolve(i),this.displaying=void 0,this.emit(xe.RENDITION.DISPLAYED,i),this.reportLocation()},n=>{this.emit(xe.RENDITION.DISPLAY_ERROR,n)}),r):(t.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(xe.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(xe.RENDITION.RENDERED,e.section,e)}):this.emit(xe.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(xe.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(xe.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(xe.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",n=this.settings.orientation||e.orientation||"auto",s=this.settings.flow||e.flow||"auto",a=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,l=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:i,orientation:n,flow:s,viewport:a,minSpreadWidth:u,direction:l},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Ts(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(xe.LAYOUT.UPDATED,(t,r)=>{this.emit(xe.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then(function(i){let n=this.located(i);!n||!n.start||!n.end||(this.location=n,this.emit(xe.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(xe.RENDITION.RELOCATED,this.location))}.bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(xe.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(xe.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then(function(t){return this.located(t)}.bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],i={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},n=this.book.locations.locationFromCfi(t.mapping.start),s=this.book.locations.locationFromCfi(r.mapping.end);n!=null&&(i.start.location=n,i.start.percentage=this.book.locations.percentageFromLocation(n)),s!=null&&(i.end.location=s,i.end.percentage=this.book.locations.percentageFromLocation(s));let a=this.book.pageList.pageFromCfi(t.mapping.start),u=this.book.pageList.pageFromCfi(r.mapping.end);return a!=-1&&(i.start.page=a),u!=-1&&(i.end.page=u),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),t.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Mr.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(xe.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(xe.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(xe.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new Ge(e),i=this.manager.visible().filter(function(n){if(r.spinePos===n.index)return!0});if(i.length)return i[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(n){n()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(n,s){setTimeout(function(){n()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(xe.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}zt(Ki.prototype);function Dt(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hs={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(o,e){(function(t){o.exports=t()})(function(){return function t(r,i,n){function s(l,f){if(!i[l]){if(!r[l]){var c=typeof Dt=="function"&&Dt;if(!f&&c)return c(l,!0);if(a)return a(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var p=i[l]={exports:{}};r[l][0].call(p.exports,function(w){var y=r[l][1][w];return s(y||w)},p,p.exports,t,r,i,n)}return i[l].exports}for(var a=typeof Dt=="function"&&Dt,u=0;u<n.length;u++)s(n[u]);return s}({1:[function(t,r,i){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l=[],f,c,v,p,w,y,h,d=0,g=u.length,E=g,C=n.getTypeOf(u)!=="string";d<u.length;)E=g-d,C?(f=u[d++],c=d<g?u[d++]:0,v=d<g?u[d++]:0):(f=u.charCodeAt(d++),c=d<g?u.charCodeAt(d++):0,v=d<g?u.charCodeAt(d++):0),p=f>>2,w=(f&3)<<4|c>>4,y=E>1?(c&15)<<2|v>>6:64,h=E>2?v&63:64,l.push(a.charAt(p)+a.charAt(w)+a.charAt(y)+a.charAt(h));return l.join("")},i.decode=function(u){var l,f,c,v,p,w,y,h=0,d=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");u=u.replace(/[^A-Za-z0-9+/=]/g,"");var E=u.length*3/4;if(u.charAt(u.length-1)===a.charAt(64)&&E--,u.charAt(u.length-2)===a.charAt(64)&&E--,E%1!==0)throw new Error("Invalid base64 input, bad content length.");var C;for(s.uint8array?C=new Uint8Array(E|0):C=new Array(E|0);h<u.length;)v=a.indexOf(u.charAt(h++)),p=a.indexOf(u.charAt(h++)),w=a.indexOf(u.charAt(h++)),y=a.indexOf(u.charAt(h++)),l=v<<2|p>>4,f=(p&15)<<4|w>>2,c=(w&3)<<6|y,C[d++]=l,w!==64&&(C[d++]=f),y!==64&&(C[d++]=c);return C}},{"./support":30,"./utils":32}],2:[function(t,r,i){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(f,c,v,p,w){this.compressedSize=f,this.uncompressedSize=c,this.crc32=v,this.compression=p,this.compressedContent=w}l.prototype={getContentWorker:function(){var f=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(f,c,v){return f.pipe(new a).pipe(new u("uncompressedSize")).pipe(c.compressWorker(v)).pipe(new u("compressedSize")).withStreamInfo("compression",c)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var n=t("./utils");function s(){for(var f,c=[],v=0;v<256;v++){f=v;for(var p=0;p<8;p++)f=f&1?3988292384^f>>>1:f>>>1;c[v]=f}return c}var a=s();function u(f,c,v,p){var w=a,y=p+v;f=f^-1;for(var h=p;h<y;h++)f=f>>>8^w[(f^c[h])&255];return f^-1}function l(f,c,v,p){var w=a,y=p+v;f=f^-1;for(var h=p;h<y;h++)f=f>>>8^w[(f^c.charCodeAt(h))&255];return f^-1}r.exports=function(c,v){if(typeof c>"u"||!c.length)return 0;var p=n.getTypeOf(c)!=="string";return p?u(v|0,c,c.length,0):l(v|0,c,c.length,0)}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var n=null;typeof Promise<"u"?n=Promise:n=t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),u=t("./stream/GenericWorker"),l=n?"uint8array":"array";i.magic="\b\0";function f(c,v){u.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=v,this.meta={}}a.inherits(f,u),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(l,c.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(v){c.push({data:v,meta:c.meta})}},i.compressWorker=function(c){return new f("Deflate",c)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),u=t("../crc32"),l=t("../signature"),f=function(d,g){var E="",C;for(C=0;C<g;C++)E+=String.fromCharCode(d&255),d=d>>>8;return E},c=function(d,g){var E=d;return d||(E=g?16893:33204),(E&65535)<<16},v=function(d){return(d||0)&63},p=function(d,g,E,C,_,D){var S=d.file,R=d.compression,z=D!==a.utf8encode,F=n.transformTo("string",D(S.name)),X=n.transformTo("string",a.utf8encode(S.name)),N=S.comment,q=n.transformTo("string",D(N)),x=n.transformTo("string",a.utf8encode(N)),$=X.length!==S.name.length,ce=x.length!==N.length,K,fe,se="",Ae="",Y="",M=S.dir,Ee=S.date,de={crc32:0,compressedSize:0,uncompressedSize:0};(!g||E)&&(de.crc32=d.crc32,de.compressedSize=d.compressedSize,de.uncompressedSize=d.uncompressedSize);var me=0;g&&(me|=8),!z&&($||ce)&&(me|=2048);var Fe=0,je=0;M&&(Fe|=16),_==="UNIX"?(je=798,Fe|=c(S.unixPermissions,M)):(je=20,Fe|=v(S.dosPermissions)),K=Ee.getUTCHours(),K=K<<6,K=K|Ee.getUTCMinutes(),K=K<<5,K=K|Ee.getUTCSeconds()/2,fe=Ee.getUTCFullYear()-1980,fe=fe<<4,fe=fe|Ee.getUTCMonth()+1,fe=fe<<5,fe=fe|Ee.getUTCDate(),$&&(Ae=f(1,1)+f(u(F),4)+X,se+="up"+f(Ae.length,2)+Ae),ce&&(Y=f(1,1)+f(u(q),4)+x,se+="uc"+f(Y.length,2)+Y);var Ce="";Ce+=`
\0`,Ce+=f(me,2),Ce+=R.magic,Ce+=f(K,2),Ce+=f(fe,2),Ce+=f(de.crc32,4),Ce+=f(de.compressedSize,4),Ce+=f(de.uncompressedSize,4),Ce+=f(F.length,2),Ce+=f(se.length,2);var Be=l.LOCAL_FILE_HEADER+Ce+F+se,Ue=l.CENTRAL_FILE_HEADER+f(je,2)+Ce+f(q.length,2)+"\0\0\0\0"+f(Fe,4)+f(C,4)+F+se+q;return{fileRecord:Be,dirRecord:Ue}},w=function(d,g,E,C,_){var D="",S=n.transformTo("string",_(C));return D=l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(d,2)+f(d,2)+f(g,4)+f(E,4)+f(S.length,2)+S,D},y=function(d){var g="";return g=l.DATA_DESCRIPTOR+f(d.crc32,4)+f(d.compressedSize,4)+f(d.uncompressedSize,4),g};function h(d,g,E,C){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=E,this.encodeFileName=C,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(h,s),h.prototype.push=function(d){var g=d.meta.percent||0,E=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:E?(g+100*(E-C-1))/E:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var g=this.streamFiles&&!d.file.dir;if(g){var E=p(d,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:E.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var g=this.streamFiles&&!d.file.dir,E=p(d,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(E.dirRecord),g)this.push({data:y(d),meta:{percent:100}});else for(this.push({data:E.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var E=this.bytesWritten-d,C=w(this.dirRecords.length,E,d,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var g=this;return d.on("data",function(E){g.processChunk(E)}),d.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),d.on("error",function(E){g.error(E)}),this},h.prototype.resume=function(){if(!s.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},h.prototype.error=function(d){var g=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var E=0;E<g.length;E++)try{g[E].error(d)}catch{}return!0},h.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,g=0;g<d.length;g++)d[g].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var n=t("../compressions"),s=t("./ZipFileWorker"),a=function(u,l){var f=u||l,c=n[f];if(!c)throw new Error(f+" is not a valid compression method !");return c};i.generateWorker=function(u,l,f){var c=new s(l.streamFiles,f,l.platform,l.encodeFileName),v=0;try{u.forEach(function(p,w){v++;var y=a(w.options.compression,l.compression),h=w.options.compressionOptions||l.compressionOptions||{},d=w.dir,g=w.date;w._compressWorker(y,h).withStreamInfo("file",{name:p,dir:d,date:g,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(c)}),c.entriesCount=v}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var n=t("./utils"),s=t("./external"),a=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function c(v){return new s.Promise(function(p,w){var y=v.decompressed.getContentWorker().pipe(new l);y.on("error",function(h){w(h)}).on("end",function(){y.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(v,p){var w=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),f.isNode&&f.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",v,!0,p.optimizedBinaryString,p.base64).then(function(y){var h=new u(p);return h.load(y),h}).then(function(h){var d=[s.Promise.resolve(h)],g=h.files;if(p.checkCRC32)for(var E=0;E<g.length;E++)d.push(c(g[E]));return s.Promise.all(d)}).then(function(h){for(var d=h.shift(),g=d.files,E=0;E<g.length;E++){var C=g[E],_=C.fileNameStr,D=n.resolve(C.fileNameStr);w.file(D,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:p.createFolders}),C.dir||(w.file(D).unsafeOriginalName=_)}return d.zipComment.length&&(w.comment=d.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker");function a(u,l){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}n.inherits(a,s),a.prototype._bindStream=function(u){var l=this;this._stream=u,u.pause(),u.on("data",function(f){l.push({data:f,meta:{percent:0}})}).on("error",function(f){l.isPaused?this.generatedError=f:l.error(f)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},a.prototype.pause=function(){return s.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return s.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var n=t("readable-stream").Readable,s=t("../utils");s.inherits(a,n);function a(u,l,f){n.call(this,l),this._helper=u;var c=this;u.on("data",function(v,p){c.push(v)||c._helper.pause(),f&&f(p)}).on("error",function(v){c.emit("error",v)}).on("end",function(){c.push(null)})}a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,r,i){var n=t("./utf8"),s=t("./utils"),a=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),l=t("./defaults"),f=t("./compressedObject"),c=t("./zipObject"),v=t("./generate"),p=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),y=function(_,D,S){var R=s.getTypeOf(D),z,F=s.extend(S||{},l);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&F.unixPermissions&16384&&(F.dir=!0),F.dosPermissions&&F.dosPermissions&16&&(F.dir=!0),F.dir&&(_=d(_)),F.createFolders&&(z=h(_))&&g.call(this,z,!0);var X=R==="string"&&F.binary===!1&&F.base64===!1;(!S||typeof S.binary>"u")&&(F.binary=!X);var N=D instanceof f&&D.uncompressedSize===0;(N||F.dir||!D||D.length===0)&&(F.base64=!1,F.binary=!0,D="",F.compression="STORE",R="string");var q=null;D instanceof f||D instanceof a?q=D:p.isNode&&p.isStream(D)?q=new w(_,D):q=s.prepareContent(_,D,F.binary,F.optimizedBinaryString,F.base64);var x=new c(_,q,F);this.files[_]=x},h=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var D=_.lastIndexOf("/");return D>0?_.substring(0,D):""},d=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},g=function(_,D){return D=typeof D<"u"?D:l.createFolders,_=d(_),this.files[_]||y.call(this,_,null,{dir:!0,createFolders:D}),this.files[_]};function E(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var D,S,R;for(D in this.files)R=this.files[D],S=D.slice(this.root.length,D.length),S&&D.slice(0,this.root.length)===this.root&&_(S,R)},filter:function(_){var D=[];return this.forEach(function(S,R){_(S,R)&&D.push(R)}),D},file:function(_,D,S){if(arguments.length===1)if(E(_)){var R=_;return this.filter(function(F,X){return!X.dir&&R.test(F)})}else{var z=this.files[this.root+_];return z&&!z.dir?z:null}else _=this.root+_,y.call(this,_,D,S);return this},folder:function(_){if(!_)return this;if(E(_))return this.filter(function(z,F){return F.dir&&_.test(z)});var D=this.root+_,S=g.call(this,D),R=this.clone();return R.root=S.name,R},remove:function(_){_=this.root+_;var D=this.files[_];if(D||(_.slice(-1)!=="/"&&(_+="/"),D=this.files[_]),D&&!D.dir)delete this.files[_];else for(var S=this.filter(function(z,F){return F.name.slice(0,_.length)===_}),R=0;R<S.length;R++)delete this.files[S[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var D,S={};try{if(S=s.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),S.type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");s.checkSupport(S.type),(S.platform==="darwin"||S.platform==="freebsd"||S.platform==="linux"||S.platform==="sunos")&&(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var R=S.comment||this.comment||"";D=v.generateWorker(this,S,R)}catch(z){D=new a("error"),D.error(z)}return new u(D,S.type||"string",S.mimeType)},generateAsync:function(_,D){return this.generateInternalStream(_).accumulate(D)},generateNodeStream:function(_,D){return _=_||{},_.type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(D)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var n=t("./DataReader"),s=t("../utils");function a(u){n.call(this,u);for(var l=0;l<this.data.length;l++)u[l]=u[l]&255}s.inherits(a,n),a.prototype.byteAt=function(u){return this.data[this.zero+u]},a.prototype.lastIndexOfSignature=function(u){for(var l=u.charCodeAt(0),f=u.charCodeAt(1),c=u.charCodeAt(2),v=u.charCodeAt(3),p=this.length-4;p>=0;--p)if(this.data[p]===l&&this.data[p+1]===f&&this.data[p+2]===c&&this.data[p+3]===v)return p-this.zero;return-1},a.prototype.readAndCheckSignature=function(u){var l=u.charCodeAt(0),f=u.charCodeAt(1),c=u.charCodeAt(2),v=u.charCodeAt(3),p=this.readData(4);return l===p[0]&&f===p[1]&&c===p[2]&&v===p[3]},a.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u=0,l;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var n=t("./Uint8ArrayReader"),s=t("../utils");function a(u){n.call(this,u)}s.inherits(a,n),a.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var n=t("./DataReader"),s=t("../utils");function a(u){n.call(this,u)}s.inherits(a,n),a.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},a.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},a.prototype.readAndCheckSignature=function(u){var l=this.readData(4);return u===l},a.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var n=t("./ArrayReader"),s=t("../utils");function a(u){n.call(this,u)}s.inherits(a,n),a.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");r.exports=function(c){var v=n.getTypeOf(c);return n.checkSupport(v),v==="string"&&!s.uint8array?new u(c):v==="nodebuffer"?new l(c):s.uint8array?new f(n.transformTo("uint8array",c)):new a(n.transformTo("array",c))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var n=t("./GenericWorker"),s=t("../utils");function a(u){n.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(a,n),a.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var n=t("./GenericWorker"),s=t("../crc32"),a=t("../utils");function u(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(u,n),u.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}n.inherits(a,s),a.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker"),a=16*1024;function u(l){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){f.dataIsReady=!0,f.data=c,f.max=c&&c.length||0,f.type=n.getTypeOf(c),f.isPaused||f._tickAndRepeat()},function(c){f.error(c)})}n.inherits(u,s),u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return s.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=a,f=null,c=Math.min(this.max,this.index+l);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,c);break;case"uint8array":f=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":f=this.data.slice(this.index,c);break}return this.index=c,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return this.isFinished?!1:(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(u){a.processChunk(u)}),s.on("end",function(){a.end()}),s.on("error",function(u){a.error(u)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var s=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=n},{}],29:[function(t,r,i){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),u=t("../base64"),l=t("../support"),f=t("../external"),c=null;if(l.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(h,d,g){switch(h){case"blob":return n.newBlob(n.transformTo("arraybuffer",d),g);case"base64":return u.encode(d);default:return n.transformTo(h,d)}}function p(h,d){var g,E=0,C=null,_=0;for(g=0;g<d.length;g++)_+=d[g].length;switch(h){case"string":return d.join("");case"array":return Array.prototype.concat.apply([],d);case"uint8array":for(C=new Uint8Array(_),g=0;g<d.length;g++)C.set(d[g],E),E+=d[g].length;return C;case"nodebuffer":return Buffer.concat(d);default:throw new Error("concat : unsupported type '"+h+"'")}}function w(h,d){return new f.Promise(function(g,E){var C=[],_=h._internalType,D=h._outputType,S=h._mimeType;h.on("data",function(R,z){C.push(R),d&&d(z)}).on("error",function(R){C=[],E(R)}).on("end",function(){try{var R=v(D,p(_,C),S);g(R)}catch(z){E(z)}C=[]}).resume()})}function y(h,d,g){var E=d;switch(d){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string";break}try{this._internalType=E,this._outputType=d,this._mimeType=g,n.checkSupport(E),this._worker=h.pipe(new s(E)),h.lock()}catch(C){this._worker=new a("error"),this._worker.error(C)}}y.prototype={accumulate:function(h){return w(this,h)},on:function(h,d){var g=this;return h==="data"?this._worker.on(h,function(E){d.call(g,E.data,E.meta)}):this._worker.on(h,function(){n.delay(d,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},h)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new s;a.append(n),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),f=0;f<256;f++)l[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;l[254]=l[254]=1;var c=function(h){var d,g,E,C,_,D=h.length,S=0;for(C=0;C<D;C++)g=h.charCodeAt(C),(g&64512)===55296&&C+1<D&&(E=h.charCodeAt(C+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),C++)),S+=g<128?1:g<2048?2:g<65536?3:4;for(s.uint8array?d=new Uint8Array(S):d=new Array(S),_=0,C=0;_<S;C++)g=h.charCodeAt(C),(g&64512)===55296&&C+1<D&&(E=h.charCodeAt(C+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),C++)),g<128?d[_++]=g:g<2048?(d[_++]=192|g>>>6,d[_++]=128|g&63):g<65536?(d[_++]=224|g>>>12,d[_++]=128|g>>>6&63,d[_++]=128|g&63):(d[_++]=240|g>>>18,d[_++]=128|g>>>12&63,d[_++]=128|g>>>6&63,d[_++]=128|g&63);return d},v=function(h,d){var g;for(d=d||h.length,d>h.length&&(d=h.length),g=d-1;g>=0&&(h[g]&192)===128;)g--;return g<0||g===0?d:g+l[h[g]]>d?g:d},p=function(h){var d,g,E,C,_=h.length,D=new Array(_*2);for(g=0,d=0;d<_;){if(E=h[d++],E<128){D[g++]=E;continue}if(C=l[E],C>4){D[g++]=65533,d+=C-1;continue}for(E&=C===2?31:C===3?15:7;C>1&&d<_;)E=E<<6|h[d++]&63,C--;if(C>1){D[g++]=65533;continue}E<65536?D[g++]=E:(E-=65536,D[g++]=55296|E>>10&1023,D[g++]=56320|E&1023)}return D.length!==g&&(D.subarray?D=D.subarray(0,g):D.length=g),n.applyFromCharCode(D)};i.utf8encode=function(d){return s.nodebuffer?a.newBufferFrom(d,"utf-8"):c(d)},i.utf8decode=function(d){return s.nodebuffer?n.transformTo("nodebuffer",d).toString("utf-8"):(d=n.transformTo(s.uint8array?"uint8array":"array",d),p(d))};function w(){u.call(this,"utf-8 decode"),this.leftOver=null}n.inherits(w,u),w.prototype.processChunk=function(h){var d=n.transformTo(s.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=d;d=new Uint8Array(g.length+this.leftOver.length),d.set(this.leftOver,0),d.set(g,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var E=v(d),C=d;E!==d.length&&(s.uint8array?(C=d.subarray(0,E),this.leftOver=d.subarray(E,d.length)):(C=d.slice(0,E),this.leftOver=d.slice(E,d.length))),this.push({data:i.utf8decode(C),meta:h.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=w;function y(){u.call(this,"utf-8 encode")}n.inherits(y,u),y.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),u=t("./external");t("setimmediate");function l(h){var d=null;return n.uint8array?d=new Uint8Array(h.length):d=new Array(h.length),c(h,d)}i.newBlob=function(h,d){i.checkSupport("blob");try{return new Blob([h],{type:d})}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,E=new g;return E.append(h),E.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};function f(h){return h}function c(h,d){for(var g=0;g<h.length;++g)d[g]=h.charCodeAt(g)&255;return d}var v={stringifyByChunk:function(h,d,g){var E=[],C=0,_=h.length;if(_<=g)return String.fromCharCode.apply(null,h);for(;C<_;)d==="array"||d==="nodebuffer"?E.push(String.fromCharCode.apply(null,h.slice(C,Math.min(C+g,_)))):E.push(String.fromCharCode.apply(null,h.subarray(C,Math.min(C+g,_)))),C+=g;return E.join("")},stringifyByChar:function(h){for(var d="",g=0;g<h.length;g++)d+=String.fromCharCode(h[g]);return d},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(h){var d=65536,g=i.getTypeOf(h),E=!0;if(g==="uint8array"?E=v.applyCanBeUsed.uint8array:g==="nodebuffer"&&(E=v.applyCanBeUsed.nodebuffer),E)for(;d>1;)try{return v.stringifyByChunk(h,g,d)}catch{d=Math.floor(d/2)}return v.stringifyByChar(h)}i.applyFromCharCode=p;function w(h,d){for(var g=0;g<h.length;g++)d[g]=h[g];return d}var y={};y.string={string:f,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return y.string.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:function(h){return c(h,a.allocBuffer(h.length))}},y.array={string:p,array:f,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return a.newBufferFrom(h)}},y.arraybuffer={string:function(h){return p(new Uint8Array(h))},array:function(h){return w(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:f,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return a.newBufferFrom(new Uint8Array(h))}},y.uint8array={string:p,array:function(h){return w(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:f,nodebuffer:function(h){return a.newBufferFrom(h)}},y.nodebuffer={string:p,array:function(h){return w(h,new Array(h.length))},arraybuffer:function(h){return y.nodebuffer.uint8array(h).buffer},uint8array:function(h){return w(h,new Uint8Array(h.length))},nodebuffer:f},i.transformTo=function(h,d){if(d||(d=""),!h)return d;i.checkSupport(h);var g=i.getTypeOf(d),E=y[g][h](d);return E},i.resolve=function(h){for(var d=h.split("/"),g=[],E=0;E<d.length;E++){var C=d[E];C==="."||C===""&&E!==0&&E!==d.length-1||(C===".."?g.pop():g.push(C))}return g.join("/")},i.getTypeOf=function(h){if(typeof h=="string")return"string";if(Object.prototype.toString.call(h)==="[object Array]")return"array";if(n.nodebuffer&&a.isBuffer(h))return"nodebuffer";if(n.uint8array&&h instanceof Uint8Array)return"uint8array";if(n.arraybuffer&&h instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(h){var d=n[h.toLowerCase()];if(!d)throw new Error(h+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(h){var d="",g,E;for(E=0;E<(h||"").length;E++)g=h.charCodeAt(E),d+="\\x"+(g<16?"0":"")+g.toString(16).toUpperCase();return d},i.delay=function(h,d,g){setImmediate(function(){h.apply(g||null,d||[])})},i.inherits=function(h,d){var g=function(){};g.prototype=d.prototype,h.prototype=new g},i.extend=function(){var h={},d,g;for(d=0;d<arguments.length;d++)for(g in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],g)&&typeof h[g]>"u"&&(h[g]=arguments[d][g]);return h},i.prepareContent=function(h,d,g,E,C){var _=u.Promise.resolve(d).then(function(D){var S=n.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1);return S&&typeof FileReader<"u"?new u.Promise(function(R,z){var F=new FileReader;F.onload=function(X){R(X.target.result)},F.onerror=function(X){z(X.target.error)},F.readAsArrayBuffer(D)}):D});return _.then(function(D){var S=i.getTypeOf(D);return S?(S==="arraybuffer"?D=i.transformTo("uint8array",D):S==="string"&&(C?D=s.decode(D):g&&E!==!0&&(D=l(D))),D):u.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),u=t("./zipEntry"),l=t("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(c)+")")}},isSignature:function(c,v){var p=this.reader.index;this.reader.setIndex(c);var w=this.reader.readString(4),y=w===v;return this.reader.setIndex(p),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),v=l.uint8array?"uint8array":"array",p=s.transformTo(v,c);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c=this.zip64EndOfCentralSize-44,v=0,p,w,y;v<c;)p=this.reader.readInt(2),w=this.reader.readInt(4),y=this.reader.readData(w),this.zip64ExtensibleData[p]={id:p,length:w,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,v;for(c=0;c<this.files.length;c++)v=this.files[c],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)c=new u({zip64:this.zip64},this.loadOptions),c.readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0){var v=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw v?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(c);var p=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),c<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var y=p-w;if(y>0)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(c){this.reader=n(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),f=t("./compressions"),c=t("./support"),v=0,p=3,w=function(h){for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)&&f[d].magic===h)return f[d];return null};function y(h,d){this.options=h,this.loadOptions=d}y.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(h){var d,g;if(h.skip(22),this.fileNameLength=h.readInt(2),g=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(d=w(this.compressionMethod),d===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,d,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var d=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(d),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),h===v&&(this.dosPermissions=this.externalFileAttributes&63),h===p&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var d=h.index+this.extraFieldsLength,g,E,C;for(this.extraFields||(this.extraFields={});h.index+4<d;)g=h.readInt(2),E=h.readInt(2),C=h.readData(E),this.extraFields[g]={id:g,length:E,value:C};h.setIndex(d)},handleUTF8:function(){var h=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var g=s.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var C=s.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var d=n(h.value);return d.readInt(1)!==1||u(this.fileName)!==d.readInt(4)?null:l.utf8decode(d.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var d=n(h.value);return d.readInt(1)!==1||u(this.fileComment)!==d.readInt(4)?null:l.utf8decode(d.readData(h.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){var n=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),a=t("./utf8"),u=t("./compressedObject"),l=t("./stream/GenericWorker"),f=function(w,y,h){this.name=w,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=y,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}};f.prototype={internalStream:function(w){var y=null,h="string";try{if(!w)throw new Error("No output type specified.");h=w.toLowerCase();var d=h==="string"||h==="text";(h==="binarystring"||h==="text")&&(h="string"),y=this._decompressWorker();var g=!this._dataBinary;g&&!d&&(y=y.pipe(new a.Utf8EncodeWorker)),!g&&d&&(y=y.pipe(new a.Utf8DecodeWorker))}catch(E){y=new l("error"),y.error(E)}return new n(y,h,"")},async:function(w,y){return this.internalStream(w).accumulate(y)},nodeStream:function(w,y){return this.internalStream(w||"nodebuffer").toNodejsStream(y)},_compressWorker:function(w,y){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new a.Utf8EncodeWorker)),u.createWorkerFrom(h,w,y)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)f.prototype[c[p]]=v;r.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var u=0,l=new s(w),f=n.document.createTextNode("");l.observe(f,{characterData:!0}),a=function(){f.data=u=++u%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var c=new n.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var h=n.document.createElement("script");h.onreadystatechange=function(){w(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:a=function(){setTimeout(w,0)};var v,p=[];function w(){v=!0;for(var h,d,g=p.length;g;){for(d=p,p=[],h=-1;++h<g;)d[h]();g=p.length}v=!1}r.exports=y;function y(h){p.push(h)===1&&!v&&a()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var n=t("immediate");function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],f=["PENDING"];r.exports=c;function c(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==s&&y(this,_)}c.prototype.finally=function(_){if(typeof _!="function")return this;var D=this.constructor;return this.then(S,R);function S(z){function F(){return z}return D.resolve(_()).then(F)}function R(z){function F(){throw z}return D.resolve(_()).then(F)}},c.prototype.catch=function(_){return this.then(null,_)},c.prototype.then=function(_,D){if(typeof _!="function"&&this.state===l||typeof D!="function"&&this.state===u)return this;var S=new this.constructor(s);if(this.state!==f){var R=this.state===l?_:D;p(S,R,this.outcome)}else this.queue.push(new v(S,_,D));return S};function v(_,D,S){this.promise=_,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},v.prototype.otherCallFulfilled=function(_){p(this.promise,this.onFulfilled,_)},v.prototype.callRejected=function(_){a.reject(this.promise,_)},v.prototype.otherCallRejected=function(_){p(this.promise,this.onRejected,_)};function p(_,D,S){n(function(){var R;try{R=D(S)}catch(z){return a.reject(_,z)}R===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,R)})}a.resolve=function(_,D){var S=h(w,D);if(S.status==="error")return a.reject(_,S.value);var R=S.value;if(R)y(_,R);else{_.state=l,_.outcome=D;for(var z=-1,F=_.queue.length;++z<F;)_.queue[z].callFulfilled(D)}return _},a.reject=function(_,D){_.state=u,_.outcome=D;for(var S=-1,R=_.queue.length;++S<R;)_.queue[S].callRejected(D);return _};function w(_){var D=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof D=="function")return function(){D.apply(_,arguments)}}function y(_,D){var S=!1;function R(N){S||(S=!0,a.reject(_,N))}function z(N){S||(S=!0,a.resolve(_,N))}function F(){D(z,R)}var X=h(F);X.status==="error"&&R(X.value)}function h(_,D){var S={};try{S.value=_(D),S.status="success"}catch(R){S.status="error",S.value=R}return S}c.resolve=d;function d(_){return _ instanceof this?_:a.resolve(new this(s),_)}c.reject=g;function g(_){var D=new this(s);return a.reject(D,_)}c.all=E;function E(_){var D=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,R=!1;if(!S)return this.resolve([]);for(var z=new Array(S),F=0,X=-1,N=new this(s);++X<S;)q(_[X],X);return N;function q(x,$){D.resolve(x).then(ce,function(K){R||(R=!0,a.reject(N,K))});function ce(K){z[$]=K,++F===S&&!R&&(R=!0,a.resolve(N,z))}}}c.race=C;function C(_){var D=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,R=!1;if(!S)return this.resolve([]);for(var z=-1,F=new this(s);++z<S;)X(_[z]);return F;function X(N){D.resolve(N).then(function(q){R||(R=!0,a.resolve(F,q))},function(q){R||(R=!0,a.reject(F,q))})}}},{immediate:36}],38:[function(t,r,i){var n=t("./lib/utils/common").assign,s=t("./lib/deflate"),a=t("./lib/inflate"),u=t("./lib/zlib/constants"),l={};n(l,s,a,u),r.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),f=Object.prototype.toString,c=0,v=4,p=0,w=1,y=2,h=-1,d=0,g=8;function E(S){if(!(this instanceof E))return new E(S);this.options=s.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},S||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var z=n.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(z!==p)throw new Error(u[z]);if(R.header&&n.deflateSetHeader(this.strm,R.header),R.dictionary){var F;if(typeof R.dictionary=="string"?F=a.string2buf(R.dictionary):f.call(R.dictionary)==="[object ArrayBuffer]"?F=new Uint8Array(R.dictionary):F=R.dictionary,z=n.deflateSetDictionary(this.strm,F),z!==p)throw new Error(u[z]);this._dict_set=!0}}E.prototype.push=function(S,R){var z=this.strm,F=this.options.chunkSize,X,N;if(this.ended)return!1;N=R===~~R?R:R===!0?v:c,typeof S=="string"?z.input=a.string2buf(S):f.call(S)==="[object ArrayBuffer]"?z.input=new Uint8Array(S):z.input=S,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new s.Buf8(F),z.next_out=0,z.avail_out=F),X=n.deflate(z,N),X!==w&&X!==p)return this.onEnd(X),this.ended=!0,!1;(z.avail_out===0||z.avail_in===0&&(N===v||N===y))&&(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(z.output,z.next_out))):this.onData(s.shrinkBuf(z.output,z.next_out)))}while((z.avail_in>0||z.avail_out===0)&&X!==w);return N===v?(X=n.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===p):(N===y&&(this.onEnd(p),z.avail_out=0),!0)},E.prototype.onData=function(S){this.chunks.push(S)},E.prototype.onEnd=function(S){S===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function C(S,R){var z=new E(R);if(z.push(S,!0),z.err)throw z.msg||u[z.err];return z.result}function _(S,R){return R=R||{},R.raw=!0,C(S,R)}function D(S,R){return R=R||{},R.gzip=!0,C(S,R)}i.Deflate=E,i.deflate=C,i.deflateRaw=_,i.gzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),f=t("./zlib/zstream"),c=t("./zlib/gzheader"),v=Object.prototype.toString;function p(h){if(!(this instanceof p))return new p(h);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},h||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(h&&h.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15||(d.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,d.windowBits);if(g!==u.Z_OK)throw new Error(l[g]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}p.prototype.push=function(h,d){var g=this.strm,E=this.options.chunkSize,C=this.options.dictionary,_,D,S,R,z,F,X=!1;if(this.ended)return!1;D=d===~~d?d:d===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof h=="string"?g.input=a.binstring2buf(h):v.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new s.Buf8(E),g.next_out=0,g.avail_out=E),_=n.inflate(g,u.Z_NO_FLUSH),_===u.Z_NEED_DICT&&C&&(typeof C=="string"?F=a.string2buf(C):v.call(C)==="[object ArrayBuffer]"?F=new Uint8Array(C):F=C,_=n.inflateSetDictionary(this.strm,F)),_===u.Z_BUF_ERROR&&X===!0&&(_=u.Z_OK,X=!1),_!==u.Z_STREAM_END&&_!==u.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===u.Z_STREAM_END||g.avail_in===0&&(D===u.Z_FINISH||D===u.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=a.utf8border(g.output,g.next_out),R=g.next_out-S,z=a.buf2string(g.output,S),g.next_out=R,g.avail_out=E-R,R&&s.arraySet(g.output,g.output,S,R,0),this.onData(z)):this.onData(s.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(X=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==u.Z_STREAM_END);return _===u.Z_STREAM_END&&(D=u.Z_FINISH),D===u.Z_FINISH?(_=n.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===u.Z_OK):(D===u.Z_SYNC_FLUSH&&(this.onEnd(u.Z_OK),g.avail_out=0),!0)},p.prototype.onData=function(h){this.chunks.push(h)},p.prototype.onEnd=function(h){h===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function w(h,d){var g=new p(d);if(g.push(h,!0),g.err)throw g.msg||l[g.err];return g.result}function y(h,d){return d=d||{},d.raw=!0,w(h,d)}i.Inflate=p,i.inflate=w,i.inflateRaw=y,i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var f=l.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var s={arraySet:function(u,l,f,c,v){if(l.subarray&&u.subarray){u.set(l.subarray(f,f+c),v);return}for(var p=0;p<c;p++)u[v+p]=l[f+p]},flattenChunks:function(u){var l,f,c,v,p,w;for(c=0,l=0,f=u.length;l<f;l++)c+=u[l].length;for(w=new Uint8Array(c),v=0,l=0,f=u.length;l<f;l++)p=u[l],w.set(p,v),v+=p.length;return w}},a={arraySet:function(u,l,f,c,v){for(var p=0;p<c;p++)u[v+p]=l[f+p]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],42:[function(t,r,i){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new n.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,i.string2buf=function(c){var v,p,w,y,h,d=c.length,g=0;for(y=0;y<d;y++)p=c.charCodeAt(y),(p&64512)===55296&&y+1<d&&(w=c.charCodeAt(y+1),(w&64512)===56320&&(p=65536+(p-55296<<10)+(w-56320),y++)),g+=p<128?1:p<2048?2:p<65536?3:4;for(v=new n.Buf8(g),h=0,y=0;h<g;y++)p=c.charCodeAt(y),(p&64512)===55296&&y+1<d&&(w=c.charCodeAt(y+1),(w&64512)===56320&&(p=65536+(p-55296<<10)+(w-56320),y++)),p<128?v[h++]=p:p<2048?(v[h++]=192|p>>>6,v[h++]=128|p&63):p<65536?(v[h++]=224|p>>>12,v[h++]=128|p>>>6&63,v[h++]=128|p&63):(v[h++]=240|p>>>18,v[h++]=128|p>>>12&63,v[h++]=128|p>>>6&63,v[h++]=128|p&63);return v};function f(c,v){if(v<65537&&(c.subarray&&a||!c.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(c,v));for(var p="",w=0;w<v;w++)p+=String.fromCharCode(c[w]);return p}i.buf2binstring=function(c){return f(c,c.length)},i.binstring2buf=function(c){for(var v=new n.Buf8(c.length),p=0,w=v.length;p<w;p++)v[p]=c.charCodeAt(p);return v},i.buf2string=function(c,v){var p,w,y,h,d=v||c.length,g=new Array(d*2);for(w=0,p=0;p<d;){if(y=c[p++],y<128){g[w++]=y;continue}if(h=u[y],h>4){g[w++]=65533,p+=h-1;continue}for(y&=h===2?31:h===3?15:7;h>1&&p<d;)y=y<<6|c[p++]&63,h--;if(h>1){g[w++]=65533;continue}y<65536?g[w++]=y:(y-=65536,g[w++]=55296|y>>10&1023,g[w++]=56320|y&1023)}return f(g,w)},i.utf8border=function(c,v){var p;for(v=v||c.length,v>c.length&&(v=c.length),p=v-1;p>=0&&(c[p]&192)===128;)p--;return p<0||p===0?v:p+u[c[p]]>v?p:v}},{"./common":41}],43:[function(t,r,i){function n(s,a,u,l){for(var f=s&65535|0,c=s>>>16&65535|0,v=0;u!==0;){v=u>2e3?2e3:u,u-=v;do f=f+a[l++]|0,c=c+f|0;while(--v);f%=65521,c%=65521}return f|c<<16|0}r.exports=n},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){function n(){for(var u,l=[],f=0;f<256;f++){u=f;for(var c=0;c<8;c++)u=u&1?3988292384^u>>>1:u>>>1;l[f]=u}return l}var s=n();function a(u,l,f,c){var v=s,p=c+f;u^=-1;for(var w=c;w<p;w++)u=u>>>8^v[(u^l[w])&255];return u^-1}r.exports=a},{}],46:[function(t,r,i){var n=t("../utils/common"),s=t("./trees"),a=t("./adler32"),u=t("./crc32"),l=t("./messages"),f=0,c=1,v=3,p=4,w=5,y=0,h=1,d=-2,g=-3,E=-5,C=-1,_=1,D=2,S=3,R=4,z=0,F=2,X=8,N=9,q=15,x=8,$=29,ce=256,K=ce+1+$,fe=30,se=19,Ae=2*K+1,Y=15,M=3,Ee=258,de=Ee+M+1,me=32,Fe=42,je=69,Ce=73,Be=91,Ue=103,Re=113,He=666,Le=1,b=2,re=3,Q=4,L=3;function O(m,ee){return m.msg=l[ee],ee}function H(m){return(m<<1)-(m>4?9:0)}function ae(m){for(var ee=m.length;--ee>=0;)m[ee]=0}function oe(m){var ee=m.state,te=ee.pending;te>m.avail_out&&(te=m.avail_out),te!==0&&(n.arraySet(m.output,ee.pending_buf,ee.pending_out,te,m.next_out),m.next_out+=te,ee.pending_out+=te,m.total_out+=te,m.avail_out-=te,ee.pending-=te,ee.pending===0&&(ee.pending_out=0))}function V(m,ee){s._tr_flush_block(m,m.block_start>=0?m.block_start:-1,m.strstart-m.block_start,ee),m.block_start=m.strstart,oe(m.strm)}function ne(m,ee){m.pending_buf[m.pending++]=ee}function we(m,ee){m.pending_buf[m.pending++]=ee>>>8&255,m.pending_buf[m.pending++]=ee&255}function ve(m,ee,te,k){var U=m.avail_in;return U>k&&(U=k),U===0?0:(m.avail_in-=U,n.arraySet(ee,m.input,m.next_in,U,te),m.state.wrap===1?m.adler=a(m.adler,ee,U,te):m.state.wrap===2&&(m.adler=u(m.adler,ee,U,te)),m.next_in+=U,m.total_in+=U,U)}function Te(m,ee){var te=m.max_chain_length,k=m.strstart,U,J,Ne=m.prev_length,De=m.nice_match,Se=m.strstart>m.w_size-de?m.strstart-(m.w_size-de):0,qe=m.window,Ct=m.w_mask,Qe=m.prev,Ze=m.strstart+Ee,rt=qe[k+Ne-1],ht=qe[k+Ne];m.prev_length>=m.good_match&&(te>>=2),De>m.lookahead&&(De=m.lookahead);do if(U=ee,!(qe[U+Ne]!==ht||qe[U+Ne-1]!==rt||qe[U]!==qe[k]||qe[++U]!==qe[k+1])){k+=2,U++;do;while(qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&qe[++k]===qe[++U]&&k<Ze);if(J=Ee-(Ze-k),k=Ze-Ee,J>Ne){if(m.match_start=ee,Ne=J,J>=De)break;rt=qe[k+Ne-1],ht=qe[k+Ne]}}while((ee=Qe[ee&Ct])>Se&&--te!==0);return Ne<=m.lookahead?Ne:m.lookahead}function Pe(m){var ee=m.w_size,te,k,U,J,Ne;do{if(J=m.window_size-m.lookahead-m.strstart,m.strstart>=ee+(ee-de)){n.arraySet(m.window,m.window,ee,ee,0),m.match_start-=ee,m.strstart-=ee,m.block_start-=ee,k=m.hash_size,te=k;do U=m.head[--te],m.head[te]=U>=ee?U-ee:0;while(--k);k=ee,te=k;do U=m.prev[--te],m.prev[te]=U>=ee?U-ee:0;while(--k);J+=ee}if(m.strm.avail_in===0)break;if(k=ve(m.strm,m.window,m.strstart+m.lookahead,J),m.lookahead+=k,m.lookahead+m.insert>=M)for(Ne=m.strstart-m.insert,m.ins_h=m.window[Ne],m.ins_h=(m.ins_h<<m.hash_shift^m.window[Ne+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[Ne+M-1])&m.hash_mask,m.prev[Ne&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Ne,Ne++,m.insert--,!(m.lookahead+m.insert<M)););}while(m.lookahead<de&&m.strm.avail_in!==0)}function ze(m,ee){var te=65535;for(te>m.pending_buf_size-5&&(te=m.pending_buf_size-5);;){if(m.lookahead<=1){if(Pe(m),m.lookahead===0&&ee===f)return Le;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var k=m.block_start+te;if((m.strstart===0||m.strstart>=k)&&(m.lookahead=m.strstart-k,m.strstart=k,V(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-de&&(V(m,!1),m.strm.avail_out===0))return Le}return m.insert=0,ee===p?(V(m,!0),m.strm.avail_out===0?re:Q):(m.strstart>m.block_start&&(V(m,!1),m.strm.avail_out===0),Le)}function Je(m,ee){for(var te,k;;){if(m.lookahead<de){if(Pe(m),m.lookahead<de&&ee===f)return Le;if(m.lookahead===0)break}if(te=0,m.lookahead>=M&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,te=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),te!==0&&m.strstart-te<=m.w_size-de&&(m.match_length=Te(m,te)),m.match_length>=M)if(k=s._tr_tally(m,m.strstart-m.match_start,m.match_length-M),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=M){m.match_length--;do m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,te=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart;while(--m.match_length!==0);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else k=s._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(k&&(V(m,!1),m.strm.avail_out===0))return Le}return m.insert=m.strstart<M-1?m.strstart:M-1,ee===p?(V(m,!0),m.strm.avail_out===0?re:Q):m.last_lit&&(V(m,!1),m.strm.avail_out===0)?Le:b}function st(m,ee){for(var te,k,U;;){if(m.lookahead<de){if(Pe(m),m.lookahead<de&&ee===f)return Le;if(m.lookahead===0)break}if(te=0,m.lookahead>=M&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,te=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=M-1,te!==0&&m.prev_length<m.max_lazy_match&&m.strstart-te<=m.w_size-de&&(m.match_length=Te(m,te),m.match_length<=5&&(m.strategy===_||m.match_length===M&&m.strstart-m.match_start>4096)&&(m.match_length=M-1)),m.prev_length>=M&&m.match_length<=m.prev_length){U=m.strstart+m.lookahead-M,k=s._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-M),m.lookahead-=m.prev_length-1,m.prev_length-=2;do++m.strstart<=U&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,te=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart);while(--m.prev_length!==0);if(m.match_available=0,m.match_length=M-1,m.strstart++,k&&(V(m,!1),m.strm.avail_out===0))return Le}else if(m.match_available){if(k=s._tr_tally(m,0,m.window[m.strstart-1]),k&&V(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return Le}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(k=s._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<M-1?m.strstart:M-1,ee===p?(V(m,!0),m.strm.avail_out===0?re:Q):m.last_lit&&(V(m,!1),m.strm.avail_out===0)?Le:b}function at(m,ee){for(var te,k,U,J,Ne=m.window;;){if(m.lookahead<=Ee){if(Pe(m),m.lookahead<=Ee&&ee===f)return Le;if(m.lookahead===0)break}if(m.match_length=0,m.lookahead>=M&&m.strstart>0&&(U=m.strstart-1,k=Ne[U],k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U])){J=m.strstart+Ee;do;while(k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&k===Ne[++U]&&U<J);m.match_length=Ee-(J-U),m.match_length>m.lookahead&&(m.match_length=m.lookahead)}if(m.match_length>=M?(te=s._tr_tally(m,1,m.match_length-M),m.lookahead-=m.match_length,m.strstart+=m.match_length,m.match_length=0):(te=s._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++),te&&(V(m,!1),m.strm.avail_out===0))return Le}return m.insert=0,ee===p?(V(m,!0),m.strm.avail_out===0?re:Q):m.last_lit&&(V(m,!1),m.strm.avail_out===0)?Le:b}function ct(m,ee){for(var te;;){if(m.lookahead===0&&(Pe(m),m.lookahead===0)){if(ee===f)return Le;break}if(m.match_length=0,te=s._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++,te&&(V(m,!1),m.strm.avail_out===0))return Le}return m.insert=0,ee===p?(V(m,!0),m.strm.avail_out===0?re:Q):m.last_lit&&(V(m,!1),m.strm.avail_out===0)?Le:b}function Me(m,ee,te,k,U){this.good_length=m,this.max_lazy=ee,this.nice_length=te,this.max_chain=k,this.func=U}var ut;ut=[new Me(0,0,0,0,ze),new Me(4,4,8,4,Je),new Me(4,5,16,8,Je),new Me(4,6,32,32,Je),new Me(4,4,16,16,st),new Me(8,16,32,32,st),new Me(8,16,128,128,st),new Me(8,32,128,256,st),new Me(32,128,258,1024,st),new Me(32,258,258,4096,st)];function wt(m){m.window_size=2*m.w_size,ae(m.head),m.max_lazy_match=ut[m.level].max_lazy,m.good_match=ut[m.level].good_length,m.nice_match=ut[m.level].nice_length,m.max_chain_length=ut[m.level].max_chain,m.strstart=0,m.block_start=0,m.lookahead=0,m.insert=0,m.match_length=m.prev_length=M-1,m.match_available=0,m.ins_h=0}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(Ae*2),this.dyn_dtree=new n.Buf16((2*fe+1)*2),this.bl_tree=new n.Buf16((2*se+1)*2),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(Y+1),this.heap=new n.Buf16(2*K+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*K+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(m){var ee;return!m||!m.state?O(m,d):(m.total_in=m.total_out=0,m.data_type=F,ee=m.state,ee.pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?Fe:Re,m.adler=ee.wrap===2?0:1,ee.last_flush=f,s._tr_init(ee),y)}function ge(m){var ee=le(m);return ee===y&&wt(m.state),ee}function ke(m,ee){return!m||!m.state||m.state.wrap!==2?d:(m.state.gzhead=ee,y)}function j(m,ee,te,k,U,J){if(!m)return d;var Ne=1;if(ee===C&&(ee=6),k<0?(Ne=0,k=-k):k>15&&(Ne=2,k-=16),U<1||U>N||te!==X||k<8||k>15||ee<0||ee>9||J<0||J>R)return O(m,d);k===8&&(k=9);var De=new I;return m.state=De,De.strm=m,De.wrap=Ne,De.gzhead=null,De.w_bits=k,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=U+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+M-1)/M),De.window=new n.Buf8(De.w_size*2),De.head=new n.Buf16(De.hash_size),De.prev=new n.Buf16(De.w_size),De.lit_bufsize=1<<U+6,De.pending_buf_size=De.lit_bufsize*4,De.pending_buf=new n.Buf8(De.pending_buf_size),De.d_buf=1*De.lit_bufsize,De.l_buf=(1+2)*De.lit_bufsize,De.level=ee,De.strategy=J,De.method=te,ge(m)}function ie(m,ee){return j(m,ee,X,q,x,z)}function A(m,ee){var te,k,U,J;if(!m||!m.state||ee>w||ee<0)return m?O(m,d):d;if(k=m.state,!m.output||!m.input&&m.avail_in!==0||k.status===He&&ee!==p)return O(m,m.avail_out===0?E:d);if(k.strm=m,te=k.last_flush,k.last_flush=ee,k.status===Fe)if(k.wrap===2)m.adler=0,ne(k,31),ne(k,139),ne(k,8),k.gzhead?(ne(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),ne(k,k.gzhead.time&255),ne(k,k.gzhead.time>>8&255),ne(k,k.gzhead.time>>16&255),ne(k,k.gzhead.time>>24&255),ne(k,k.level===9?2:k.strategy>=D||k.level<2?4:0),ne(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(ne(k,k.gzhead.extra.length&255),ne(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(m.adler=u(m.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=je):(ne(k,0),ne(k,0),ne(k,0),ne(k,0),ne(k,0),ne(k,k.level===9?2:k.strategy>=D||k.level<2?4:0),ne(k,L),k.status=Re);else{var Ne=X+(k.w_bits-8<<4)<<8,De=-1;k.strategy>=D||k.level<2?De=0:k.level<6?De=1:k.level===6?De=2:De=3,Ne|=De<<6,k.strstart!==0&&(Ne|=me),Ne+=31-Ne%31,k.status=Re,we(k,Ne),k.strstart!==0&&(we(k,m.adler>>>16),we(k,m.adler&65535)),m.adler=1}if(k.status===je)if(k.gzhead.extra){for(U=k.pending;k.gzindex<(k.gzhead.extra.length&65535)&&!(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),oe(m),U=k.pending,k.pending===k.pending_buf_size));)ne(k,k.gzhead.extra[k.gzindex]&255),k.gzindex++;k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=Ce)}else k.status=Ce;if(k.status===Ce)if(k.gzhead.name){U=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),oe(m),U=k.pending,k.pending===k.pending_buf_size)){J=1;break}k.gzindex<k.gzhead.name.length?J=k.gzhead.name.charCodeAt(k.gzindex++)&255:J=0,ne(k,J)}while(J!==0);k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),J===0&&(k.gzindex=0,k.status=Be)}else k.status=Be;if(k.status===Be)if(k.gzhead.comment){U=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),oe(m),U=k.pending,k.pending===k.pending_buf_size)){J=1;break}k.gzindex<k.gzhead.comment.length?J=k.gzhead.comment.charCodeAt(k.gzindex++)&255:J=0,ne(k,J)}while(J!==0);k.gzhead.hcrc&&k.pending>U&&(m.adler=u(m.adler,k.pending_buf,k.pending-U,U)),J===0&&(k.status=Ue)}else k.status=Ue;if(k.status===Ue&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&oe(m),k.pending+2<=k.pending_buf_size&&(ne(k,m.adler&255),ne(k,m.adler>>8&255),m.adler=0,k.status=Re)):k.status=Re),k.pending!==0){if(oe(m),m.avail_out===0)return k.last_flush=-1,y}else if(m.avail_in===0&&H(ee)<=H(te)&&ee!==p)return O(m,E);if(k.status===He&&m.avail_in!==0)return O(m,E);if(m.avail_in!==0||k.lookahead!==0||ee!==f&&k.status!==He){var Se=k.strategy===D?ct(k,ee):k.strategy===S?at(k,ee):ut[k.level].func(k,ee);if((Se===re||Se===Q)&&(k.status=He),Se===Le||Se===re)return m.avail_out===0&&(k.last_flush=-1),y;if(Se===b&&(ee===c?s._tr_align(k):ee!==w&&(s._tr_stored_block(k,0,0,!1),ee===v&&(ae(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),oe(m),m.avail_out===0))return k.last_flush=-1,y}return ee!==p?y:k.wrap<=0?h:(k.wrap===2?(ne(k,m.adler&255),ne(k,m.adler>>8&255),ne(k,m.adler>>16&255),ne(k,m.adler>>24&255),ne(k,m.total_in&255),ne(k,m.total_in>>8&255),ne(k,m.total_in>>16&255),ne(k,m.total_in>>24&255)):(we(k,m.adler>>>16),we(k,m.adler&65535)),oe(m),k.wrap>0&&(k.wrap=-k.wrap),k.pending!==0?y:h)}function he(m){var ee;return!m||!m.state?d:(ee=m.state.status,ee!==Fe&&ee!==je&&ee!==Ce&&ee!==Be&&ee!==Ue&&ee!==Re&&ee!==He?O(m,d):(m.state=null,ee===Re?O(m,g):y))}function Oe(m,ee){var te=ee.length,k,U,J,Ne,De,Se,qe,Ct;if(!m||!m.state||(k=m.state,Ne=k.wrap,Ne===2||Ne===1&&k.status!==Fe||k.lookahead))return d;for(Ne===1&&(m.adler=a(m.adler,ee,te,0)),k.wrap=0,te>=k.w_size&&(Ne===0&&(ae(k.head),k.strstart=0,k.block_start=0,k.insert=0),Ct=new n.Buf8(k.w_size),n.arraySet(Ct,ee,te-k.w_size,k.w_size,0),ee=Ct,te=k.w_size),De=m.avail_in,Se=m.next_in,qe=m.input,m.avail_in=te,m.next_in=0,m.input=ee,Pe(k);k.lookahead>=M;){U=k.strstart,J=k.lookahead-(M-1);do k.ins_h=(k.ins_h<<k.hash_shift^k.window[U+M-1])&k.hash_mask,k.prev[U&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=U,U++;while(--J);k.strstart=U,k.lookahead=M-1,Pe(k)}return k.strstart+=k.lookahead,k.block_start=k.strstart,k.insert=k.lookahead,k.lookahead=0,k.match_length=k.prev_length=M-1,k.match_available=0,m.next_in=Se,m.input=qe,m.avail_in=De,k.wrap=Ne,y}i.deflateInit=ie,i.deflateInit2=j,i.deflateReset=ge,i.deflateResetKeep=le,i.deflateSetHeader=ke,i.deflate=A,i.deflateEnd=he,i.deflateSetDictionary=Oe,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=n},{}],48:[function(t,r,i){var n=30,s=12;r.exports=function(u,l){var f,c,v,p,w,y,h,d,g,E,C,_,D,S,R,z,F,X,N,q,x,$,ce,K,fe;f=u.state,c=u.next_in,K=u.input,v=c+(u.avail_in-5),p=u.next_out,fe=u.output,w=p-(l-u.avail_out),y=p+(u.avail_out-257),h=f.dmax,d=f.wsize,g=f.whave,E=f.wnext,C=f.window,_=f.hold,D=f.bits,S=f.lencode,R=f.distcode,z=(1<<f.lenbits)-1,F=(1<<f.distbits)-1;e:do{D<15&&(_+=K[c++]<<D,D+=8,_+=K[c++]<<D,D+=8),X=S[_&z];t:for(;;){if(N=X>>>24,_>>>=N,D-=N,N=X>>>16&255,N===0)fe[p++]=X&65535;else if(N&16){q=X&65535,N&=15,N&&(D<N&&(_+=K[c++]<<D,D+=8),q+=_&(1<<N)-1,_>>>=N,D-=N),D<15&&(_+=K[c++]<<D,D+=8,_+=K[c++]<<D,D+=8),X=R[_&F];r:for(;;){if(N=X>>>24,_>>>=N,D-=N,N=X>>>16&255,N&16){if(x=X&65535,N&=15,D<N&&(_+=K[c++]<<D,D+=8,D<N&&(_+=K[c++]<<D,D+=8)),x+=_&(1<<N)-1,x>h){u.msg="invalid distance too far back",f.mode=n;break e}if(_>>>=N,D-=N,N=p-w,x>N){if(N=x-N,N>g&&f.sane){u.msg="invalid distance too far back",f.mode=n;break e}if($=0,ce=C,E===0){if($+=d-N,N<q){q-=N;do fe[p++]=C[$++];while(--N);$=p-x,ce=fe}}else if(E<N){if($+=d+E-N,N-=E,N<q){q-=N;do fe[p++]=C[$++];while(--N);if($=0,E<q){N=E,q-=N;do fe[p++]=C[$++];while(--N);$=p-x,ce=fe}}}else if($+=E-N,N<q){q-=N;do fe[p++]=C[$++];while(--N);$=p-x,ce=fe}for(;q>2;)fe[p++]=ce[$++],fe[p++]=ce[$++],fe[p++]=ce[$++],q-=3;q&&(fe[p++]=ce[$++],q>1&&(fe[p++]=ce[$++]))}else{$=p-x;do fe[p++]=fe[$++],fe[p++]=fe[$++],fe[p++]=fe[$++],q-=3;while(q>2);q&&(fe[p++]=fe[$++],q>1&&(fe[p++]=fe[$++]))}}else if(N&64){u.msg="invalid distance code",f.mode=n;break e}else{X=R[(X&65535)+(_&(1<<N)-1)];continue r}break}}else if(N&64)if(N&32){f.mode=s;break e}else{u.msg="invalid literal/length code",f.mode=n;break e}else{X=S[(X&65535)+(_&(1<<N)-1)];continue t}break}}while(c<v&&p<y);q=D>>3,c-=q,D-=q<<3,_&=(1<<D)-1,u.next_in=c,u.next_out=p,u.avail_in=c<v?5+(v-c):5-(c-v),u.avail_out=p<y?257+(y-p):257-(p-y),f.hold=_,f.bits=D}},{}],49:[function(t,r,i){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),f=0,c=1,v=2,p=4,w=5,y=6,h=0,d=1,g=2,E=-2,C=-3,_=-4,D=-5,S=8,R=1,z=2,F=3,X=4,N=5,q=6,x=7,$=8,ce=9,K=10,fe=11,se=12,Ae=13,Y=14,M=15,Ee=16,de=17,me=18,Fe=19,je=20,Ce=21,Be=22,Ue=23,Re=24,He=25,Le=26,b=27,re=28,Q=29,L=30,O=31,H=32,ae=852,oe=592,V=15,ne=V;function we(j){return(j>>>24&255)+(j>>>8&65280)+((j&65280)<<8)+((j&255)<<24)}function ve(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Te(j){var ie;return!j||!j.state?E:(ie=j.state,j.total_in=j.total_out=ie.total=0,j.msg="",ie.wrap&&(j.adler=ie.wrap&1),ie.mode=R,ie.last=0,ie.havedict=0,ie.dmax=32768,ie.head=null,ie.hold=0,ie.bits=0,ie.lencode=ie.lendyn=new n.Buf32(ae),ie.distcode=ie.distdyn=new n.Buf32(oe),ie.sane=1,ie.back=-1,h)}function Pe(j){var ie;return!j||!j.state?E:(ie=j.state,ie.wsize=0,ie.whave=0,ie.wnext=0,Te(j))}function ze(j,ie){var A,he;return!j||!j.state||(he=j.state,ie<0?(A=0,ie=-ie):(A=(ie>>4)+1,ie<48&&(ie&=15)),ie&&(ie<8||ie>15))?E:(he.window!==null&&he.wbits!==ie&&(he.window=null),he.wrap=A,he.wbits=ie,Pe(j))}function Je(j,ie){var A,he;return j?(he=new ve,j.state=he,he.window=null,A=ze(j,ie),A!==h&&(j.state=null),A):E}function st(j){return Je(j,ne)}var at=!0,ct,Me;function ut(j){if(at){var ie;for(ct=new n.Buf32(512),Me=new n.Buf32(32),ie=0;ie<144;)j.lens[ie++]=8;for(;ie<256;)j.lens[ie++]=9;for(;ie<280;)j.lens[ie++]=7;for(;ie<288;)j.lens[ie++]=8;for(l(c,j.lens,0,288,ct,0,j.work,{bits:9}),ie=0;ie<32;)j.lens[ie++]=5;l(v,j.lens,0,32,Me,0,j.work,{bits:5}),at=!1}j.lencode=ct,j.lenbits=9,j.distcode=Me,j.distbits=5}function wt(j,ie,A,he){var Oe,m=j.state;return m.window===null&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new n.Buf8(m.wsize)),he>=m.wsize?(n.arraySet(m.window,ie,A-m.wsize,m.wsize,0),m.wnext=0,m.whave=m.wsize):(Oe=m.wsize-m.wnext,Oe>he&&(Oe=he),n.arraySet(m.window,ie,A-he,Oe,m.wnext),he-=Oe,he?(n.arraySet(m.window,ie,A-he,he,0),m.wnext=he,m.whave=m.wsize):(m.wnext+=Oe,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=Oe))),0}function I(j,ie){var A,he,Oe,m,ee,te,k,U,J,Ne,De,Se,qe,Ct,Qe=0,Ze,rt,ht,pt,Yt,$t,et,vt,lt=new n.Buf8(4),kt,Et,Or=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return E;A=j.state,A.mode===se&&(A.mode=Ae),ee=j.next_out,Oe=j.output,k=j.avail_out,m=j.next_in,he=j.input,te=j.avail_in,U=A.hold,J=A.bits,Ne=te,De=k,vt=h;e:for(;;)switch(A.mode){case R:if(A.wrap===0){A.mode=Ae;break}for(;J<16;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(A.wrap&2&&U===35615){A.check=0,lt[0]=U&255,lt[1]=U>>>8&255,A.check=a(A.check,lt,2,0),U=0,J=0,A.mode=z;break}if(A.flags=0,A.head&&(A.head.done=!1),!(A.wrap&1)||(((U&255)<<8)+(U>>8))%31){j.msg="incorrect header check",A.mode=L;break}if((U&15)!==S){j.msg="unknown compression method",A.mode=L;break}if(U>>>=4,J-=4,et=(U&15)+8,A.wbits===0)A.wbits=et;else if(et>A.wbits){j.msg="invalid window size",A.mode=L;break}A.dmax=1<<et,j.adler=A.check=1,A.mode=U&512?K:se,U=0,J=0;break;case z:for(;J<16;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(A.flags=U,(A.flags&255)!==S){j.msg="unknown compression method",A.mode=L;break}if(A.flags&57344){j.msg="unknown header flags set",A.mode=L;break}A.head&&(A.head.text=U>>8&1),A.flags&512&&(lt[0]=U&255,lt[1]=U>>>8&255,A.check=a(A.check,lt,2,0)),U=0,J=0,A.mode=F;case F:for(;J<32;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.head&&(A.head.time=U),A.flags&512&&(lt[0]=U&255,lt[1]=U>>>8&255,lt[2]=U>>>16&255,lt[3]=U>>>24&255,A.check=a(A.check,lt,4,0)),U=0,J=0,A.mode=X;case X:for(;J<16;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.head&&(A.head.xflags=U&255,A.head.os=U>>8),A.flags&512&&(lt[0]=U&255,lt[1]=U>>>8&255,A.check=a(A.check,lt,2,0)),U=0,J=0,A.mode=N;case N:if(A.flags&1024){for(;J<16;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.length=U,A.head&&(A.head.extra_len=U),A.flags&512&&(lt[0]=U&255,lt[1]=U>>>8&255,A.check=a(A.check,lt,2,0)),U=0,J=0}else A.head&&(A.head.extra=null);A.mode=q;case q:if(A.flags&1024&&(Se=A.length,Se>te&&(Se=te),Se&&(A.head&&(et=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),n.arraySet(A.head.extra,he,m,Se,et)),A.flags&512&&(A.check=a(A.check,he,Se,m)),te-=Se,m+=Se,A.length-=Se),A.length))break e;A.length=0,A.mode=x;case x:if(A.flags&2048){if(te===0)break e;Se=0;do et=he[m+Se++],A.head&&et&&A.length<65536&&(A.head.name+=String.fromCharCode(et));while(et&&Se<te);if(A.flags&512&&(A.check=a(A.check,he,Se,m)),te-=Se,m+=Se,et)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=$;case $:if(A.flags&4096){if(te===0)break e;Se=0;do et=he[m+Se++],A.head&&et&&A.length<65536&&(A.head.comment+=String.fromCharCode(et));while(et&&Se<te);if(A.flags&512&&(A.check=a(A.check,he,Se,m)),te-=Se,m+=Se,et)break e}else A.head&&(A.head.comment=null);A.mode=ce;case ce:if(A.flags&512){for(;J<16;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(U!==(A.check&65535)){j.msg="header crc mismatch",A.mode=L;break}U=0,J=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),j.adler=A.check=0,A.mode=se;break;case K:for(;J<32;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}j.adler=A.check=we(U),U=0,J=0,A.mode=fe;case fe:if(A.havedict===0)return j.next_out=ee,j.avail_out=k,j.next_in=m,j.avail_in=te,A.hold=U,A.bits=J,g;j.adler=A.check=1,A.mode=se;case se:if(ie===w||ie===y)break e;case Ae:if(A.last){U>>>=J&7,J-=J&7,A.mode=b;break}for(;J<3;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}switch(A.last=U&1,U>>>=1,J-=1,U&3){case 0:A.mode=Y;break;case 1:if(ut(A),A.mode=je,ie===y){U>>>=2,J-=2;break e}break;case 2:A.mode=de;break;case 3:j.msg="invalid block type",A.mode=L}U>>>=2,J-=2;break;case Y:for(U>>>=J&7,J-=J&7;J<32;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if((U&65535)!==(U>>>16^65535)){j.msg="invalid stored block lengths",A.mode=L;break}if(A.length=U&65535,U=0,J=0,A.mode=M,ie===y)break e;case M:A.mode=Ee;case Ee:if(Se=A.length,Se){if(Se>te&&(Se=te),Se>k&&(Se=k),Se===0)break e;n.arraySet(Oe,he,m,Se,ee),te-=Se,m+=Se,k-=Se,ee+=Se,A.length-=Se;break}A.mode=se;break;case de:for(;J<14;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(A.nlen=(U&31)+257,U>>>=5,J-=5,A.ndist=(U&31)+1,U>>>=5,J-=5,A.ncode=(U&15)+4,U>>>=4,J-=4,A.nlen>286||A.ndist>30){j.msg="too many length or distance symbols",A.mode=L;break}A.have=0,A.mode=me;case me:for(;A.have<A.ncode;){for(;J<3;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.lens[Or[A.have++]]=U&7,U>>>=3,J-=3}for(;A.have<19;)A.lens[Or[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,kt={bits:A.lenbits},vt=l(f,A.lens,0,19,A.lencode,0,A.work,kt),A.lenbits=kt.bits,vt){j.msg="invalid code lengths set",A.mode=L;break}A.have=0,A.mode=Fe;case Fe:for(;A.have<A.nlen+A.ndist;){for(;Qe=A.lencode[U&(1<<A.lenbits)-1],Ze=Qe>>>24,rt=Qe>>>16&255,ht=Qe&65535,!(Ze<=J);){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(ht<16)U>>>=Ze,J-=Ze,A.lens[A.have++]=ht;else{if(ht===16){for(Et=Ze+2;J<Et;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(U>>>=Ze,J-=Ze,A.have===0){j.msg="invalid bit length repeat",A.mode=L;break}et=A.lens[A.have-1],Se=3+(U&3),U>>>=2,J-=2}else if(ht===17){for(Et=Ze+3;J<Et;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}U>>>=Ze,J-=Ze,et=0,Se=3+(U&7),U>>>=3,J-=3}else{for(Et=Ze+7;J<Et;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}U>>>=Ze,J-=Ze,et=0,Se=11+(U&127),U>>>=7,J-=7}if(A.have+Se>A.nlen+A.ndist){j.msg="invalid bit length repeat",A.mode=L;break}for(;Se--;)A.lens[A.have++]=et}}if(A.mode===L)break;if(A.lens[256]===0){j.msg="invalid code -- missing end-of-block",A.mode=L;break}if(A.lenbits=9,kt={bits:A.lenbits},vt=l(c,A.lens,0,A.nlen,A.lencode,0,A.work,kt),A.lenbits=kt.bits,vt){j.msg="invalid literal/lengths set",A.mode=L;break}if(A.distbits=6,A.distcode=A.distdyn,kt={bits:A.distbits},vt=l(v,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,kt),A.distbits=kt.bits,vt){j.msg="invalid distances set",A.mode=L;break}if(A.mode=je,ie===y)break e;case je:A.mode=Ce;case Ce:if(te>=6&&k>=258){j.next_out=ee,j.avail_out=k,j.next_in=m,j.avail_in=te,A.hold=U,A.bits=J,u(j,De),ee=j.next_out,Oe=j.output,k=j.avail_out,m=j.next_in,he=j.input,te=j.avail_in,U=A.hold,J=A.bits,A.mode===se&&(A.back=-1);break}for(A.back=0;Qe=A.lencode[U&(1<<A.lenbits)-1],Ze=Qe>>>24,rt=Qe>>>16&255,ht=Qe&65535,!(Ze<=J);){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(rt&&!(rt&240)){for(pt=Ze,Yt=rt,$t=ht;Qe=A.lencode[$t+((U&(1<<pt+Yt)-1)>>pt)],Ze=Qe>>>24,rt=Qe>>>16&255,ht=Qe&65535,!(pt+Ze<=J);){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}U>>>=pt,J-=pt,A.back+=pt}if(U>>>=Ze,J-=Ze,A.back+=Ze,A.length=ht,rt===0){A.mode=Le;break}if(rt&32){A.back=-1,A.mode=se;break}if(rt&64){j.msg="invalid literal/length code",A.mode=L;break}A.extra=rt&15,A.mode=Be;case Be:if(A.extra){for(Et=A.extra;J<Et;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.length+=U&(1<<A.extra)-1,U>>>=A.extra,J-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=Ue;case Ue:for(;Qe=A.distcode[U&(1<<A.distbits)-1],Ze=Qe>>>24,rt=Qe>>>16&255,ht=Qe&65535,!(Ze<=J);){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(!(rt&240)){for(pt=Ze,Yt=rt,$t=ht;Qe=A.distcode[$t+((U&(1<<pt+Yt)-1)>>pt)],Ze=Qe>>>24,rt=Qe>>>16&255,ht=Qe&65535,!(pt+Ze<=J);){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}U>>>=pt,J-=pt,A.back+=pt}if(U>>>=Ze,J-=Ze,A.back+=Ze,rt&64){j.msg="invalid distance code",A.mode=L;break}A.offset=ht,A.extra=rt&15,A.mode=Re;case Re:if(A.extra){for(Et=A.extra;J<Et;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}A.offset+=U&(1<<A.extra)-1,U>>>=A.extra,J-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){j.msg="invalid distance too far back",A.mode=L;break}A.mode=He;case He:if(k===0)break e;if(Se=De-k,A.offset>Se){if(Se=A.offset-Se,Se>A.whave&&A.sane){j.msg="invalid distance too far back",A.mode=L;break}Se>A.wnext?(Se-=A.wnext,qe=A.wsize-Se):qe=A.wnext-Se,Se>A.length&&(Se=A.length),Ct=A.window}else Ct=Oe,qe=ee-A.offset,Se=A.length;Se>k&&(Se=k),k-=Se,A.length-=Se;do Oe[ee++]=Ct[qe++];while(--Se);A.length===0&&(A.mode=Ce);break;case Le:if(k===0)break e;Oe[ee++]=A.length,k--,A.mode=Ce;break;case b:if(A.wrap){for(;J<32;){if(te===0)break e;te--,U|=he[m++]<<J,J+=8}if(De-=k,j.total_out+=De,A.total+=De,De&&(j.adler=A.check=A.flags?a(A.check,Oe,De,ee-De):s(A.check,Oe,De,ee-De)),De=k,(A.flags?U:we(U))!==A.check){j.msg="incorrect data check",A.mode=L;break}U=0,J=0}A.mode=re;case re:if(A.wrap&&A.flags){for(;J<32;){if(te===0)break e;te--,U+=he[m++]<<J,J+=8}if(U!==(A.total&4294967295)){j.msg="incorrect length check",A.mode=L;break}U=0,J=0}A.mode=Q;case Q:vt=d;break e;case L:vt=C;break e;case O:return _;case H:default:return E}return j.next_out=ee,j.avail_out=k,j.next_in=m,j.avail_in=te,A.hold=U,A.bits=J,(A.wsize||De!==j.avail_out&&A.mode<L&&(A.mode<b||ie!==p))&&wt(j,j.output,j.next_out,De-j.avail_out),Ne-=j.avail_in,De-=j.avail_out,j.total_in+=Ne,j.total_out+=De,A.total+=De,A.wrap&&De&&(j.adler=A.check=A.flags?a(A.check,Oe,De,j.next_out-De):s(A.check,Oe,De,j.next_out-De)),j.data_type=A.bits+(A.last?64:0)+(A.mode===se?128:0)+(A.mode===je||A.mode===M?256:0),(Ne===0&&De===0||ie===p)&&vt===h&&(vt=D),vt}function le(j){if(!j||!j.state)return E;var ie=j.state;return ie.window&&(ie.window=null),j.state=null,h}function ge(j,ie){var A;return!j||!j.state||(A=j.state,!(A.wrap&2))?E:(A.head=ie,ie.done=!1,h)}function ke(j,ie){var A=ie.length,he,Oe,m;return!j||!j.state||(he=j.state,he.wrap!==0&&he.mode!==fe)?E:he.mode===fe&&(Oe=1,Oe=s(Oe,ie,A,0),Oe!==he.check)?C:(m=wt(j,ie,A,A),m?(he.mode=O,_):(he.havedict=1,h))}i.inflateReset=Pe,i.inflateReset2=ze,i.inflateResetKeep=Te,i.inflateInit=st,i.inflateInit2=Je,i.inflate=I,i.inflateEnd=le,i.inflateGetHeader=ge,i.inflateSetDictionary=ke,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var n=t("../utils/common"),s=15,a=852,u=592,l=0,f=1,c=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,g,E,C,_,D,S,R){var z=R.bits,F=0,X=0,N=0,q=0,x=0,$=0,ce=0,K=0,fe=0,se=0,Ae,Y,M,Ee,de,me=null,Fe=0,je,Ce=new n.Buf16(s+1),Be=new n.Buf16(s+1),Ue=null,Re=0,He,Le,b;for(F=0;F<=s;F++)Ce[F]=0;for(X=0;X<C;X++)Ce[g[E+X]]++;for(x=z,q=s;q>=1&&Ce[q]===0;q--);if(x>q&&(x=q),q===0)return _[D++]=1<<24|64<<16|0,_[D++]=1<<24|64<<16|0,R.bits=1,0;for(N=1;N<q&&Ce[N]===0;N++);for(x<N&&(x=N),K=1,F=1;F<=s;F++)if(K<<=1,K-=Ce[F],K<0)return-1;if(K>0&&(d===l||q!==1))return-1;for(Be[1]=0,F=1;F<s;F++)Be[F+1]=Be[F]+Ce[F];for(X=0;X<C;X++)g[E+X]!==0&&(S[Be[g[E+X]]++]=X);if(d===l?(me=Ue=S,je=19):d===f?(me=v,Fe-=257,Ue=p,Re-=257,je=256):(me=w,Ue=y,je=-1),se=0,X=0,F=N,de=D,$=x,ce=0,M=-1,fe=1<<x,Ee=fe-1,d===f&&fe>a||d===c&&fe>u)return 1;for(;;){He=F-ce,S[X]<je?(Le=0,b=S[X]):S[X]>je?(Le=Ue[Re+S[X]],b=me[Fe+S[X]]):(Le=32+64,b=0),Ae=1<<F-ce,Y=1<<$,N=Y;do Y-=Ae,_[de+(se>>ce)+Y]=He<<24|Le<<16|b|0;while(Y!==0);for(Ae=1<<F-1;se&Ae;)Ae>>=1;if(Ae!==0?(se&=Ae-1,se+=Ae):se=0,X++,--Ce[F]===0){if(F===q)break;F=g[E+S[X]]}if(F>x&&(se&Ee)!==M){for(ce===0&&(ce=x),de+=N,$=F-ce,K=1<<$;$+ce<q&&(K-=Ce[$+ce],!(K<=0));)$++,K<<=1;if(fe+=1<<$,d===f&&fe>a||d===c&&fe>u)return 1;M=se&Ee,_[M]=x<<24|$<<16|de-D|0}}return se!==0&&(_[de+se]=F-ce<<24|64<<16|0),R.bits=x,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var n=t("../utils/common"),s=4,a=0,u=1,l=2;function f(I){for(var le=I.length;--le>=0;)I[le]=0}var c=0,v=1,p=2,w=3,y=258,h=29,d=256,g=d+1+h,E=30,C=19,_=2*g+1,D=15,S=16,R=7,z=256,F=16,X=17,N=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=512,fe=new Array((g+2)*2);f(fe);var se=new Array(E*2);f(se);var Ae=new Array(K);f(Ae);var Y=new Array(y-w+1);f(Y);var M=new Array(h);f(M);var Ee=new Array(E);f(Ee);function de(I,le,ge,ke,j){this.static_tree=I,this.extra_bits=le,this.extra_base=ge,this.elems=ke,this.max_length=j,this.has_stree=I&&I.length}var me,Fe,je;function Ce(I,le){this.dyn_tree=I,this.max_code=0,this.stat_desc=le}function Be(I){return I<256?Ae[I]:Ae[256+(I>>>7)]}function Ue(I,le){I.pending_buf[I.pending++]=le&255,I.pending_buf[I.pending++]=le>>>8&255}function Re(I,le,ge){I.bi_valid>S-ge?(I.bi_buf|=le<<I.bi_valid&65535,Ue(I,I.bi_buf),I.bi_buf=le>>S-I.bi_valid,I.bi_valid+=ge-S):(I.bi_buf|=le<<I.bi_valid&65535,I.bi_valid+=ge)}function He(I,le,ge){Re(I,ge[le*2],ge[le*2+1])}function Le(I,le){var ge=0;do ge|=I&1,I>>>=1,ge<<=1;while(--le>0);return ge>>>1}function b(I){I.bi_valid===16?(Ue(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):I.bi_valid>=8&&(I.pending_buf[I.pending++]=I.bi_buf&255,I.bi_buf>>=8,I.bi_valid-=8)}function re(I,le){var ge=le.dyn_tree,ke=le.max_code,j=le.stat_desc.static_tree,ie=le.stat_desc.has_stree,A=le.stat_desc.extra_bits,he=le.stat_desc.extra_base,Oe=le.stat_desc.max_length,m,ee,te,k,U,J,Ne=0;for(k=0;k<=D;k++)I.bl_count[k]=0;for(ge[I.heap[I.heap_max]*2+1]=0,m=I.heap_max+1;m<_;m++)ee=I.heap[m],k=ge[ge[ee*2+1]*2+1]+1,k>Oe&&(k=Oe,Ne++),ge[ee*2+1]=k,!(ee>ke)&&(I.bl_count[k]++,U=0,ee>=he&&(U=A[ee-he]),J=ge[ee*2],I.opt_len+=J*(k+U),ie&&(I.static_len+=J*(j[ee*2+1]+U)));if(Ne!==0){do{for(k=Oe-1;I.bl_count[k]===0;)k--;I.bl_count[k]--,I.bl_count[k+1]+=2,I.bl_count[Oe]--,Ne-=2}while(Ne>0);for(k=Oe;k!==0;k--)for(ee=I.bl_count[k];ee!==0;)te=I.heap[--m],!(te>ke)&&(ge[te*2+1]!==k&&(I.opt_len+=(k-ge[te*2+1])*ge[te*2],ge[te*2+1]=k),ee--)}}function Q(I,le,ge){var ke=new Array(D+1),j=0,ie,A;for(ie=1;ie<=D;ie++)ke[ie]=j=j+ge[ie-1]<<1;for(A=0;A<=le;A++){var he=I[A*2+1];he!==0&&(I[A*2]=Le(ke[he]++,he))}}function L(){var I,le,ge,ke,j,ie=new Array(D+1);for(ge=0,ke=0;ke<h-1;ke++)for(M[ke]=ge,I=0;I<1<<q[ke];I++)Y[ge++]=ke;for(Y[ge-1]=ke,j=0,ke=0;ke<16;ke++)for(Ee[ke]=j,I=0;I<1<<x[ke];I++)Ae[j++]=ke;for(j>>=7;ke<E;ke++)for(Ee[ke]=j<<7,I=0;I<1<<x[ke]-7;I++)Ae[256+j++]=ke;for(le=0;le<=D;le++)ie[le]=0;for(I=0;I<=143;)fe[I*2+1]=8,I++,ie[8]++;for(;I<=255;)fe[I*2+1]=9,I++,ie[9]++;for(;I<=279;)fe[I*2+1]=7,I++,ie[7]++;for(;I<=287;)fe[I*2+1]=8,I++,ie[8]++;for(Q(fe,g+1,ie),I=0;I<E;I++)se[I*2+1]=5,se[I*2]=Le(I,5);me=new de(fe,q,d+1,g,D),Fe=new de(se,x,0,E,D),je=new de(new Array(0),$,0,C,R)}function O(I){var le;for(le=0;le<g;le++)I.dyn_ltree[le*2]=0;for(le=0;le<E;le++)I.dyn_dtree[le*2]=0;for(le=0;le<C;le++)I.bl_tree[le*2]=0;I.dyn_ltree[z*2]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function H(I){I.bi_valid>8?Ue(I,I.bi_buf):I.bi_valid>0&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function ae(I,le,ge,ke){H(I),ke&&(Ue(I,ge),Ue(I,~ge)),n.arraySet(I.pending_buf,I.window,le,ge,I.pending),I.pending+=ge}function oe(I,le,ge,ke){var j=le*2,ie=ge*2;return I[j]<I[ie]||I[j]===I[ie]&&ke[le]<=ke[ge]}function V(I,le,ge){for(var ke=I.heap[ge],j=ge<<1;j<=I.heap_len&&(j<I.heap_len&&oe(le,I.heap[j+1],I.heap[j],I.depth)&&j++,!oe(le,ke,I.heap[j],I.depth));)I.heap[ge]=I.heap[j],ge=j,j<<=1;I.heap[ge]=ke}function ne(I,le,ge){var ke,j,ie=0,A,he;if(I.last_lit!==0)do ke=I.pending_buf[I.d_buf+ie*2]<<8|I.pending_buf[I.d_buf+ie*2+1],j=I.pending_buf[I.l_buf+ie],ie++,ke===0?He(I,j,le):(A=Y[j],He(I,A+d+1,le),he=q[A],he!==0&&(j-=M[A],Re(I,j,he)),ke--,A=Be(ke),He(I,A,ge),he=x[A],he!==0&&(ke-=Ee[A],Re(I,ke,he)));while(ie<I.last_lit);He(I,z,le)}function we(I,le){var ge=le.dyn_tree,ke=le.stat_desc.static_tree,j=le.stat_desc.has_stree,ie=le.stat_desc.elems,A,he,Oe=-1,m;for(I.heap_len=0,I.heap_max=_,A=0;A<ie;A++)ge[A*2]!==0?(I.heap[++I.heap_len]=Oe=A,I.depth[A]=0):ge[A*2+1]=0;for(;I.heap_len<2;)m=I.heap[++I.heap_len]=Oe<2?++Oe:0,ge[m*2]=1,I.depth[m]=0,I.opt_len--,j&&(I.static_len-=ke[m*2+1]);for(le.max_code=Oe,A=I.heap_len>>1;A>=1;A--)V(I,ge,A);m=ie;do A=I.heap[1],I.heap[1]=I.heap[I.heap_len--],V(I,ge,1),he=I.heap[1],I.heap[--I.heap_max]=A,I.heap[--I.heap_max]=he,ge[m*2]=ge[A*2]+ge[he*2],I.depth[m]=(I.depth[A]>=I.depth[he]?I.depth[A]:I.depth[he])+1,ge[A*2+1]=ge[he*2+1]=m,I.heap[1]=m++,V(I,ge,1);while(I.heap_len>=2);I.heap[--I.heap_max]=I.heap[1],re(I,le),Q(ge,Oe,I.bl_count)}function ve(I,le,ge){var ke,j=-1,ie,A=le[0*2+1],he=0,Oe=7,m=4;for(A===0&&(Oe=138,m=3),le[(ge+1)*2+1]=65535,ke=0;ke<=ge;ke++)ie=A,A=le[(ke+1)*2+1],!(++he<Oe&&ie===A)&&(he<m?I.bl_tree[ie*2]+=he:ie!==0?(ie!==j&&I.bl_tree[ie*2]++,I.bl_tree[F*2]++):he<=10?I.bl_tree[X*2]++:I.bl_tree[N*2]++,he=0,j=ie,A===0?(Oe=138,m=3):ie===A?(Oe=6,m=3):(Oe=7,m=4))}function Te(I,le,ge){var ke,j=-1,ie,A=le[0*2+1],he=0,Oe=7,m=4;for(A===0&&(Oe=138,m=3),ke=0;ke<=ge;ke++)if(ie=A,A=le[(ke+1)*2+1],!(++he<Oe&&ie===A)){if(he<m)do He(I,ie,I.bl_tree);while(--he!==0);else ie!==0?(ie!==j&&(He(I,ie,I.bl_tree),he--),He(I,F,I.bl_tree),Re(I,he-3,2)):he<=10?(He(I,X,I.bl_tree),Re(I,he-3,3)):(He(I,N,I.bl_tree),Re(I,he-11,7));he=0,j=ie,A===0?(Oe=138,m=3):ie===A?(Oe=6,m=3):(Oe=7,m=4)}}function Pe(I){var le;for(ve(I,I.dyn_ltree,I.l_desc.max_code),ve(I,I.dyn_dtree,I.d_desc.max_code),we(I,I.bl_desc),le=C-1;le>=3&&I.bl_tree[ce[le]*2+1]===0;le--);return I.opt_len+=3*(le+1)+5+5+4,le}function ze(I,le,ge,ke){var j;for(Re(I,le-257,5),Re(I,ge-1,5),Re(I,ke-4,4),j=0;j<ke;j++)Re(I,I.bl_tree[ce[j]*2+1],3);Te(I,I.dyn_ltree,le-1),Te(I,I.dyn_dtree,ge-1)}function Je(I){var le=4093624447,ge;for(ge=0;ge<=31;ge++,le>>>=1)if(le&1&&I.dyn_ltree[ge*2]!==0)return a;if(I.dyn_ltree[9*2]!==0||I.dyn_ltree[10*2]!==0||I.dyn_ltree[13*2]!==0)return u;for(ge=32;ge<d;ge++)if(I.dyn_ltree[ge*2]!==0)return u;return a}var st=!1;function at(I){st||(L(),st=!0),I.l_desc=new Ce(I.dyn_ltree,me),I.d_desc=new Ce(I.dyn_dtree,Fe),I.bl_desc=new Ce(I.bl_tree,je),I.bi_buf=0,I.bi_valid=0,O(I)}function ct(I,le,ge,ke){Re(I,(c<<1)+(ke?1:0),3),ae(I,le,ge,!0)}function Me(I){Re(I,v<<1,3),He(I,z,fe),b(I)}function ut(I,le,ge,ke){var j,ie,A=0;I.level>0?(I.strm.data_type===l&&(I.strm.data_type=Je(I)),we(I,I.l_desc),we(I,I.d_desc),A=Pe(I),j=I.opt_len+3+7>>>3,ie=I.static_len+3+7>>>3,ie<=j&&(j=ie)):j=ie=ge+5,ge+4<=j&&le!==-1?ct(I,le,ge,ke):I.strategy===s||ie===j?(Re(I,(v<<1)+(ke?1:0),3),ne(I,fe,se)):(Re(I,(p<<1)+(ke?1:0),3),ze(I,I.l_desc.max_code+1,I.d_desc.max_code+1,A+1),ne(I,I.dyn_ltree,I.dyn_dtree)),O(I),ke&&H(I)}function wt(I,le,ge){return I.pending_buf[I.d_buf+I.last_lit*2]=le>>>8&255,I.pending_buf[I.d_buf+I.last_lit*2+1]=le&255,I.pending_buf[I.l_buf+I.last_lit]=ge&255,I.last_lit++,le===0?I.dyn_ltree[ge*2]++:(I.matches++,le--,I.dyn_ltree[(Y[ge]+d+1)*2]++,I.dyn_dtree[Be(le)*2]++),I.last_lit===I.lit_bufsize-1}i._tr_init=at,i._tr_stored_block=ct,i._tr_flush_block=ut,i._tr_tally=wt,i._tr_align=Me},{"../utils/common":41}],53:[function(t,r,i){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=n},{}],54:[function(t,r,i){(function(n){(function(s,a){if(s.setImmediate)return;var u=1,l={},f=!1,c=s.document,v;function p(R){typeof R!="function"&&(R=new Function(""+R));for(var z=new Array(arguments.length-1),F=0;F<z.length;F++)z[F]=arguments[F+1];var X={callback:R,args:z};return l[u]=X,v(u),u++}function w(R){delete l[R]}function y(R){var z=R.callback,F=R.args;switch(F.length){case 0:z();break;case 1:z(F[0]);break;case 2:z(F[0],F[1]);break;case 3:z(F[0],F[1],F[2]);break;default:z.apply(a,F);break}}function h(R){if(f)setTimeout(h,0,R);else{var z=l[R];if(z){f=!0;try{y(z)}finally{w(R),f=!1}}}}function d(){v=function(R){process.nextTick(function(){h(R)})}}function g(){if(s.postMessage&&!s.importScripts){var R=!0,z=s.onmessage;return s.onmessage=function(){R=!1},s.postMessage("","*"),s.onmessage=z,R}}function E(){var R="setImmediate$"+Math.random()+"$",z=function(F){F.source===s&&typeof F.data=="string"&&F.data.indexOf(R)===0&&h(+F.data.slice(R.length))};s.addEventListener?s.addEventListener("message",z,!1):s.attachEvent("onmessage",z),v=function(F){s.postMessage(R+F,"*")}}function C(){var R=new MessageChannel;R.port1.onmessage=function(z){var F=z.data;h(F)},v=function(z){R.port2.postMessage(z)}}function _(){var R=c.documentElement;v=function(z){var F=c.createElement("script");F.onreadystatechange=function(){h(z),F.onreadystatechange=null,R.removeChild(F),F=null},R.appendChild(F)}}function D(){v=function(R){setTimeout(h,0,R)}}var S=Object.getPrototypeOf&&Object.getPrototypeOf(s);S=S&&S.setTimeout?S:s,{}.toString.call(s.process)==="[object process]"?d():g()?E():s.MessageChannel?C():c&&"onreadystatechange"in c.createElement("script")?_():D(),S.setImmediate=p,S.clearImmediate=w})(typeof self>"u"?typeof n>"u"?this:n:self)}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Hs);var Qu=Hs.exports;const el=fr(Qu);class tl{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new el}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return Dr(e,"binary").then(function(r){return this.zip.loadAsync(r,{base64:t})}.bind(this))}request(e,t){var r=new Ve,i,n=new Wt(e);return t||(t=n.extension),t=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then(function(s){let a=this.handleResponse(s,t);r.resolve(a)}.bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):Ar(t)?r=Lt(e,"text/xml"):t=="xhtml"?r=Lt(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Lt(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||ar.lookup(i.name),i.async("uint8array").then(function(n){return new Blob([n],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(n){return n})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||ar.lookup(i.name),i.async("base64").then(function(n){return"data:"+t+";base64,"+n})}createUrl(e,t){var r=new Ve,i=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(s=this.getBase64(e),s&&s.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(s=this.getBlob(e),s&&s.then(function(u){n=i.createObjectURL(u),this.urlCache[e]=n,r.resolve(n)}.bind(this))),s||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var Zs={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(o,e){(function(t){o.exports=t()})(function(){return function t(r,i,n){function s(l,f){if(!i[l]){if(!r[l]){var c=typeof Dt=="function"&&Dt;if(!f&&c)return c(l,!0);if(a)return a(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var p=i[l]={exports:{}};r[l][0].call(p.exports,function(w){var y=r[l][1][w];return s(y||w)},p,p.exports,t,r,i,n)}return i[l].exports}for(var a=typeof Dt=="function"&&Dt,u=0;u<n.length;u++)s(n[u]);return s}({1:[function(t,r,i){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var u=0,l=new s(w),f=n.document.createTextNode("");l.observe(f,{characterData:!0}),a=function(){f.data=u=++u%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var c=new n.MessageChannel;c.port1.onmessage=w,a=function(){c.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var h=n.document.createElement("script");h.onreadystatechange=function(){w(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:a=function(){setTimeout(w,0)};var v,p=[];function w(){v=!0;for(var h,d,g=p.length;g;){for(d=p,p=[],h=-1;++h<g;)d[h]();g=p.length}v=!1}r.exports=y;function y(h){p.push(h)===1&&!v&&a()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,i){var n=t(1);function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],f=["PENDING"];r.exports=c;function c(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==s&&y(this,_)}c.prototype.catch=function(_){return this.then(null,_)},c.prototype.then=function(_,D){if(typeof _!="function"&&this.state===l||typeof D!="function"&&this.state===u)return this;var S=new this.constructor(s);if(this.state!==f){var R=this.state===l?_:D;p(S,R,this.outcome)}else this.queue.push(new v(S,_,D));return S};function v(_,D,S){this.promise=_,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},v.prototype.otherCallFulfilled=function(_){p(this.promise,this.onFulfilled,_)},v.prototype.callRejected=function(_){a.reject(this.promise,_)},v.prototype.otherCallRejected=function(_){p(this.promise,this.onRejected,_)};function p(_,D,S){n(function(){var R;try{R=D(S)}catch(z){return a.reject(_,z)}R===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,R)})}a.resolve=function(_,D){var S=h(w,D);if(S.status==="error")return a.reject(_,S.value);var R=S.value;if(R)y(_,R);else{_.state=l,_.outcome=D;for(var z=-1,F=_.queue.length;++z<F;)_.queue[z].callFulfilled(D)}return _},a.reject=function(_,D){_.state=u,_.outcome=D;for(var S=-1,R=_.queue.length;++S<R;)_.queue[S].callRejected(D);return _};function w(_){var D=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof D=="function")return function(){D.apply(_,arguments)}}function y(_,D){var S=!1;function R(N){S||(S=!0,a.reject(_,N))}function z(N){S||(S=!0,a.resolve(_,N))}function F(){D(z,R)}var X=h(F);X.status==="error"&&R(X.value)}function h(_,D){var S={};try{S.value=_(D),S.status="success"}catch(R){S.status="error",S.value=R}return S}c.resolve=d;function d(_){return _ instanceof this?_:a.resolve(new this(s),_)}c.reject=g;function g(_){var D=new this(s);return a.reject(D,_)}c.all=E;function E(_){var D=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,R=!1;if(!S)return this.resolve([]);for(var z=new Array(S),F=0,X=-1,N=new this(s);++X<S;)q(_[X],X);return N;function q(x,$){D.resolve(x).then(ce,function(K){R||(R=!0,a.reject(N,K))});function ce(K){z[$]=K,++F===S&&!R&&(R=!0,a.resolve(N,z))}}}c.race=C;function C(_){var D=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,R=!1;if(!S)return this.resolve([]);for(var z=-1,F=new this(s);++z<S;)X(_[z]);return F;function X(N){D.resolve(N).then(function(q){R||(R=!0,a.resolve(F,q))},function(q){R||(R=!0,a.reject(F,q))})}}},{1:1}],3:[function(t,r,i){(function(n){typeof n.Promise!="function"&&(n.Promise=t(2))}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,i){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function s(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var T=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!T||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(T,P){T=T||[],P=P||{};try{return new Blob(T,P)}catch(W){if(W.name!=="TypeError")throw W;for(var B=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Z=new B,G=0;G<T.length;G+=1)Z.append(T[G]);return Z.getBlob(P.type)}}typeof Promise>"u"&&t(3);var c=Promise;function v(T,P){P&&T.then(function(B){P(null,B)},function(B){P(B)})}function p(T,P,B){typeof P=="function"&&T.then(P),typeof B=="function"&&T.catch(B)}function w(T){return typeof T!="string"&&(console.warn(T+" used as a key, but it is not a string."),T=String(T)),T}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",d=void 0,g={},E=Object.prototype.toString,C="readonly",_="readwrite";function D(T){for(var P=T.length,B=new ArrayBuffer(P),Z=new Uint8Array(B),G=0;G<P;G++)Z[G]=T.charCodeAt(G);return B}function S(T){return new c(function(P){var B=T.transaction(h,_),Z=f([""]);B.objectStore(h).put(Z,"key"),B.onabort=function(G){G.preventDefault(),G.stopPropagation(),P(!1)},B.oncomplete=function(){var G=navigator.userAgent.match(/Chrome\/(\d+)/),W=navigator.userAgent.match(/Edge\//);P(W||!G||parseInt(G[1],10)>=43)}}).catch(function(){return!1})}function R(T){return typeof d=="boolean"?c.resolve(d):S(T).then(function(P){return d=P,d})}function z(T){var P=g[T.name],B={};B.promise=new c(function(Z,G){B.resolve=Z,B.reject=G}),P.deferredOperations.push(B),P.dbReady?P.dbReady=P.dbReady.then(function(){return B.promise}):P.dbReady=B.promise}function F(T){var P=g[T.name],B=P.deferredOperations.pop();if(B)return B.resolve(),B.promise}function X(T,P){var B=g[T.name],Z=B.deferredOperations.pop();if(Z)return Z.reject(P),Z.promise}function N(T,P){return new c(function(B,Z){if(g[T.name]=g[T.name]||M(),T.db)if(P)z(T),T.db.close();else return B(T.db);var G=[T.name];P&&G.push(T.version);var W=u.open.apply(u,G);P&&(W.onupgradeneeded=function(ue){var pe=W.result;try{pe.createObjectStore(T.storeName),ue.oldVersion<=1&&pe.createObjectStore(h)}catch(ye){if(ye.name==="ConstraintError")console.warn('The database "'+T.name+'" has been upgraded from version '+ue.oldVersion+" to version "+ue.newVersion+', but the storage "'+T.storeName+'" already exists.');else throw ye}}),W.onerror=function(ue){ue.preventDefault(),Z(W.error)},W.onsuccess=function(){var ue=W.result;ue.onversionchange=function(pe){pe.target.close()},B(ue),F(T)}})}function q(T){return N(T,!1)}function x(T){return N(T,!0)}function $(T,P){if(!T.db)return!0;var B=!T.db.objectStoreNames.contains(T.storeName),Z=T.version<T.db.version,G=T.version>T.db.version;if(Z&&(T.version!==P&&console.warn('The database "'+T.name+`" can't be downgraded from version `+T.db.version+" to version "+T.version+"."),T.version=T.db.version),G||B){if(B){var W=T.db.version+1;W>T.version&&(T.version=W)}return!0}return!1}function ce(T){return new c(function(P,B){var Z=new FileReader;Z.onerror=B,Z.onloadend=function(G){var W=btoa(G.target.result||"");P({__local_forage_encoded_blob:!0,data:W,type:T.type})},Z.readAsBinaryString(T)})}function K(T){var P=D(atob(T.data));return f([P],{type:T.type})}function fe(T){return T&&T.__local_forage_encoded_blob}function se(T){var P=this,B=P._initReady().then(function(){var Z=g[P._dbInfo.name];if(Z&&Z.dbReady)return Z.dbReady});return p(B,T,T),B}function Ae(T){z(T);for(var P=g[T.name],B=P.forages,Z=0;Z<B.length;Z++){var G=B[Z];G._dbInfo.db&&(G._dbInfo.db.close(),G._dbInfo.db=null)}return T.db=null,q(T).then(function(W){return T.db=W,$(T)?x(T):W}).then(function(W){T.db=P.db=W;for(var ue=0;ue<B.length;ue++)B[ue]._dbInfo.db=W}).catch(function(W){throw X(T,W),W})}function Y(T,P,B,Z){Z===void 0&&(Z=1);try{var G=T.db.transaction(T.storeName,P);B(null,G)}catch(W){if(Z>0&&(!T.db||W.name==="InvalidStateError"||W.name==="NotFoundError"))return c.resolve().then(function(){if(!T.db||W.name==="NotFoundError"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),x(T)}).then(function(){return Ae(T).then(function(){Y(T,P,B,Z-1)})}).catch(B);B(W)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ee(T){var P=this,B={db:null};if(T)for(var Z in T)B[Z]=T[Z];var G=g[B.name];G||(G=M(),g[B.name]=G),G.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=se);var W=[];function ue(){return c.resolve()}for(var pe=0;pe<G.forages.length;pe++){var ye=G.forages[pe];ye!==P&&W.push(ye._initReady().catch(ue))}var _e=G.forages.slice(0);return c.all(W).then(function(){return B.db=G.db,q(B)}).then(function(be){return B.db=be,$(B,P._defaultConfig.version)?x(B):be}).then(function(be){B.db=G.db=be,P._dbInfo=B;for(var Ie=0;Ie<_e.length;Ie++){var We=_e[Ie];We!==P&&(We._dbInfo.db=B.db,We._dbInfo.version=B.version)}})}function de(T,P){var B=this;T=w(T);var Z=new c(function(G,W){B.ready().then(function(){Y(B._dbInfo,C,function(ue,pe){if(ue)return W(ue);try{var ye=pe.objectStore(B._dbInfo.storeName),_e=ye.get(T);_e.onsuccess=function(){var be=_e.result;be===void 0&&(be=null),fe(be)&&(be=K(be)),G(be)},_e.onerror=function(){W(_e.error)}}catch(be){W(be)}})}).catch(W)});return v(Z,P),Z}function me(T,P){var B=this,Z=new c(function(G,W){B.ready().then(function(){Y(B._dbInfo,C,function(ue,pe){if(ue)return W(ue);try{var ye=pe.objectStore(B._dbInfo.storeName),_e=ye.openCursor(),be=1;_e.onsuccess=function(){var Ie=_e.result;if(Ie){var We=Ie.value;fe(We)&&(We=K(We));var Ye=T(We,Ie.key,be++);Ye!==void 0?G(Ye):Ie.continue()}else G()},_e.onerror=function(){W(_e.error)}}catch(Ie){W(Ie)}})}).catch(W)});return v(Z,P),Z}function Fe(T,P,B){var Z=this;T=w(T);var G=new c(function(W,ue){var pe;Z.ready().then(function(){return pe=Z._dbInfo,E.call(P)==="[object Blob]"?R(pe.db).then(function(ye){return ye?P:ce(P)}):P}).then(function(ye){Y(Z._dbInfo,_,function(_e,be){if(_e)return ue(_e);try{var Ie=be.objectStore(Z._dbInfo.storeName);ye===null&&(ye=void 0);var We=Ie.put(ye,T);be.oncomplete=function(){ye===void 0&&(ye=null),W(ye)},be.onabort=be.onerror=function(){var Ye=We.error?We.error:We.transaction.error;ue(Ye)}}catch(Ye){ue(Ye)}})}).catch(ue)});return v(G,B),G}function je(T,P){var B=this;T=w(T);var Z=new c(function(G,W){B.ready().then(function(){Y(B._dbInfo,_,function(ue,pe){if(ue)return W(ue);try{var ye=pe.objectStore(B._dbInfo.storeName),_e=ye.delete(T);pe.oncomplete=function(){G()},pe.onerror=function(){W(_e.error)},pe.onabort=function(){var be=_e.error?_e.error:_e.transaction.error;W(be)}}catch(be){W(be)}})}).catch(W)});return v(Z,P),Z}function Ce(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){Y(P._dbInfo,_,function(W,ue){if(W)return G(W);try{var pe=ue.objectStore(P._dbInfo.storeName),ye=pe.clear();ue.oncomplete=function(){Z()},ue.onabort=ue.onerror=function(){var _e=ye.error?ye.error:ye.transaction.error;G(_e)}}catch(_e){G(_e)}})}).catch(G)});return v(B,T),B}function Be(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){Y(P._dbInfo,C,function(W,ue){if(W)return G(W);try{var pe=ue.objectStore(P._dbInfo.storeName),ye=pe.count();ye.onsuccess=function(){Z(ye.result)},ye.onerror=function(){G(ye.error)}}catch(_e){G(_e)}})}).catch(G)});return v(B,T),B}function Ue(T,P){var B=this,Z=new c(function(G,W){if(T<0){G(null);return}B.ready().then(function(){Y(B._dbInfo,C,function(ue,pe){if(ue)return W(ue);try{var ye=pe.objectStore(B._dbInfo.storeName),_e=!1,be=ye.openKeyCursor();be.onsuccess=function(){var Ie=be.result;if(!Ie){G(null);return}T===0||_e?G(Ie.key):(_e=!0,Ie.advance(T))},be.onerror=function(){W(be.error)}}catch(Ie){W(Ie)}})}).catch(W)});return v(Z,P),Z}function Re(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){Y(P._dbInfo,C,function(W,ue){if(W)return G(W);try{var pe=ue.objectStore(P._dbInfo.storeName),ye=pe.openKeyCursor(),_e=[];ye.onsuccess=function(){var be=ye.result;if(!be){Z(_e);return}_e.push(be.key),be.continue()},ye.onerror=function(){G(ye.error)}}catch(be){G(be)}})}).catch(G)});return v(B,T),B}function He(T,P){P=y.apply(this,arguments);var B=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||B.name,T.storeName=T.storeName||B.storeName);var Z=this,G;if(!T.name)G=c.reject("Invalid arguments");else{var W=T.name===B.name&&Z._dbInfo.db,ue=W?c.resolve(Z._dbInfo.db):q(T).then(function(pe){var ye=g[T.name],_e=ye.forages;ye.db=pe;for(var be=0;be<_e.length;be++)_e[be]._dbInfo.db=pe;return pe});T.storeName?G=ue.then(function(pe){if(pe.objectStoreNames.contains(T.storeName)){var ye=pe.version+1;z(T);var _e=g[T.name],be=_e.forages;pe.close();for(var Ie=0;Ie<be.length;Ie++){var We=be[Ie];We._dbInfo.db=null,We._dbInfo.version=ye}var Ye=new c(function($e,ot){var it=u.open(T.name,ye);it.onerror=function(xt){var pr=it.result;pr.close(),ot(xt)},it.onupgradeneeded=function(){var xt=it.result;xt.deleteObjectStore(T.storeName)},it.onsuccess=function(){var xt=it.result;xt.close(),$e(xt)}});return Ye.then(function($e){_e.db=$e;for(var ot=0;ot<be.length;ot++){var it=be[ot];it._dbInfo.db=$e,F(it._dbInfo)}}).catch(function($e){throw(X(T,$e)||c.resolve()).catch(function(){}),$e})}}):G=ue.then(function(pe){z(T);var ye=g[T.name],_e=ye.forages;pe.close();for(var be=0;be<_e.length;be++){var Ie=_e[be];Ie._dbInfo.db=null}var We=new c(function(Ye,$e){var ot=u.deleteDatabase(T.name);ot.onerror=function(){var it=ot.result;it&&it.close(),$e(ot.error)},ot.onblocked=function(){console.warn('dropInstance blocked for database "'+T.name+'" until all open connections are closed')},ot.onsuccess=function(){var it=ot.result;it&&it.close(),Ye(it)}});return We.then(function(Ye){ye.db=Ye;for(var $e=0;$e<_e.length;$e++){var ot=_e[$e];F(ot._dbInfo)}}).catch(function(Ye){throw(X(T,Ye)||c.resolve()).catch(function(){}),Ye})})}return v(G,P),G}var Le={_driver:"asyncStorage",_initStorage:Ee,_support:l(),iterate:me,getItem:de,setItem:Fe,removeItem:je,clear:Ce,length:Be,key:Ue,keys:Re,dropInstance:He};function b(){return typeof openDatabase=="function"}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",L=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",H=O.length,ae="arbf",oe="blob",V="si08",ne="ui08",we="uic8",ve="si16",Te="si32",Pe="ur16",ze="ui32",Je="fl32",st="fl64",at=H+ae.length,ct=Object.prototype.toString;function Me(T){var P=T.length*.75,B=T.length,Z,G=0,W,ue,pe,ye;T[T.length-1]==="="&&(P--,T[T.length-2]==="="&&P--);var _e=new ArrayBuffer(P),be=new Uint8Array(_e);for(Z=0;Z<B;Z+=4)W=re.indexOf(T[Z]),ue=re.indexOf(T[Z+1]),pe=re.indexOf(T[Z+2]),ye=re.indexOf(T[Z+3]),be[G++]=W<<2|ue>>4,be[G++]=(ue&15)<<4|pe>>2,be[G++]=(pe&3)<<6|ye&63;return _e}function ut(T){var P=new Uint8Array(T),B="",Z;for(Z=0;Z<P.length;Z+=3)B+=re[P[Z]>>2],B+=re[(P[Z]&3)<<4|P[Z+1]>>4],B+=re[(P[Z+1]&15)<<2|P[Z+2]>>6],B+=re[P[Z+2]&63];return P.length%3===2?B=B.substring(0,B.length-1)+"=":P.length%3===1&&(B=B.substring(0,B.length-2)+"=="),B}function wt(T,P){var B="";if(T&&(B=ct.call(T)),T&&(B==="[object ArrayBuffer]"||T.buffer&&ct.call(T.buffer)==="[object ArrayBuffer]")){var Z,G=O;T instanceof ArrayBuffer?(Z=T,G+=ae):(Z=T.buffer,B==="[object Int8Array]"?G+=V:B==="[object Uint8Array]"?G+=ne:B==="[object Uint8ClampedArray]"?G+=we:B==="[object Int16Array]"?G+=ve:B==="[object Uint16Array]"?G+=Pe:B==="[object Int32Array]"?G+=Te:B==="[object Uint32Array]"?G+=ze:B==="[object Float32Array]"?G+=Je:B==="[object Float64Array]"?G+=st:P(new Error("Failed to get type for BinaryArray"))),P(G+ut(Z))}else if(B==="[object Blob]"){var W=new FileReader;W.onload=function(){var ue=Q+T.type+"~"+ut(this.result);P(O+oe+ue)},W.readAsArrayBuffer(T)}else try{P(JSON.stringify(T))}catch(ue){console.error("Couldn't convert value into a JSON string: ",T),P(null,ue)}}function I(T){if(T.substring(0,H)!==O)return JSON.parse(T);var P=T.substring(at),B=T.substring(H,at),Z;if(B===oe&&L.test(P)){var G=P.match(L);Z=G[1],P=P.substring(G[0].length)}var W=Me(P);switch(B){case ae:return W;case oe:return f([W],{type:Z});case V:return new Int8Array(W);case ne:return new Uint8Array(W);case we:return new Uint8ClampedArray(W);case ve:return new Int16Array(W);case Pe:return new Uint16Array(W);case Te:return new Int32Array(W);case ze:return new Uint32Array(W);case Je:return new Float32Array(W);case st:return new Float64Array(W);default:throw new Error("Unkown type: "+B)}}var le={serialize:wt,deserialize:I,stringToBuffer:Me,bufferToString:ut};function ge(T,P,B,Z){T.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],B,Z)}function ke(T){var P=this,B={db:null};if(T)for(var Z in T)B[Z]=typeof T[Z]!="string"?T[Z].toString():T[Z];var G=new c(function(W,ue){try{B.db=openDatabase(B.name,String(B.version),B.description,B.size)}catch(pe){return ue(pe)}B.db.transaction(function(pe){ge(pe,B,function(){P._dbInfo=B,W()},function(ye,_e){ue(_e)})},ue)});return B.serializer=le,G}function j(T,P,B,Z,G,W){T.executeSql(B,Z,G,function(ue,pe){pe.code===pe.SYNTAX_ERR?ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(ye,_e){_e.rows.length?W(ye,pe):ge(ye,P,function(){ye.executeSql(B,Z,G,W)},W)},W):W(ue,pe)},W)}function ie(T,P){var B=this;T=w(T);var Z=new c(function(G,W){B.ready().then(function(){var ue=B._dbInfo;ue.db.transaction(function(pe){j(pe,ue,"SELECT * FROM "+ue.storeName+" WHERE key = ? LIMIT 1",[T],function(ye,_e){var be=_e.rows.length?_e.rows.item(0).value:null;be&&(be=ue.serializer.deserialize(be)),G(be)},function(ye,_e){W(_e)})})}).catch(W)});return v(Z,P),Z}function A(T,P){var B=this,Z=new c(function(G,W){B.ready().then(function(){var ue=B._dbInfo;ue.db.transaction(function(pe){j(pe,ue,"SELECT * FROM "+ue.storeName,[],function(ye,_e){for(var be=_e.rows,Ie=be.length,We=0;We<Ie;We++){var Ye=be.item(We),$e=Ye.value;if($e&&($e=ue.serializer.deserialize($e)),$e=T($e,Ye.key,We+1),$e!==void 0){G($e);return}}G()},function(ye,_e){W(_e)})})}).catch(W)});return v(Z,P),Z}function he(T,P,B,Z){var G=this;T=w(T);var W=new c(function(ue,pe){G.ready().then(function(){P===void 0&&(P=null);var ye=P,_e=G._dbInfo;_e.serializer.serialize(P,function(be,Ie){Ie?pe(Ie):_e.db.transaction(function(We){j(We,_e,"INSERT OR REPLACE INTO "+_e.storeName+" (key, value) VALUES (?, ?)",[T,be],function(){ue(ye)},function(Ye,$e){pe($e)})},function(We){if(We.code===We.QUOTA_ERR){if(Z>0){ue(he.apply(G,[T,ye,B,Z-1]));return}pe(We)}})})}).catch(pe)});return v(W,B),W}function Oe(T,P,B){return he.apply(this,[T,P,B,1])}function m(T,P){var B=this;T=w(T);var Z=new c(function(G,W){B.ready().then(function(){var ue=B._dbInfo;ue.db.transaction(function(pe){j(pe,ue,"DELETE FROM "+ue.storeName+" WHERE key = ?",[T],function(){G()},function(ye,_e){W(_e)})})}).catch(W)});return v(Z,P),Z}function ee(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){var W=P._dbInfo;W.db.transaction(function(ue){j(ue,W,"DELETE FROM "+W.storeName,[],function(){Z()},function(pe,ye){G(ye)})})}).catch(G)});return v(B,T),B}function te(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){var W=P._dbInfo;W.db.transaction(function(ue){j(ue,W,"SELECT COUNT(key) as c FROM "+W.storeName,[],function(pe,ye){var _e=ye.rows.item(0).c;Z(_e)},function(pe,ye){G(ye)})})}).catch(G)});return v(B,T),B}function k(T,P){var B=this,Z=new c(function(G,W){B.ready().then(function(){var ue=B._dbInfo;ue.db.transaction(function(pe){j(pe,ue,"SELECT key FROM "+ue.storeName+" WHERE id = ? LIMIT 1",[T+1],function(ye,_e){var be=_e.rows.length?_e.rows.item(0).key:null;G(be)},function(ye,_e){W(_e)})})}).catch(W)});return v(Z,P),Z}function U(T){var P=this,B=new c(function(Z,G){P.ready().then(function(){var W=P._dbInfo;W.db.transaction(function(ue){j(ue,W,"SELECT key FROM "+W.storeName,[],function(pe,ye){for(var _e=[],be=0;be<ye.rows.length;be++)_e.push(ye.rows.item(be).key);Z(_e)},function(pe,ye){G(ye)})})}).catch(G)});return v(B,T),B}function J(T){return new c(function(P,B){T.transaction(function(Z){Z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(G,W){for(var ue=[],pe=0;pe<W.rows.length;pe++)ue.push(W.rows.item(pe).name);P({db:T,storeNames:ue})},function(G,W){B(W)})},function(Z){B(Z)})})}function Ne(T,P){P=y.apply(this,arguments);var B=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||B.name,T.storeName=T.storeName||B.storeName);var Z=this,G;return T.name?G=new c(function(W){var ue;T.name===B.name?ue=Z._dbInfo.db:ue=openDatabase(T.name,"","",0),T.storeName?W({db:ue,storeNames:[T.storeName]}):W(J(ue))}).then(function(W){return new c(function(ue,pe){W.db.transaction(function(ye){function _e(Ye){return new c(function($e,ot){ye.executeSql("DROP TABLE IF EXISTS "+Ye,[],function(){$e()},function(it,xt){ot(xt)})})}for(var be=[],Ie=0,We=W.storeNames.length;Ie<We;Ie++)be.push(_e(W.storeNames[Ie]));c.all(be).then(function(){ue()}).catch(function(Ye){pe(Ye)})},function(ye){pe(ye)})})}):G=c.reject("Invalid arguments"),v(G,P),G}var De={_driver:"webSQLStorage",_initStorage:ke,_support:b(),iterate:A,getItem:ie,setItem:Oe,removeItem:m,clear:ee,length:te,key:k,keys:U,dropInstance:Ne};function Se(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function qe(T,P){var B=T.name+"/";return T.storeName!==P.storeName&&(B+=T.storeName+"/"),B}function Ct(){var T="_localforage_support_test";try{return localStorage.setItem(T,!0),localStorage.removeItem(T),!1}catch{return!0}}function Qe(){return!Ct()||localStorage.length>0}function Ze(T){var P=this,B={};if(T)for(var Z in T)B[Z]=T[Z];return B.keyPrefix=qe(T,P._defaultConfig),Qe()?(P._dbInfo=B,B.serializer=le,c.resolve()):c.reject()}function rt(T){var P=this,B=P.ready().then(function(){for(var Z=P._dbInfo.keyPrefix,G=localStorage.length-1;G>=0;G--){var W=localStorage.key(G);W.indexOf(Z)===0&&localStorage.removeItem(W)}});return v(B,T),B}function ht(T,P){var B=this;T=w(T);var Z=B.ready().then(function(){var G=B._dbInfo,W=localStorage.getItem(G.keyPrefix+T);return W&&(W=G.serializer.deserialize(W)),W});return v(Z,P),Z}function pt(T,P){var B=this,Z=B.ready().then(function(){for(var G=B._dbInfo,W=G.keyPrefix,ue=W.length,pe=localStorage.length,ye=1,_e=0;_e<pe;_e++){var be=localStorage.key(_e);if(be.indexOf(W)===0){var Ie=localStorage.getItem(be);if(Ie&&(Ie=G.serializer.deserialize(Ie)),Ie=T(Ie,be.substring(ue),ye++),Ie!==void 0)return Ie}}});return v(Z,P),Z}function Yt(T,P){var B=this,Z=B.ready().then(function(){var G=B._dbInfo,W;try{W=localStorage.key(T)}catch{W=null}return W&&(W=W.substring(G.keyPrefix.length)),W});return v(Z,P),Z}function $t(T){var P=this,B=P.ready().then(function(){for(var Z=P._dbInfo,G=localStorage.length,W=[],ue=0;ue<G;ue++){var pe=localStorage.key(ue);pe.indexOf(Z.keyPrefix)===0&&W.push(pe.substring(Z.keyPrefix.length))}return W});return v(B,T),B}function et(T){var P=this,B=P.keys().then(function(Z){return Z.length});return v(B,T),B}function vt(T,P){var B=this;T=w(T);var Z=B.ready().then(function(){var G=B._dbInfo;localStorage.removeItem(G.keyPrefix+T)});return v(Z,P),Z}function lt(T,P,B){var Z=this;T=w(T);var G=Z.ready().then(function(){P===void 0&&(P=null);var W=P;return new c(function(ue,pe){var ye=Z._dbInfo;ye.serializer.serialize(P,function(_e,be){if(be)pe(be);else try{localStorage.setItem(ye.keyPrefix+T,_e),ue(W)}catch(Ie){(Ie.name==="QuotaExceededError"||Ie.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pe(Ie),pe(Ie)}})})});return v(G,B),G}function kt(T,P){if(P=y.apply(this,arguments),T=typeof T!="function"&&T||{},!T.name){var B=this.config();T.name=T.name||B.name,T.storeName=T.storeName||B.storeName}var Z=this,G;return T.name?G=new c(function(W){T.storeName?W(qe(T,Z._defaultConfig)):W(T.name+"/")}).then(function(W){for(var ue=localStorage.length-1;ue>=0;ue--){var pe=localStorage.key(ue);pe.indexOf(W)===0&&localStorage.removeItem(pe)}}):G=c.reject("Invalid arguments"),v(G,P),G}var Et={_driver:"localStorageWrapper",_initStorage:Ze,_support:Se(),iterate:pt,getItem:ht,setItem:lt,removeItem:vt,clear:rt,length:et,key:Yt,keys:$t,dropInstance:kt},Or=function(P,B){return P===B||typeof P=="number"&&typeof B=="number"&&isNaN(P)&&isNaN(B)},Gs=function(P,B){for(var Z=P.length,G=0;G<Z;){if(Or(P[G],B))return!0;G++}return!1},Qi=Array.isArray||function(T){return Object.prototype.toString.call(T)==="[object Array]"},dr={},en={},Xt={INDEXEDDB:Le,WEBSQL:De,LOCALSTORAGE:Et},Ys=[Xt.INDEXEDDB._driver,Xt.WEBSQL._driver,Xt.LOCALSTORAGE._driver],Br=["dropInstance"],oi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Br),$s={description:"",driver:Ys.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Xs(T,P){T[P]=function(){var B=arguments;return T.ready().then(function(){return T[P].apply(T,B)})}}function ui(){for(var T=1;T<arguments.length;T++){var P=arguments[T];if(P)for(var B in P)P.hasOwnProperty(B)&&(Qi(P[B])?arguments[0][B]=P[B].slice():arguments[0][B]=P[B])}return arguments[0]}var Ks=function(){function T(P){s(this,T);for(var B in Xt)if(Xt.hasOwnProperty(B)){var Z=Xt[B],G=Z._driver;this[B]=G,dr[G]||this.defineDriver(Z)}this._defaultConfig=ui({},$s),this._config=ui({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(B){if((typeof B>"u"?"undefined":n(B))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Z in B){if(Z==="storeName"&&(B[Z]=B[Z].replace(/\W/g,"_")),Z==="version"&&typeof B[Z]!="number")return new Error("Database version must be a number.");this._config[Z]=B[Z]}return"driver"in B&&B.driver?this.setDriver(this._config.driver):!0}else return typeof B=="string"?this._config[B]:this._config},T.prototype.defineDriver=function(B,Z,G){var W=new c(function(ue,pe){try{var ye=B._driver,_e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!B._driver){pe(_e);return}for(var be=oi.concat("_initStorage"),Ie=0,We=be.length;Ie<We;Ie++){var Ye=be[Ie],$e=!Gs(Br,Ye);if(($e||B[Ye])&&typeof B[Ye]!="function"){pe(_e);return}}var ot=function(){for(var pr=function(ea){return function(){var ta=new Error("Method "+ea+" is not implemented by the current driver"),tn=c.reject(ta);return v(tn,arguments[arguments.length-1]),tn}},li=0,Qs=Br.length;li<Qs;li++){var hi=Br[li];B[hi]||(B[hi]=pr(hi))}};ot();var it=function(pr){dr[ye]&&console.info("Redefining LocalForage driver: "+ye),dr[ye]=B,en[ye]=pr,ue()};"_support"in B?B._support&&typeof B._support=="function"?B._support().then(it,pe):it(!!B._support):it(!0)}catch(xt){pe(xt)}});return p(W,Z,G),W},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(B,Z,G){var W=dr[B]?c.resolve(dr[B]):c.reject(new Error("Driver not found."));return p(W,Z,G),W},T.prototype.getSerializer=function(B){var Z=c.resolve(le);return p(Z,B),Z},T.prototype.ready=function(B){var Z=this,G=Z._driverSet.then(function(){return Z._ready===null&&(Z._ready=Z._initDriver()),Z._ready});return p(G,B,B),G},T.prototype.setDriver=function(B,Z,G){var W=this;Qi(B)||(B=[B]);var ue=this._getSupportedDrivers(B);function pe(){W._config.driver=W.driver()}function ye(Ie){return W._extend(Ie),pe(),W._ready=W._initStorage(W._config),W._ready}function _e(Ie){return function(){var We=0;function Ye(){for(;We<Ie.length;){var $e=Ie[We];return We++,W._dbInfo=null,W._ready=null,W.getDriver($e).then(ye).catch(Ye)}pe();var ot=new Error("No available storage method found.");return W._driverSet=c.reject(ot),W._driverSet}return Ye()}}var be=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=be.then(function(){var Ie=ue[0];return W._dbInfo=null,W._ready=null,W.getDriver(Ie).then(function(We){W._driver=We._driver,pe(),W._wrapLibraryMethodsWithReady(),W._initDriver=_e(ue)})}).catch(function(){pe();var Ie=new Error("No available storage method found.");return W._driverSet=c.reject(Ie),W._driverSet}),p(this._driverSet,Z,G),this._driverSet},T.prototype.supports=function(B){return!!en[B]},T.prototype._extend=function(B){ui(this,B)},T.prototype._getSupportedDrivers=function(B){for(var Z=[],G=0,W=B.length;G<W;G++){var ue=B[G];this.supports(ue)&&Z.push(ue)}return Z},T.prototype._wrapLibraryMethodsWithReady=function(){for(var B=0,Z=oi.length;B<Z;B++)Xs(this,oi[B])},T.prototype.createInstance=function(B){return new T(B)},T}(),Js=new Ks;r.exports=Js},{3:3}]},{},[4])(4)})})(Zs);var rl=Zs.exports;const Bn=fr(rl);class Vs{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||Dr,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Bn>"u"&&(e=Bn),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(i=>{let{href:n}=i,s=this.resolver(n),a=window.encodeURIComponent(s);return this.storage.getItem(a).then(u=>!u||t?this.requester(s,"binary").then(l=>this.storage.setItem(a,l)):u)});return Promise.all(r)}put(e,t,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(n=>n||this.requester(e,"binary",t,r).then(s=>this.storage.setItem(i,s)))}request(e,t,r,i){return this.online?this.requester(e,t,r,i).then(n=>(this.put(e),n)):this.retrieve(e,t)}retrieve(e,t){new Ve;var r,i=new Wt(e);return t||(t=i.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(n=>{var s=new Ve,a;return n?(a=this.handleResponse(n,t),s.resolve(a)):s.reject({message:"File not found in storage: "+e,stack:new Error().stack}),s.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):Ar(t)?r=Lt(e,"text/xml"):t=="xhtml"?r=Lt(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Lt(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return t=t||ar.lookup(e),new Blob([i],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||ar.lookup(e),this.storage.getItem(r).then(function(i){var n=new Ve,s=new FileReader,a;if(i)return a=new Blob([i],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsText(a,t),n.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||ar.lookup(e),this.storage.getItem(r).then(i=>{var n=new Ve,s=new FileReader,a;if(i)return a=new Blob([i],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsDataURL(a,t),n.promise})}createUrl(e,t){var r=new Ve,i=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(s=this.getBase64(e),s&&s.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(s=this.getBlob(e),s&&s.then(function(u){n=i.createObjectURL(u),this.urlCache[e]=n,r.resolve(n)}.bind(this))),s||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}zt(Vs.prototype);class Ei{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=Ke(e,"display_options");return t?(jt(t,"option").forEach(i=>{let n="";switch(i.childNodes.length&&(n=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=n;break;case"fixed-layout":this.fixedLayout=n;break;case"open-to-spread":this.openToSpread=n;break;case"orientation-lock":this.orientationLock=n;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Ln="META-INF/container.xml",il="META-INF/com.apple.ibooks.display-options.xml",St={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Ji{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=dt(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),dt(this.settings,t),this.opening=new Ve,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Ve,spine:new Ve,metadata:new Ve,cover:new Ve,navigation:new Ve,pageList:new Ve,resources:new Ve,displayOptions:new Ve},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Dr,this.spine=new wo,this.locations=new Ss(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(xe.BOOK.OPEN_FAILED,i)})}open(e,t){var r,i=t||this.determineType(e);return i===St.BINARY?(this.archived=!0,this.url=new Tt("/",""),r=this.openEpub(e)):i===St.BASE64?(this.archived=!0,this.url=new Tt("/",""),r=this.openEpub(e,i)):i===St.EPUB?(this.archived=!0,this.url=new Tt("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==St.OPF?(this.url=new Tt(e),r=this.openPackaging(this.url.Path.toString())):i==St.MANIFEST?(this.url=new Tt(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Tt(e),r=this.openContainer(Ln).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(Ln)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new Eo(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Wt(e),this.load(e).then(t=>(this.packaging=new Cn(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new Wt(e),this.load(e).then(t=>(this.packaging=new Cn,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,i;if(this.settings.encoding==="base64")return St.BASE64;if(typeof e!="string")return St.BINARY;if(t=new Tt(e),r=t.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return St.DIRECTORY;if(i==="epub")return St.EPUB;if(i==="opf")return St.OPF;if(i==="json")return St.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(il)).then(t=>{this.displayOptions=new Ei(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new Ei,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Ei,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new Co(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,n)=>{this.navigation=new _i(r),e.pageList&&(this.pageList=new bi(e.pageList)),i(this.navigation)}):t?this.load(t,"xml").then(i=>(this.navigation=new _i(i),this.pageList=new bi(i),this.navigation)):new Promise((i,n)=>{this.navigation=new _i,this.pageList=new bi,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new Ki(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new tl,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||Dr.bind(this);return this.storage=new Vs(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let n=(s,a)=>{a.output=this.resources.substitute(s,a.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Tt("/",""),this.spine.hooks.serialize.register(n)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(n)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new Ge(e),r=this.spine.get(t.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(n){var s=t.toRange(r.document);return s}):new Promise((n,s)=>{s("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${ii}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}zt(Ji.prototype);function cr(o,e){return new Ji(o,e)}cr.VERSION=ii;typeof global<"u"&&(global.EPUBJS_VERSION=ii);cr.Book=Ji;cr.Rendition=Ki;cr.Contents=Yi;cr.CFI=Ge;cr.utils=co;var nl={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(o,e){(function(t){o.exports=t()})(function(){return function t(r,i,n){function s(l,f){if(!i[l]){if(!r[l]){var c=typeof Dt=="function"&&Dt;if(!f&&c)return c(l,!0);if(a)return a(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var p=i[l]={exports:{}};r[l][0].call(p.exports,function(w){var y=r[l][1][w];return s(y||w)},p,p.exports,t,r,i,n)}return i[l].exports}for(var a=typeof Dt=="function"&&Dt,u=0;u<n.length;u++)s(n[u]);return s}({1:[function(t,r,i){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l,f,c,v,p,w,y,h=[],d=0,g=u.length,E=g,C=n.getTypeOf(u)!=="string";d<u.length;)E=g-d,c=C?(l=u[d++],f=d<g?u[d++]:0,d<g?u[d++]:0):(l=u.charCodeAt(d++),f=d<g?u.charCodeAt(d++):0,d<g?u.charCodeAt(d++):0),v=l>>2,p=(3&l)<<4|f>>4,w=1<E?(15&f)<<2|c>>6:64,y=2<E?63&c:64,h.push(a.charAt(v)+a.charAt(p)+a.charAt(w)+a.charAt(y));return h.join("")},i.decode=function(u){var l,f,c,v,p,w,y=0,h=0,d="data:";if(u.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var g,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&E--,u.charAt(u.length-2)===a.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=s.uint8array?new Uint8Array(0|E):new Array(0|E);y<u.length;)l=a.indexOf(u.charAt(y++))<<2|(v=a.indexOf(u.charAt(y++)))>>4,f=(15&v)<<4|(p=a.indexOf(u.charAt(y++)))>>2,c=(3&p)<<6|(w=a.indexOf(u.charAt(y++))),g[h++]=l,p!==64&&(g[h++]=f),w!==64&&(g[h++]=c);return g}},{"./support":30,"./utils":32}],2:[function(t,r,i){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(f,c,v,p,w){this.compressedSize=f,this.uncompressedSize=c,this.crc32=v,this.compression=p,this.compressedContent=w}l.prototype={getContentWorker:function(){var f=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(f,c,v){return f.pipe(new a).pipe(new u("uncompressedSize")).pipe(c.compressWorker(v)).pipe(new u("compressedSize")).withStreamInfo("compression",c)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var n=t("./utils"),s=function(){for(var a,u=[],l=0;l<256;l++){a=l;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;u[l]=a}return u}();r.exports=function(a,u){return a!==void 0&&a.length?n.getTypeOf(a)!=="string"?function(l,f,c,v){var p=s,w=v+c;l^=-1;for(var y=v;y<w;y++)l=l>>>8^p[255&(l^f[y])];return-1^l}(0|u,a,a.length,0):function(l,f,c,v){var p=s,w=v+c;l^=-1;for(var y=v;y<w;y++)l=l>>>8^p[255&(l^f.charCodeAt(y))];return-1^l}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var n=null;n=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),u=t("./stream/GenericWorker"),l=n?"uint8array":"array";function f(c,v){u.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=v,this.meta={}}i.magic="\b\0",a.inherits(f,u),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(l,c.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(v){c.push({data:v,meta:c.meta})}},i.compressWorker=function(c){return new f("Deflate",c)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function n(p,w){var y,h="";for(y=0;y<w;y++)h+=String.fromCharCode(255&p),p>>>=8;return h}function s(p,w,y,h,d,g){var E,C,_=p.file,D=p.compression,S=g!==l.utf8encode,R=a.transformTo("string",g(_.name)),z=a.transformTo("string",l.utf8encode(_.name)),F=_.comment,X=a.transformTo("string",g(F)),N=a.transformTo("string",l.utf8encode(F)),q=z.length!==_.name.length,x=N.length!==F.length,$="",ce="",K="",fe=_.dir,se=_.date,Ae={crc32:0,compressedSize:0,uncompressedSize:0};w&&!y||(Ae.crc32=p.crc32,Ae.compressedSize=p.compressedSize,Ae.uncompressedSize=p.uncompressedSize);var Y=0;w&&(Y|=8),S||!q&&!x||(Y|=2048);var M=0,Ee=0;fe&&(M|=16),d==="UNIX"?(Ee=798,M|=function(me,Fe){var je=me;return me||(je=Fe?16893:33204),(65535&je)<<16}(_.unixPermissions,fe)):(Ee=20,M|=function(me){return 63&(me||0)}(_.dosPermissions)),E=se.getUTCHours(),E<<=6,E|=se.getUTCMinutes(),E<<=5,E|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),q&&(ce=n(1,1)+n(f(R),4)+z,$+="up"+n(ce.length,2)+ce),x&&(K=n(1,1)+n(f(X),4)+N,$+="uc"+n(K.length,2)+K);var de="";return de+=`
\0`,de+=n(Y,2),de+=D.magic,de+=n(E,2),de+=n(C,2),de+=n(Ae.crc32,4),de+=n(Ae.compressedSize,4),de+=n(Ae.uncompressedSize,4),de+=n(R.length,2),de+=n($.length,2),{fileRecord:c.LOCAL_FILE_HEADER+de+R+$,dirRecord:c.CENTRAL_FILE_HEADER+n(Ee,2)+de+n(X.length,2)+"\0\0\0\0"+n(M,4)+n(h,4)+R+$+X}}var a=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),f=t("../crc32"),c=t("../signature");function v(p,w,y,h){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=y,this.encodeFileName=h,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,u),v.prototype.push=function(p){var w=p.meta.percent||0,y=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,u.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:y?(w+100*(y-h-1))/y:100}}))},v.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var w=this.streamFiles&&!p.file.dir;if(w){var y=s(p,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(p){this.accumulate=!1;var w=this.streamFiles&&!p.file.dir,y=s(p,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),w)this.push({data:function(h){return c.DATA_DESCRIPTOR+n(h.crc32,4)+n(h.compressedSize,4)+n(h.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var p=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var y=this.bytesWritten-p,h=function(d,g,E,C,_){var D=a.transformTo("string",_(C));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(d,2)+n(d,2)+n(g,4)+n(E,4)+n(D.length,2)+D}(this.dirRecords.length,y,p,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(p){this._sources.push(p);var w=this;return p.on("data",function(y){w.processChunk(y)}),p.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),p.on("error",function(y){w.error(y)}),this},v.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(p){var w=this._sources;if(!u.prototype.error.call(this,p))return!1;for(var y=0;y<w.length;y++)try{w[y].error(p)}catch{}return!0},v.prototype.lock=function(){u.prototype.lock.call(this);for(var p=this._sources,w=0;w<p.length;w++)p[w].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var n=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(a,u,l){var f=new s(u.streamFiles,l,u.platform,u.encodeFileName),c=0;try{a.forEach(function(v,p){c++;var w=function(g,E){var C=g||E,_=n[C];if(!_)throw new Error(C+" is not a valid compression method !");return _}(p.options.compression,u.compression),y=p.options.compressionOptions||u.compressionOptions||{},h=p.dir,d=p.date;p._compressWorker(w,y).withStreamInfo("file",{name:v,dir:h,date:d,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(f)}),f.entriesCount=c}catch(v){f.error(v)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var n=t("./utils"),s=t("./external"),a=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function c(v){return new s.Promise(function(p,w){var y=v.decompressed.getContentWorker().pipe(new l);y.on("error",function(h){w(h)}).on("end",function(){y.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(v,p){var w=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),f.isNode&&f.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",v,!0,p.optimizedBinaryString,p.base64).then(function(y){var h=new u(p);return h.load(y),h}).then(function(y){var h=[s.Promise.resolve(y)],d=y.files;if(p.checkCRC32)for(var g=0;g<d.length;g++)h.push(c(d[g]));return s.Promise.all(h)}).then(function(y){for(var h=y.shift(),d=h.files,g=0;g<d.length;g++){var E=d[g],C=E.fileNameStr,_=n.resolve(E.fileNameStr);w.file(_,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:p.createFolders}),E.dir||(w.file(_).unsafeOriginalName=C)}return h.zipComment.length&&(w.comment=h.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker");function a(u,l){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}n.inherits(a,s),a.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(f){l.push({data:f,meta:{percent:0}})}).on("error",function(f){l.isPaused?this.generatedError=f:l.error(f)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var n=t("readable-stream").Readable;function s(a,u,l){n.call(this,u),this._helper=a;var f=this;a.on("data",function(c,v){f.push(c)||f._helper.pause(),l&&l(v)}).on("error",function(c){f.emit("error",c)}).on("end",function(){f.push(null)})}t("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,r,i){function n(_,D,S){var R,z=a.getTypeOf(D),F=a.extend(S||{},f);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(_=d(_)),F.createFolders&&(R=h(_))&&g.call(this,R,!0);var X=z==="string"&&F.binary===!1&&F.base64===!1;S&&S.binary!==void 0||(F.binary=!X),(D instanceof c&&D.uncompressedSize===0||F.dir||!D||D.length===0)&&(F.base64=!1,F.binary=!0,D="",F.compression="STORE",z="string");var N=null;N=D instanceof c||D instanceof u?D:w.isNode&&w.isStream(D)?new y(_,D):a.prepareContent(_,D,F.binary,F.optimizedBinaryString,F.base64);var q=new v(_,N,F);this.files[_]=q}var s=t("./utf8"),a=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),f=t("./defaults"),c=t("./compressedObject"),v=t("./zipObject"),p=t("./generate"),w=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),h=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var D=_.lastIndexOf("/");return 0<D?_.substring(0,D):""},d=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},g=function(_,D){return D=D!==void 0?D:f.createFolders,_=d(_),this.files[_]||n.call(this,_,null,{dir:!0,createFolders:D}),this.files[_]};function E(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var D,S,R;for(D in this.files)R=this.files[D],(S=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&_(S,R)},filter:function(_){var D=[];return this.forEach(function(S,R){_(S,R)&&D.push(R)}),D},file:function(_,D,S){if(arguments.length!==1)return _=this.root+_,n.call(this,_,D,S),this;if(E(_)){var R=_;return this.filter(function(F,X){return!X.dir&&R.test(F)})}var z=this.files[this.root+_];return z&&!z.dir?z:null},folder:function(_){if(!_)return this;if(E(_))return this.filter(function(z,F){return F.dir&&_.test(z)});var D=this.root+_,S=g.call(this,D),R=this.clone();return R.root=S.name,R},remove:function(_){_=this.root+_;var D=this.files[_];if(D||(_.slice(-1)!=="/"&&(_+="/"),D=this.files[_]),D&&!D.dir)delete this.files[_];else for(var S=this.filter(function(z,F){return F.name.slice(0,_.length)===_}),R=0;R<S.length;R++)delete this.files[S[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var D,S={};try{if((S=a.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var R=S.comment||this.comment||"";D=p.generateWorker(this,S,R)}catch(z){(D=new u("error")).error(z)}return new l(D,S.type||"string",S.mimeType)},generateAsync:function(_,D){return this.generateInternalStream(_).accumulate(D)},generateNodeStream:function(_,D){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(D)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var n=t("./DataReader");function s(a){n.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),l=a.charCodeAt(1),f=a.charCodeAt(2),c=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===u&&this.data[v+1]===l&&this.data[v+2]===f&&this.data[v+3]===c)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),l=a.charCodeAt(1),f=a.charCodeAt(2),c=a.charCodeAt(3),v=this.readData(4);return u===v[0]&&l===v[1]&&f===v[2]&&c===v[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,l=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=a,l},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var n=t("./Uint8ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var n=t("./DataReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var n=t("./ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");r.exports=function(c){var v=n.getTypeOf(c);return n.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new l(c):s.uint8array?new f(n.transformTo("uint8array",c)):new a(n.transformTo("array",c)):new u(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var n=t("./GenericWorker"),s=t("../utils");function a(u){n.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(a,n),a.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var n=t("./GenericWorker"),s=t("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,n),a.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}n.inherits(a,s),a.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(u){s.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){l.dataIsReady=!0,l.data=f,l.max=f&&f.length||0,l.type=n.getTypeOf(f),l.isPaused||l._tickAndRepeat()},function(f){l.error(f)})}n.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(u){a.processChunk(u)}),s.on("end",function(){a.end()}),s.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=n},{}],29:[function(t,r,i){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),u=t("../base64"),l=t("../support"),f=t("../external"),c=null;if(l.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(w,y){return new f.Promise(function(h,d){var g=[],E=w._internalType,C=w._outputType,_=w._mimeType;w.on("data",function(D,S){g.push(D),y&&y(S)}).on("error",function(D){g=[],d(D)}).on("end",function(){try{var D=function(S,R,z){switch(S){case"blob":return n.newBlob(n.transformTo("arraybuffer",R),z);case"base64":return u.encode(R);default:return n.transformTo(S,R)}}(C,function(S,R){var z,F=0,X=null,N=0;for(z=0;z<R.length;z++)N+=R[z].length;switch(S){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(X=new Uint8Array(N),z=0;z<R.length;z++)X.set(R[z],F),F+=R[z].length;return X;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+S+"'")}}(E,g),_);h(D)}catch(S){d(S)}g=[]}).resume()})}function p(w,y,h){var d=y;switch(y){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=y,this._mimeType=h,n.checkSupport(d),this._worker=w.pipe(new s(d)),w.lock()}catch(g){this._worker=new a("error"),this._worker.error(g)}}p.prototype={accumulate:function(w){return v(this,w)},on:function(w,y){var h=this;return w==="data"?this._worker.on(w,function(d){y.call(h,d.data,d.meta)}):this._worker.on(w,function(){n.delay(y,arguments,h)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),f=0;f<256;f++)l[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;l[254]=l[254]=1;function c(){u.call(this,"utf-8 decode"),this.leftOver=null}function v(){u.call(this,"utf-8 encode")}i.utf8encode=function(p){return s.nodebuffer?a.newBufferFrom(p,"utf-8"):function(w){var y,h,d,g,E,C=w.length,_=0;for(g=0;g<C;g++)(64512&(h=w.charCodeAt(g)))==55296&&g+1<C&&(64512&(d=w.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(d-56320),g++),_+=h<128?1:h<2048?2:h<65536?3:4;for(y=s.uint8array?new Uint8Array(_):new Array(_),g=E=0;E<_;g++)(64512&(h=w.charCodeAt(g)))==55296&&g+1<C&&(64512&(d=w.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(d-56320),g++),h<128?y[E++]=h:(h<2048?y[E++]=192|h>>>6:(h<65536?y[E++]=224|h>>>12:(y[E++]=240|h>>>18,y[E++]=128|h>>>12&63),y[E++]=128|h>>>6&63),y[E++]=128|63&h);return y}(p)},i.utf8decode=function(p){return s.nodebuffer?n.transformTo("nodebuffer",p).toString("utf-8"):function(w){var y,h,d,g,E=w.length,C=new Array(2*E);for(y=h=0;y<E;)if((d=w[y++])<128)C[h++]=d;else if(4<(g=l[d]))C[h++]=65533,y+=g-1;else{for(d&=g===2?31:g===3?15:7;1<g&&y<E;)d=d<<6|63&w[y++],g--;1<g?C[h++]=65533:d<65536?C[h++]=d:(d-=65536,C[h++]=55296|d>>10&1023,C[h++]=56320|1023&d)}return C.length!==h&&(C.subarray?C=C.subarray(0,h):C.length=h),n.applyFromCharCode(C)}(p=n.transformTo(s.uint8array?"uint8array":"array",p))},n.inherits(c,u),c.prototype.processChunk=function(p){var w=n.transformTo(s.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var y=w;(w=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),w.set(y,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var h=function(g,E){var C;for((E=E||g.length)>g.length&&(E=g.length),C=E-1;0<=C&&(192&g[C])==128;)C--;return C<0||C===0?E:C+l[g[C]]>E?C:E}(w),d=w;h!==w.length&&(s.uint8array?(d=w.subarray(0,h),this.leftOver=w.subarray(h,w.length)):(d=w.slice(0,h),this.leftOver=w.slice(h,w.length))),this.push({data:i.utf8decode(d),meta:p.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,n.inherits(v,u),v.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),u=t("./external");function l(y){return y}function f(y,h){for(var d=0;d<y.length;++d)h[d]=255&y.charCodeAt(d);return h}t("setimmediate"),i.newBlob=function(y,h){i.checkSupport("blob");try{return new Blob([y],{type:h})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(y),d.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(y,h,d){var g=[],E=0,C=y.length;if(C<=d)return String.fromCharCode.apply(null,y);for(;E<C;)h==="array"||h==="nodebuffer"?g.push(String.fromCharCode.apply(null,y.slice(E,Math.min(E+d,C)))):g.push(String.fromCharCode.apply(null,y.subarray(E,Math.min(E+d,C)))),E+=d;return g.join("")},stringifyByChar:function(y){for(var h="",d=0;d<y.length;d++)h+=String.fromCharCode(y[d]);return h},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function v(y){var h=65536,d=i.getTypeOf(y),g=!0;if(d==="uint8array"?g=c.applyCanBeUsed.uint8array:d==="nodebuffer"&&(g=c.applyCanBeUsed.nodebuffer),g)for(;1<h;)try{return c.stringifyByChunk(y,d,h)}catch{h=Math.floor(h/2)}return c.stringifyByChar(y)}function p(y,h){for(var d=0;d<y.length;d++)h[d]=y[d];return h}i.applyFromCharCode=v;var w={};w.string={string:l,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return w.string.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:function(y){return f(y,a.allocBuffer(y.length))}},w.array={string:v,array:l,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(y)}},w.arraybuffer={string:function(y){return v(new Uint8Array(y))},array:function(y){return p(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:l,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(new Uint8Array(y))}},w.uint8array={string:v,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:l,nodebuffer:function(y){return a.newBufferFrom(y)}},w.nodebuffer={string:v,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return w.nodebuffer.uint8array(y).buffer},uint8array:function(y){return p(y,new Uint8Array(y.length))},nodebuffer:l},i.transformTo=function(y,h){if(h=h||"",!y)return h;i.checkSupport(y);var d=i.getTypeOf(h);return w[d][y](h)},i.resolve=function(y){for(var h=y.split("/"),d=[],g=0;g<h.length;g++){var E=h[g];E==="."||E===""&&g!==0&&g!==h.length-1||(E===".."?d.pop():d.push(E))}return d.join("/")},i.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":n.nodebuffer&&a.isBuffer(y)?"nodebuffer":n.uint8array&&y instanceof Uint8Array?"uint8array":n.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(y){if(!n[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(y){var h,d,g="";for(d=0;d<(y||"").length;d++)g+="\\x"+((h=y.charCodeAt(d))<16?"0":"")+h.toString(16).toUpperCase();return g},i.delay=function(y,h,d){setImmediate(function(){y.apply(d||null,h||[])})},i.inherits=function(y,h){function d(){}d.prototype=h.prototype,y.prototype=new d},i.extend=function(){var y,h,d={};for(y=0;y<arguments.length;y++)for(h in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],h)&&d[h]===void 0&&(d[h]=arguments[y][h]);return d},i.prepareContent=function(y,h,d,g,E){return u.Promise.resolve(h).then(function(C){return n.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(_,D){var S=new FileReader;S.onload=function(R){_(R.target.result)},S.onerror=function(R){D(R.target.error)},S.readAsArrayBuffer(C)}):C}).then(function(C){var _=i.getTypeOf(C);return _?(_==="arraybuffer"?C=i.transformTo("uint8array",C):_==="string"&&(E?C=s.decode(C):d&&g!==!0&&(C=function(D){return f(D,n.uint8array?new Uint8Array(D.length):new Array(D.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),u=t("./zipEntry"),l=t("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(c)+")")}},isSignature:function(c,v){var p=this.reader.index;this.reader.setIndex(c);var w=this.reader.readString(4)===v;return this.reader.setIndex(p),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),v=l.uint8array?"uint8array":"array",p=s.transformTo(v,c);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,v,p,w=this.zip64EndOfCentralSize-44;0<w;)c=this.reader.readInt(2),v=this.reader.readInt(4),p=this.reader.readData(v),this.zip64ExtensibleData[c]={id:c,length:v,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,v;for(c=0;c<this.files.length;c++)v=this.files[c],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(c=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var v=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var w=v-p;if(0<w)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(c){this.reader=n(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),f=t("./compressions"),c=t("./support");function v(p,w){this.options=p,this.loadOptions=w}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var w,y;if(p.skip(22),this.fileNameLength=p.readInt(2),y=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(h){for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)&&f[d].magic===h)return f[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var w=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(w),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var w,y,h,d=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<d;)w=p.readInt(2),y=p.readInt(2),h=p.readData(y),this.extraFields[w]={id:w,length:y,value:h};p.setIndex(d)},handleUTF8:function(){var p=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var y=s.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var d=s.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var w=n(p.value);return w.readInt(1)!==1||u(this.fileName)!==w.readInt(4)?null:l.utf8decode(w.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var w=n(p.value);return w.readInt(1)!==1||u(this.fileComment)!==w.readInt(4)?null:l.utf8decode(w.readData(p.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function n(w,y,h){this.name=w,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=y,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),f=t("./stream/GenericWorker");n.prototype={internalStream:function(w){var y=null,h="string";try{if(!w)throw new Error("No output type specified.");var d=(h=w.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),y=this._decompressWorker();var g=!this._dataBinary;g&&!d&&(y=y.pipe(new u.Utf8EncodeWorker)),!g&&d&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(E){(y=new f("error")).error(E)}return new s(y,h,"")},async:function(w,y){return this.internalStream(w).accumulate(y)},nodeStream:function(w,y){return this.internalStream(w||"nodebuffer").toNodejsStream(y)},_compressWorker:function(w,y){if(this._data instanceof l&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(h,w,y)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof f?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)n.prototype[c[p]]=v;r.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(n){var s,a,u=n.MutationObserver||n.WebKitMutationObserver;if(u){var l=0,f=new u(w),c=n.document.createTextNode("");f.observe(c,{characterData:!0}),s=function(){c.data=l=++l%2}}else if(n.setImmediate||n.MessageChannel===void 0)s="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var y=n.document.createElement("script");y.onreadystatechange=function(){w(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},n.document.documentElement.appendChild(y)}:function(){setTimeout(w,0)};else{var v=new n.MessageChannel;v.port1.onmessage=w,s=function(){v.port2.postMessage(0)}}var p=[];function w(){var y,h;a=!0;for(var d=p.length;d;){for(h=p,p=[],y=-1;++y<d;)h[y]();d=p.length}a=!1}r.exports=function(y){p.push(y)!==1||a||s()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var n=t("immediate");function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],f=["PENDING"];function c(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,d!==s&&y(this,d)}function v(d,g,E){this.promise=d,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function p(d,g,E){n(function(){var C;try{C=g(E)}catch(_){return a.reject(d,_)}C===d?a.reject(d,new TypeError("Cannot resolve promise with itself")):a.resolve(d,C)})}function w(d){var g=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof g=="function")return function(){g.apply(d,arguments)}}function y(d,g){var E=!1;function C(S){E||(E=!0,a.reject(d,S))}function _(S){E||(E=!0,a.resolve(d,S))}var D=h(function(){g(_,C)});D.status==="error"&&C(D.value)}function h(d,g){var E={};try{E.value=d(g),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=c).prototype.finally=function(d){if(typeof d!="function")return this;var g=this.constructor;return this.then(function(E){return g.resolve(d()).then(function(){return E})},function(E){return g.resolve(d()).then(function(){throw E})})},c.prototype.catch=function(d){return this.then(null,d)},c.prototype.then=function(d,g){if(typeof d!="function"&&this.state===l||typeof g!="function"&&this.state===u)return this;var E=new this.constructor(s);return this.state!==f?p(E,this.state===l?d:g,this.outcome):this.queue.push(new v(E,d,g)),E},v.prototype.callFulfilled=function(d){a.resolve(this.promise,d)},v.prototype.otherCallFulfilled=function(d){p(this.promise,this.onFulfilled,d)},v.prototype.callRejected=function(d){a.reject(this.promise,d)},v.prototype.otherCallRejected=function(d){p(this.promise,this.onRejected,d)},a.resolve=function(d,g){var E=h(w,g);if(E.status==="error")return a.reject(d,E.value);var C=E.value;if(C)y(d,C);else{d.state=l,d.outcome=g;for(var _=-1,D=d.queue.length;++_<D;)d.queue[_].callFulfilled(g)}return d},a.reject=function(d,g){d.state=u,d.outcome=g;for(var E=-1,C=d.queue.length;++E<C;)d.queue[E].callRejected(g);return d},c.resolve=function(d){return d instanceof this?d:a.resolve(new this(s),d)},c.reject=function(d){var g=new this(s);return a.reject(g,d)},c.all=function(d){var g=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=d.length,C=!1;if(!E)return this.resolve([]);for(var _=new Array(E),D=0,S=-1,R=new this(s);++S<E;)z(d[S],S);return R;function z(F,X){g.resolve(F).then(function(N){_[X]=N,++D!==E||C||(C=!0,a.resolve(R,_))},function(N){C||(C=!0,a.reject(R,N))})}},c.race=function(d){var g=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=d.length,C=!1;if(!E)return this.resolve([]);for(var _=-1,D=new this(s);++_<E;)S=d[_],g.resolve(S).then(function(R){C||(C=!0,a.resolve(D,R))},function(R){C||(C=!0,a.reject(D,R))});var S;return D}},{immediate:36}],38:[function(t,r,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),f=Object.prototype.toString,c=0,v=-1,p=0,w=8;function y(d){if(!(this instanceof y))return new y(d);this.options=s.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},d||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var E=n.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(E!==c)throw new Error(u[E]);if(g.header&&n.deflateSetHeader(this.strm,g.header),g.dictionary){var C;if(C=typeof g.dictionary=="string"?a.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(E=n.deflateSetDictionary(this.strm,C))!==c)throw new Error(u[E]);this._dict_set=!0}}function h(d,g){var E=new y(g);if(E.push(d,!0),E.err)throw E.msg||u[E.err];return E.result}y.prototype.push=function(d,g){var E,C,_=this.strm,D=this.options.chunkSize;if(this.ended)return!1;C=g===~~g?g:g===!0?4:0,typeof d=="string"?_.input=a.string2buf(d):f.call(d)==="[object ArrayBuffer]"?_.input=new Uint8Array(d):_.input=d,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new s.Buf8(D),_.next_out=0,_.avail_out=D),(E=n.deflate(_,C))!==1&&E!==c)return this.onEnd(E),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(_.output,_.next_out))):this.onData(s.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&E!==1);return C===4?(E=n.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===c):C!==2||(this.onEnd(c),!(_.avail_out=0))},y.prototype.onData=function(d){this.chunks.push(d)},y.prototype.onEnd=function(d){d===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},i.Deflate=y,i.deflate=h,i.deflateRaw=function(d,g){return(g=g||{}).raw=!0,h(d,g)},i.gzip=function(d,g){return(g=g||{}).gzip=!0,h(d,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),f=t("./zlib/zstream"),c=t("./zlib/gzheader"),v=Object.prototype.toString;function p(y){if(!(this instanceof p))return new p(y);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},y||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||y&&y.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var d=n.inflateInit2(this.strm,h.windowBits);if(d!==u.Z_OK)throw new Error(l[d]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function w(y,h){var d=new p(h);if(d.push(y,!0),d.err)throw d.msg||l[d.err];return d.result}p.prototype.push=function(y,h){var d,g,E,C,_,D,S=this.strm,R=this.options.chunkSize,z=this.options.dictionary,F=!1;if(this.ended)return!1;g=h===~~h?h:h===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?S.input=a.binstring2buf(y):v.call(y)==="[object ArrayBuffer]"?S.input=new Uint8Array(y):S.input=y,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new s.Buf8(R),S.next_out=0,S.avail_out=R),(d=n.inflate(S,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(D=typeof z=="string"?a.string2buf(z):v.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,d=n.inflateSetDictionary(this.strm,D)),d===u.Z_BUF_ERROR&&F===!0&&(d=u.Z_OK,F=!1),d!==u.Z_STREAM_END&&d!==u.Z_OK)return this.onEnd(d),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&d!==u.Z_STREAM_END&&(S.avail_in!==0||g!==u.Z_FINISH&&g!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=a.utf8border(S.output,S.next_out),C=S.next_out-E,_=a.buf2string(S.output,E),S.next_out=C,S.avail_out=R-C,C&&s.arraySet(S.output,S.output,E,C,0),this.onData(_)):this.onData(s.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(F=!0)}while((0<S.avail_in||S.avail_out===0)&&d!==u.Z_STREAM_END);return d===u.Z_STREAM_END&&(g=u.Z_FINISH),g===u.Z_FINISH?(d=n.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===u.Z_OK):g!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(S.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Inflate=p,i.inflate=w,i.inflateRaw=function(y,h){return(h=h||{}).raw=!0,w(y,h)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var f=l.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var s={arraySet:function(u,l,f,c,v){if(l.subarray&&u.subarray)u.set(l.subarray(f,f+c),v);else for(var p=0;p<c;p++)u[v+p]=l[f+p]},flattenChunks:function(u){var l,f,c,v,p,w;for(l=c=0,f=u.length;l<f;l++)c+=u[l].length;for(w=new Uint8Array(c),l=v=0,f=u.length;l<f;l++)p=u[l],w.set(p,v),v+=p.length;return w}},a={arraySet:function(u,l,f,c,v){for(var p=0;p<c;p++)u[v+p]=l[f+p]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],42:[function(t,r,i){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new n.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function f(c,v){if(v<65537&&(c.subarray&&a||!c.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(c,v));for(var p="",w=0;w<v;w++)p+=String.fromCharCode(c[w]);return p}u[254]=u[254]=1,i.string2buf=function(c){var v,p,w,y,h,d=c.length,g=0;for(y=0;y<d;y++)(64512&(p=c.charCodeAt(y)))==55296&&y+1<d&&(64512&(w=c.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),y++),g+=p<128?1:p<2048?2:p<65536?3:4;for(v=new n.Buf8(g),y=h=0;h<g;y++)(64512&(p=c.charCodeAt(y)))==55296&&y+1<d&&(64512&(w=c.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),y++),p<128?v[h++]=p:(p<2048?v[h++]=192|p>>>6:(p<65536?v[h++]=224|p>>>12:(v[h++]=240|p>>>18,v[h++]=128|p>>>12&63),v[h++]=128|p>>>6&63),v[h++]=128|63&p);return v},i.buf2binstring=function(c){return f(c,c.length)},i.binstring2buf=function(c){for(var v=new n.Buf8(c.length),p=0,w=v.length;p<w;p++)v[p]=c.charCodeAt(p);return v},i.buf2string=function(c,v){var p,w,y,h,d=v||c.length,g=new Array(2*d);for(p=w=0;p<d;)if((y=c[p++])<128)g[w++]=y;else if(4<(h=u[y]))g[w++]=65533,p+=h-1;else{for(y&=h===2?31:h===3?15:7;1<h&&p<d;)y=y<<6|63&c[p++],h--;1<h?g[w++]=65533:y<65536?g[w++]=y:(y-=65536,g[w++]=55296|y>>10&1023,g[w++]=56320|1023&y)}return f(g,w)},i.utf8border=function(c,v){var p;for((v=v||c.length)>c.length&&(v=c.length),p=v-1;0<=p&&(192&c[p])==128;)p--;return p<0||p===0?v:p+u[c[p]]>v?p:v}},{"./common":41}],43:[function(t,r,i){r.exports=function(n,s,a,u){for(var l=65535&n|0,f=n>>>16&65535|0,c=0;a!==0;){for(a-=c=2e3<a?2e3:a;f=f+(l=l+s[u++]|0)|0,--c;);l%=65521,f%=65521}return l|f<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var n=function(){for(var s,a=[],u=0;u<256;u++){s=u;for(var l=0;l<8;l++)s=1&s?3988292384^s>>>1:s>>>1;a[u]=s}return a}();r.exports=function(s,a,u,l){var f=n,c=l+u;s^=-1;for(var v=l;v<c;v++)s=s>>>8^f[255&(s^a[v])];return-1^s}},{}],46:[function(t,r,i){var n,s=t("../utils/common"),a=t("./trees"),u=t("./adler32"),l=t("./crc32"),f=t("./messages"),c=0,v=4,p=0,w=-2,y=-1,h=4,d=2,g=8,E=9,C=286,_=30,D=19,S=2*C+1,R=15,z=3,F=258,X=F+z+1,N=42,q=113,x=1,$=2,ce=3,K=4;function fe(b,re){return b.msg=f[re],re}function se(b){return(b<<1)-(4<b?9:0)}function Ae(b){for(var re=b.length;0<=--re;)b[re]=0}function Y(b){var re=b.state,Q=re.pending;Q>b.avail_out&&(Q=b.avail_out),Q!==0&&(s.arraySet(b.output,re.pending_buf,re.pending_out,Q,b.next_out),b.next_out+=Q,re.pending_out+=Q,b.total_out+=Q,b.avail_out-=Q,re.pending-=Q,re.pending===0&&(re.pending_out=0))}function M(b,re){a._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,re),b.block_start=b.strstart,Y(b.strm)}function Ee(b,re){b.pending_buf[b.pending++]=re}function de(b,re){b.pending_buf[b.pending++]=re>>>8&255,b.pending_buf[b.pending++]=255&re}function me(b,re){var Q,L,O=b.max_chain_length,H=b.strstart,ae=b.prev_length,oe=b.nice_match,V=b.strstart>b.w_size-X?b.strstart-(b.w_size-X):0,ne=b.window,we=b.w_mask,ve=b.prev,Te=b.strstart+F,Pe=ne[H+ae-1],ze=ne[H+ae];b.prev_length>=b.good_match&&(O>>=2),oe>b.lookahead&&(oe=b.lookahead);do if(ne[(Q=re)+ae]===ze&&ne[Q+ae-1]===Pe&&ne[Q]===ne[H]&&ne[++Q]===ne[H+1]){H+=2,Q++;do;while(ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&ne[++H]===ne[++Q]&&H<Te);if(L=F-(Te-H),H=Te-F,ae<L){if(b.match_start=re,oe<=(ae=L))break;Pe=ne[H+ae-1],ze=ne[H+ae]}}while((re=ve[re&we])>V&&--O!=0);return ae<=b.lookahead?ae:b.lookahead}function Fe(b){var re,Q,L,O,H,ae,oe,V,ne,we,ve=b.w_size;do{if(O=b.window_size-b.lookahead-b.strstart,b.strstart>=ve+(ve-X)){for(s.arraySet(b.window,b.window,ve,ve,0),b.match_start-=ve,b.strstart-=ve,b.block_start-=ve,re=Q=b.hash_size;L=b.head[--re],b.head[re]=ve<=L?L-ve:0,--Q;);for(re=Q=ve;L=b.prev[--re],b.prev[re]=ve<=L?L-ve:0,--Q;);O+=ve}if(b.strm.avail_in===0)break;if(ae=b.strm,oe=b.window,V=b.strstart+b.lookahead,ne=O,we=void 0,we=ae.avail_in,ne<we&&(we=ne),Q=we===0?0:(ae.avail_in-=we,s.arraySet(oe,ae.input,ae.next_in,we,V),ae.state.wrap===1?ae.adler=u(ae.adler,oe,we,V):ae.state.wrap===2&&(ae.adler=l(ae.adler,oe,we,V)),ae.next_in+=we,ae.total_in+=we,we),b.lookahead+=Q,b.lookahead+b.insert>=z)for(H=b.strstart-b.insert,b.ins_h=b.window[H],b.ins_h=(b.ins_h<<b.hash_shift^b.window[H+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[H+z-1])&b.hash_mask,b.prev[H&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=H,H++,b.insert--,!(b.lookahead+b.insert<z)););}while(b.lookahead<X&&b.strm.avail_in!==0)}function je(b,re){for(var Q,L;;){if(b.lookahead<X){if(Fe(b),b.lookahead<X&&re===c)return x;if(b.lookahead===0)break}if(Q=0,b.lookahead>=z&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+z-1])&b.hash_mask,Q=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),Q!==0&&b.strstart-Q<=b.w_size-X&&(b.match_length=me(b,Q)),b.match_length>=z)if(L=a._tr_tally(b,b.strstart-b.match_start,b.match_length-z),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=z){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+z-1])&b.hash_mask,Q=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else L=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(L&&(M(b,!1),b.strm.avail_out===0))return x}return b.insert=b.strstart<z-1?b.strstart:z-1,re===v?(M(b,!0),b.strm.avail_out===0?ce:K):b.last_lit&&(M(b,!1),b.strm.avail_out===0)?x:$}function Ce(b,re){for(var Q,L,O;;){if(b.lookahead<X){if(Fe(b),b.lookahead<X&&re===c)return x;if(b.lookahead===0)break}if(Q=0,b.lookahead>=z&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+z-1])&b.hash_mask,Q=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=z-1,Q!==0&&b.prev_length<b.max_lazy_match&&b.strstart-Q<=b.w_size-X&&(b.match_length=me(b,Q),b.match_length<=5&&(b.strategy===1||b.match_length===z&&4096<b.strstart-b.match_start)&&(b.match_length=z-1)),b.prev_length>=z&&b.match_length<=b.prev_length){for(O=b.strstart+b.lookahead-z,L=a._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-z),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=O&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+z-1])&b.hash_mask,Q=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=z-1,b.strstart++,L&&(M(b,!1),b.strm.avail_out===0))return x}else if(b.match_available){if((L=a._tr_tally(b,0,b.window[b.strstart-1]))&&M(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return x}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(L=a._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<z-1?b.strstart:z-1,re===v?(M(b,!0),b.strm.avail_out===0?ce:K):b.last_lit&&(M(b,!1),b.strm.avail_out===0)?x:$}function Be(b,re,Q,L,O){this.good_length=b,this.max_lazy=re,this.nice_length=Q,this.max_chain=L,this.func=O}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*S),this.dyn_dtree=new s.Buf16(2*(2*_+1)),this.bl_tree=new s.Buf16(2*(2*D+1)),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(R+1),this.heap=new s.Buf16(2*C+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Re(b){var re;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=d,(re=b.state).pending=0,re.pending_out=0,re.wrap<0&&(re.wrap=-re.wrap),re.status=re.wrap?N:q,b.adler=re.wrap===2?0:1,re.last_flush=c,a._tr_init(re),p):fe(b,w)}function He(b){var re=Re(b);return re===p&&function(Q){Q.window_size=2*Q.w_size,Ae(Q.head),Q.max_lazy_match=n[Q.level].max_lazy,Q.good_match=n[Q.level].good_length,Q.nice_match=n[Q.level].nice_length,Q.max_chain_length=n[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=z-1,Q.match_available=0,Q.ins_h=0}(b.state),re}function Le(b,re,Q,L,O,H){if(!b)return w;var ae=1;if(re===y&&(re=6),L<0?(ae=0,L=-L):15<L&&(ae=2,L-=16),O<1||E<O||Q!==g||L<8||15<L||re<0||9<re||H<0||h<H)return fe(b,w);L===8&&(L=9);var oe=new Ue;return(b.state=oe).strm=b,oe.wrap=ae,oe.gzhead=null,oe.w_bits=L,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=O+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+z-1)/z),oe.window=new s.Buf8(2*oe.w_size),oe.head=new s.Buf16(oe.hash_size),oe.prev=new s.Buf16(oe.w_size),oe.lit_bufsize=1<<O+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new s.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=re,oe.strategy=H,oe.method=Q,He(b)}n=[new Be(0,0,0,0,function(b,re){var Q=65535;for(Q>b.pending_buf_size-5&&(Q=b.pending_buf_size-5);;){if(b.lookahead<=1){if(Fe(b),b.lookahead===0&&re===c)return x;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var L=b.block_start+Q;if((b.strstart===0||b.strstart>=L)&&(b.lookahead=b.strstart-L,b.strstart=L,M(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-X&&(M(b,!1),b.strm.avail_out===0))return x}return b.insert=0,re===v?(M(b,!0),b.strm.avail_out===0?ce:K):(b.strstart>b.block_start&&(M(b,!1),b.strm.avail_out),x)}),new Be(4,4,8,4,je),new Be(4,5,16,8,je),new Be(4,6,32,32,je),new Be(4,4,16,16,Ce),new Be(8,16,32,32,Ce),new Be(8,16,128,128,Ce),new Be(8,32,128,256,Ce),new Be(32,128,258,1024,Ce),new Be(32,258,258,4096,Ce)],i.deflateInit=function(b,re){return Le(b,re,g,15,8,0)},i.deflateInit2=Le,i.deflateReset=He,i.deflateResetKeep=Re,i.deflateSetHeader=function(b,re){return b&&b.state?b.state.wrap!==2?w:(b.state.gzhead=re,p):w},i.deflate=function(b,re){var Q,L,O,H;if(!b||!b.state||5<re||re<0)return b?fe(b,w):w;if(L=b.state,!b.output||!b.input&&b.avail_in!==0||L.status===666&&re!==v)return fe(b,b.avail_out===0?-5:w);if(L.strm=b,Q=L.last_flush,L.last_flush=re,L.status===N)if(L.wrap===2)b.adler=0,Ee(L,31),Ee(L,139),Ee(L,8),L.gzhead?(Ee(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),Ee(L,255&L.gzhead.time),Ee(L,L.gzhead.time>>8&255),Ee(L,L.gzhead.time>>16&255),Ee(L,L.gzhead.time>>24&255),Ee(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),Ee(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(Ee(L,255&L.gzhead.extra.length),Ee(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(b.adler=l(b.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(Ee(L,0),Ee(L,0),Ee(L,0),Ee(L,0),Ee(L,0),Ee(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),Ee(L,3),L.status=q);else{var ae=g+(L.w_bits-8<<4)<<8;ae|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(ae|=32),ae+=31-ae%31,L.status=q,de(L,ae),L.strstart!==0&&(de(L,b.adler>>>16),de(L,65535&b.adler)),b.adler=1}if(L.status===69)if(L.gzhead.extra){for(O=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),Y(b),O=L.pending,L.pending!==L.pending_buf_size));)Ee(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){O=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),Y(b),O=L.pending,L.pending===L.pending_buf_size)){H=1;break}H=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,Ee(L,H)}while(H!==0);L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),H===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){O=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),Y(b),O=L.pending,L.pending===L.pending_buf_size)){H=1;break}H=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,Ee(L,H)}while(H!==0);L.gzhead.hcrc&&L.pending>O&&(b.adler=l(b.adler,L.pending_buf,L.pending-O,O)),H===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&Y(b),L.pending+2<=L.pending_buf_size&&(Ee(L,255&b.adler),Ee(L,b.adler>>8&255),b.adler=0,L.status=q)):L.status=q),L.pending!==0){if(Y(b),b.avail_out===0)return L.last_flush=-1,p}else if(b.avail_in===0&&se(re)<=se(Q)&&re!==v)return fe(b,-5);if(L.status===666&&b.avail_in!==0)return fe(b,-5);if(b.avail_in!==0||L.lookahead!==0||re!==c&&L.status!==666){var oe=L.strategy===2?function(V,ne){for(var we;;){if(V.lookahead===0&&(Fe(V),V.lookahead===0)){if(ne===c)return x;break}if(V.match_length=0,we=a._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,we&&(M(V,!1),V.strm.avail_out===0))return x}return V.insert=0,ne===v?(M(V,!0),V.strm.avail_out===0?ce:K):V.last_lit&&(M(V,!1),V.strm.avail_out===0)?x:$}(L,re):L.strategy===3?function(V,ne){for(var we,ve,Te,Pe,ze=V.window;;){if(V.lookahead<=F){if(Fe(V),V.lookahead<=F&&ne===c)return x;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=z&&0<V.strstart&&(ve=ze[Te=V.strstart-1])===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]){Pe=V.strstart+F;do;while(ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&ve===ze[++Te]&&Te<Pe);V.match_length=F-(Pe-Te),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=z?(we=a._tr_tally(V,1,V.match_length-z),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(we=a._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),we&&(M(V,!1),V.strm.avail_out===0))return x}return V.insert=0,ne===v?(M(V,!0),V.strm.avail_out===0?ce:K):V.last_lit&&(M(V,!1),V.strm.avail_out===0)?x:$}(L,re):n[L.level].func(L,re);if(oe!==ce&&oe!==K||(L.status=666),oe===x||oe===ce)return b.avail_out===0&&(L.last_flush=-1),p;if(oe===$&&(re===1?a._tr_align(L):re!==5&&(a._tr_stored_block(L,0,0,!1),re===3&&(Ae(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),Y(b),b.avail_out===0))return L.last_flush=-1,p}return re!==v?p:L.wrap<=0?1:(L.wrap===2?(Ee(L,255&b.adler),Ee(L,b.adler>>8&255),Ee(L,b.adler>>16&255),Ee(L,b.adler>>24&255),Ee(L,255&b.total_in),Ee(L,b.total_in>>8&255),Ee(L,b.total_in>>16&255),Ee(L,b.total_in>>24&255)):(de(L,b.adler>>>16),de(L,65535&b.adler)),Y(b),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?p:1)},i.deflateEnd=function(b){var re;return b&&b.state?(re=b.state.status)!==N&&re!==69&&re!==73&&re!==91&&re!==103&&re!==q&&re!==666?fe(b,w):(b.state=null,re===q?fe(b,-3):p):w},i.deflateSetDictionary=function(b,re){var Q,L,O,H,ae,oe,V,ne,we=re.length;if(!b||!b.state||(H=(Q=b.state).wrap)===2||H===1&&Q.status!==N||Q.lookahead)return w;for(H===1&&(b.adler=u(b.adler,re,we,0)),Q.wrap=0,we>=Q.w_size&&(H===0&&(Ae(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0),ne=new s.Buf8(Q.w_size),s.arraySet(ne,re,we-Q.w_size,Q.w_size,0),re=ne,we=Q.w_size),ae=b.avail_in,oe=b.next_in,V=b.input,b.avail_in=we,b.next_in=0,b.input=re,Fe(Q);Q.lookahead>=z;){for(L=Q.strstart,O=Q.lookahead-(z-1);Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[L+z-1])&Q.hash_mask,Q.prev[L&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=L,L++,--O;);Q.strstart=L,Q.lookahead=z-1,Fe(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=z-1,Q.match_available=0,b.next_in=oe,b.input=V,b.avail_in=ae,Q.wrap=H,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(n,s){var a,u,l,f,c,v,p,w,y,h,d,g,E,C,_,D,S,R,z,F,X,N,q,x,$;a=n.state,u=n.next_in,x=n.input,l=u+(n.avail_in-5),f=n.next_out,$=n.output,c=f-(s-n.avail_out),v=f+(n.avail_out-257),p=a.dmax,w=a.wsize,y=a.whave,h=a.wnext,d=a.window,g=a.hold,E=a.bits,C=a.lencode,_=a.distcode,D=(1<<a.lenbits)-1,S=(1<<a.distbits)-1;e:do{E<15&&(g+=x[u++]<<E,E+=8,g+=x[u++]<<E,E+=8),R=C[g&D];t:for(;;){if(g>>>=z=R>>>24,E-=z,(z=R>>>16&255)===0)$[f++]=65535&R;else{if(!(16&z)){if(!(64&z)){R=C[(65535&R)+(g&(1<<z)-1)];continue t}if(32&z){a.mode=12;break e}n.msg="invalid literal/length code",a.mode=30;break e}F=65535&R,(z&=15)&&(E<z&&(g+=x[u++]<<E,E+=8),F+=g&(1<<z)-1,g>>>=z,E-=z),E<15&&(g+=x[u++]<<E,E+=8,g+=x[u++]<<E,E+=8),R=_[g&S];r:for(;;){if(g>>>=z=R>>>24,E-=z,!(16&(z=R>>>16&255))){if(!(64&z)){R=_[(65535&R)+(g&(1<<z)-1)];continue r}n.msg="invalid distance code",a.mode=30;break e}if(X=65535&R,E<(z&=15)&&(g+=x[u++]<<E,(E+=8)<z&&(g+=x[u++]<<E,E+=8)),p<(X+=g&(1<<z)-1)){n.msg="invalid distance too far back",a.mode=30;break e}if(g>>>=z,E-=z,(z=f-c)<X){if(y<(z=X-z)&&a.sane){n.msg="invalid distance too far back",a.mode=30;break e}if(q=d,(N=0)===h){if(N+=w-z,z<F){for(F-=z;$[f++]=d[N++],--z;);N=f-X,q=$}}else if(h<z){if(N+=w+h-z,(z-=h)<F){for(F-=z;$[f++]=d[N++],--z;);if(N=0,h<F){for(F-=z=h;$[f++]=d[N++],--z;);N=f-X,q=$}}}else if(N+=h-z,z<F){for(F-=z;$[f++]=d[N++],--z;);N=f-X,q=$}for(;2<F;)$[f++]=q[N++],$[f++]=q[N++],$[f++]=q[N++],F-=3;F&&($[f++]=q[N++],1<F&&($[f++]=q[N++]))}else{for(N=f-X;$[f++]=$[N++],$[f++]=$[N++],$[f++]=$[N++],2<(F-=3););F&&($[f++]=$[N++],1<F&&($[f++]=$[N++]))}break}}break}}while(u<l&&f<v);u-=F=E>>3,g&=(1<<(E-=F<<3))-1,n.next_in=u,n.next_out=f,n.avail_in=u<l?l-u+5:5-(u-l),n.avail_out=f<v?v-f+257:257-(f-v),a.hold=g,a.bits=E}},{}],49:[function(t,r,i){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),f=1,c=2,v=0,p=-2,w=1,y=852,h=592;function d(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(N){var q;return N&&N.state?(q=N.state,N.total_in=N.total_out=q.total=0,N.msg="",q.wrap&&(N.adler=1&q.wrap),q.mode=w,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new n.Buf32(y),q.distcode=q.distdyn=new n.Buf32(h),q.sane=1,q.back=-1,v):p}function C(N){var q;return N&&N.state?((q=N.state).wsize=0,q.whave=0,q.wnext=0,E(N)):p}function _(N,q){var x,$;return N&&N.state?($=N.state,q<0?(x=0,q=-q):(x=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?p:($.window!==null&&$.wbits!==q&&($.window=null),$.wrap=x,$.wbits=q,C(N))):p}function D(N,q){var x,$;return N?($=new g,(N.state=$).window=null,(x=_(N,q))!==v&&(N.state=null),x):p}var S,R,z=!0;function F(N){if(z){var q;for(S=new n.Buf32(512),R=new n.Buf32(32),q=0;q<144;)N.lens[q++]=8;for(;q<256;)N.lens[q++]=9;for(;q<280;)N.lens[q++]=7;for(;q<288;)N.lens[q++]=8;for(l(f,N.lens,0,288,S,0,N.work,{bits:9}),q=0;q<32;)N.lens[q++]=5;l(c,N.lens,0,32,R,0,N.work,{bits:5}),z=!1}N.lencode=S,N.lenbits=9,N.distcode=R,N.distbits=5}function X(N,q,x,$){var ce,K=N.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new n.Buf8(K.wsize)),$>=K.wsize?(n.arraySet(K.window,q,x-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):($<(ce=K.wsize-K.wnext)&&(ce=$),n.arraySet(K.window,q,x-$,ce,K.wnext),($-=ce)?(n.arraySet(K.window,q,x-$,$,0),K.wnext=$,K.whave=K.wsize):(K.wnext+=ce,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=ce))),0}i.inflateReset=C,i.inflateReset2=_,i.inflateResetKeep=E,i.inflateInit=function(N){return D(N,15)},i.inflateInit2=D,i.inflate=function(N,q){var x,$,ce,K,fe,se,Ae,Y,M,Ee,de,me,Fe,je,Ce,Be,Ue,Re,He,Le,b,re,Q,L,O=0,H=new n.Buf8(4),ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return p;(x=N.state).mode===12&&(x.mode=13),fe=N.next_out,ce=N.output,Ae=N.avail_out,K=N.next_in,$=N.input,se=N.avail_in,Y=x.hold,M=x.bits,Ee=se,de=Ae,re=v;e:for(;;)switch(x.mode){case w:if(x.wrap===0){x.mode=13;break}for(;M<16;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(2&x.wrap&&Y===35615){H[x.check=0]=255&Y,H[1]=Y>>>8&255,x.check=a(x.check,H,2,0),M=Y=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&Y)<<8)+(Y>>8))%31){N.msg="incorrect header check",x.mode=30;break}if((15&Y)!=8){N.msg="unknown compression method",x.mode=30;break}if(M-=4,b=8+(15&(Y>>>=4)),x.wbits===0)x.wbits=b;else if(b>x.wbits){N.msg="invalid window size",x.mode=30;break}x.dmax=1<<b,N.adler=x.check=1,x.mode=512&Y?10:12,M=Y=0;break;case 2:for(;M<16;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(x.flags=Y,(255&x.flags)!=8){N.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){N.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=Y>>8&1),512&x.flags&&(H[0]=255&Y,H[1]=Y>>>8&255,x.check=a(x.check,H,2,0)),M=Y=0,x.mode=3;case 3:for(;M<32;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.head&&(x.head.time=Y),512&x.flags&&(H[0]=255&Y,H[1]=Y>>>8&255,H[2]=Y>>>16&255,H[3]=Y>>>24&255,x.check=a(x.check,H,4,0)),M=Y=0,x.mode=4;case 4:for(;M<16;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.head&&(x.head.xflags=255&Y,x.head.os=Y>>8),512&x.flags&&(H[0]=255&Y,H[1]=Y>>>8&255,x.check=a(x.check,H,2,0)),M=Y=0,x.mode=5;case 5:if(1024&x.flags){for(;M<16;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.length=Y,x.head&&(x.head.extra_len=Y),512&x.flags&&(H[0]=255&Y,H[1]=Y>>>8&255,x.check=a(x.check,H,2,0)),M=Y=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(se<(me=x.length)&&(me=se),me&&(x.head&&(b=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),n.arraySet(x.head.extra,$,K,me,b)),512&x.flags&&(x.check=a(x.check,$,me,K)),se-=me,K+=me,x.length-=me),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(se===0)break e;for(me=0;b=$[K+me++],x.head&&b&&x.length<65536&&(x.head.name+=String.fromCharCode(b)),b&&me<se;);if(512&x.flags&&(x.check=a(x.check,$,me,K)),se-=me,K+=me,b)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(se===0)break e;for(me=0;b=$[K+me++],x.head&&b&&x.length<65536&&(x.head.comment+=String.fromCharCode(b)),b&&me<se;);if(512&x.flags&&(x.check=a(x.check,$,me,K)),se-=me,K+=me,b)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;M<16;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(Y!==(65535&x.check)){N.msg="header crc mismatch",x.mode=30;break}M=Y=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),N.adler=x.check=0,x.mode=12;break;case 10:for(;M<32;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}N.adler=x.check=d(Y),M=Y=0,x.mode=11;case 11:if(x.havedict===0)return N.next_out=fe,N.avail_out=Ae,N.next_in=K,N.avail_in=se,x.hold=Y,x.bits=M,2;N.adler=x.check=1,x.mode=12;case 12:if(q===5||q===6)break e;case 13:if(x.last){Y>>>=7&M,M-=7&M,x.mode=27;break}for(;M<3;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}switch(x.last=1&Y,M-=1,3&(Y>>>=1)){case 0:x.mode=14;break;case 1:if(F(x),x.mode=20,q!==6)break;Y>>>=2,M-=2;break e;case 2:x.mode=17;break;case 3:N.msg="invalid block type",x.mode=30}Y>>>=2,M-=2;break;case 14:for(Y>>>=7&M,M-=7&M;M<32;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if((65535&Y)!=(Y>>>16^65535)){N.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&Y,M=Y=0,x.mode=15,q===6)break e;case 15:x.mode=16;case 16:if(me=x.length){if(se<me&&(me=se),Ae<me&&(me=Ae),me===0)break e;n.arraySet(ce,$,K,me,fe),se-=me,K+=me,Ae-=me,fe+=me,x.length-=me;break}x.mode=12;break;case 17:for(;M<14;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(x.nlen=257+(31&Y),Y>>>=5,M-=5,x.ndist=1+(31&Y),Y>>>=5,M-=5,x.ncode=4+(15&Y),Y>>>=4,M-=4,286<x.nlen||30<x.ndist){N.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;M<3;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.lens[ae[x.have++]]=7&Y,Y>>>=3,M-=3}for(;x.have<19;)x.lens[ae[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,Q={bits:x.lenbits},re=l(0,x.lens,0,19,x.lencode,0,x.work,Q),x.lenbits=Q.bits,re){N.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;Be=(O=x.lencode[Y&(1<<x.lenbits)-1])>>>16&255,Ue=65535&O,!((Ce=O>>>24)<=M);){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(Ue<16)Y>>>=Ce,M-=Ce,x.lens[x.have++]=Ue;else{if(Ue===16){for(L=Ce+2;M<L;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(Y>>>=Ce,M-=Ce,x.have===0){N.msg="invalid bit length repeat",x.mode=30;break}b=x.lens[x.have-1],me=3+(3&Y),Y>>>=2,M-=2}else if(Ue===17){for(L=Ce+3;M<L;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}M-=Ce,b=0,me=3+(7&(Y>>>=Ce)),Y>>>=3,M-=3}else{for(L=Ce+7;M<L;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}M-=Ce,b=0,me=11+(127&(Y>>>=Ce)),Y>>>=7,M-=7}if(x.have+me>x.nlen+x.ndist){N.msg="invalid bit length repeat",x.mode=30;break}for(;me--;)x.lens[x.have++]=b}}if(x.mode===30)break;if(x.lens[256]===0){N.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,Q={bits:x.lenbits},re=l(f,x.lens,0,x.nlen,x.lencode,0,x.work,Q),x.lenbits=Q.bits,re){N.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,Q={bits:x.distbits},re=l(c,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,Q),x.distbits=Q.bits,re){N.msg="invalid distances set",x.mode=30;break}if(x.mode=20,q===6)break e;case 20:x.mode=21;case 21:if(6<=se&&258<=Ae){N.next_out=fe,N.avail_out=Ae,N.next_in=K,N.avail_in=se,x.hold=Y,x.bits=M,u(N,de),fe=N.next_out,ce=N.output,Ae=N.avail_out,K=N.next_in,$=N.input,se=N.avail_in,Y=x.hold,M=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;Be=(O=x.lencode[Y&(1<<x.lenbits)-1])>>>16&255,Ue=65535&O,!((Ce=O>>>24)<=M);){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(Be&&!(240&Be)){for(Re=Ce,He=Be,Le=Ue;Be=(O=x.lencode[Le+((Y&(1<<Re+He)-1)>>Re)])>>>16&255,Ue=65535&O,!(Re+(Ce=O>>>24)<=M);){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}Y>>>=Re,M-=Re,x.back+=Re}if(Y>>>=Ce,M-=Ce,x.back+=Ce,x.length=Ue,Be===0){x.mode=26;break}if(32&Be){x.back=-1,x.mode=12;break}if(64&Be){N.msg="invalid literal/length code",x.mode=30;break}x.extra=15&Be,x.mode=22;case 22:if(x.extra){for(L=x.extra;M<L;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.length+=Y&(1<<x.extra)-1,Y>>>=x.extra,M-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;Be=(O=x.distcode[Y&(1<<x.distbits)-1])>>>16&255,Ue=65535&O,!((Ce=O>>>24)<=M);){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(!(240&Be)){for(Re=Ce,He=Be,Le=Ue;Be=(O=x.distcode[Le+((Y&(1<<Re+He)-1)>>Re)])>>>16&255,Ue=65535&O,!(Re+(Ce=O>>>24)<=M);){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}Y>>>=Re,M-=Re,x.back+=Re}if(Y>>>=Ce,M-=Ce,x.back+=Ce,64&Be){N.msg="invalid distance code",x.mode=30;break}x.offset=Ue,x.extra=15&Be,x.mode=24;case 24:if(x.extra){for(L=x.extra;M<L;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}x.offset+=Y&(1<<x.extra)-1,Y>>>=x.extra,M-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){N.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(Ae===0)break e;if(me=de-Ae,x.offset>me){if((me=x.offset-me)>x.whave&&x.sane){N.msg="invalid distance too far back",x.mode=30;break}Fe=me>x.wnext?(me-=x.wnext,x.wsize-me):x.wnext-me,me>x.length&&(me=x.length),je=x.window}else je=ce,Fe=fe-x.offset,me=x.length;for(Ae<me&&(me=Ae),Ae-=me,x.length-=me;ce[fe++]=je[Fe++],--me;);x.length===0&&(x.mode=21);break;case 26:if(Ae===0)break e;ce[fe++]=x.length,Ae--,x.mode=21;break;case 27:if(x.wrap){for(;M<32;){if(se===0)break e;se--,Y|=$[K++]<<M,M+=8}if(de-=Ae,N.total_out+=de,x.total+=de,de&&(N.adler=x.check=x.flags?a(x.check,ce,de,fe-de):s(x.check,ce,de,fe-de)),de=Ae,(x.flags?Y:d(Y))!==x.check){N.msg="incorrect data check",x.mode=30;break}M=Y=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;M<32;){if(se===0)break e;se--,Y+=$[K++]<<M,M+=8}if(Y!==(4294967295&x.total)){N.msg="incorrect length check",x.mode=30;break}M=Y=0}x.mode=29;case 29:re=1;break e;case 30:re=-3;break e;case 31:return-4;case 32:default:return p}return N.next_out=fe,N.avail_out=Ae,N.next_in=K,N.avail_in=se,x.hold=Y,x.bits=M,(x.wsize||de!==N.avail_out&&x.mode<30&&(x.mode<27||q!==4))&&X(N,N.output,N.next_out,de-N.avail_out)?(x.mode=31,-4):(Ee-=N.avail_in,de-=N.avail_out,N.total_in+=Ee,N.total_out+=de,x.total+=de,x.wrap&&de&&(N.adler=x.check=x.flags?a(x.check,ce,de,N.next_out-de):s(x.check,ce,de,N.next_out-de)),N.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(Ee==0&&de===0||q===4)&&re===v&&(re=-5),re)},i.inflateEnd=function(N){if(!N||!N.state)return p;var q=N.state;return q.window&&(q.window=null),N.state=null,v},i.inflateGetHeader=function(N,q){var x;return N&&N.state&&2&(x=N.state).wrap?((x.head=q).done=!1,v):p},i.inflateSetDictionary=function(N,q){var x,$=q.length;return N&&N.state?(x=N.state).wrap!==0&&x.mode!==11?p:x.mode===11&&s(1,q,$,0)!==x.check?-3:X(N,q,$,$)?(x.mode=31,-4):(x.havedict=1,v):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var n=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,c,v,p,w,y,h,d){var g,E,C,_,D,S,R,z,F,X=d.bits,N=0,q=0,x=0,$=0,ce=0,K=0,fe=0,se=0,Ae=0,Y=0,M=null,Ee=0,de=new n.Buf16(16),me=new n.Buf16(16),Fe=null,je=0;for(N=0;N<=15;N++)de[N]=0;for(q=0;q<p;q++)de[c[v+q]]++;for(ce=X,$=15;1<=$&&de[$]===0;$--);if($<ce&&(ce=$),$===0)return w[y++]=20971520,w[y++]=20971520,d.bits=1,0;for(x=1;x<$&&de[x]===0;x++);for(ce<x&&(ce=x),N=se=1;N<=15;N++)if(se<<=1,(se-=de[N])<0)return-1;if(0<se&&(f===0||$!==1))return-1;for(me[1]=0,N=1;N<15;N++)me[N+1]=me[N]+de[N];for(q=0;q<p;q++)c[v+q]!==0&&(h[me[c[v+q]]++]=q);if(S=f===0?(M=Fe=h,19):f===1?(M=s,Ee-=257,Fe=a,je-=257,256):(M=u,Fe=l,-1),N=x,D=y,fe=q=Y=0,C=-1,_=(Ae=1<<(K=ce))-1,f===1&&852<Ae||f===2&&592<Ae)return 1;for(;;){for(R=N-fe,F=h[q]<S?(z=0,h[q]):h[q]>S?(z=Fe[je+h[q]],M[Ee+h[q]]):(z=96,0),g=1<<N-fe,x=E=1<<K;w[D+(Y>>fe)+(E-=g)]=R<<24|z<<16|F|0,E!==0;);for(g=1<<N-1;Y&g;)g>>=1;if(g!==0?(Y&=g-1,Y+=g):Y=0,q++,--de[N]==0){if(N===$)break;N=c[v+h[q]]}if(ce<N&&(Y&_)!==C){for(fe===0&&(fe=ce),D+=x,se=1<<(K=N-fe);K+fe<$&&!((se-=de[K+fe])<=0);)K++,se<<=1;if(Ae+=1<<K,f===1&&852<Ae||f===2&&592<Ae)return 1;w[C=Y&_]=ce<<24|K<<16|D-y|0}}return Y!==0&&(w[D+Y]=N-fe<<24|64<<16|0),d.bits=ce,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var n=t("../utils/common"),s=0,a=1;function u(O){for(var H=O.length;0<=--H;)O[H]=0}var l=0,f=29,c=256,v=c+1+f,p=30,w=19,y=2*v+1,h=15,d=16,g=7,E=256,C=16,_=17,D=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(v+2));u(X);var N=new Array(2*p);u(N);var q=new Array(512);u(q);var x=new Array(256);u(x);var $=new Array(f);u($);var ce,K,fe,se=new Array(p);function Ae(O,H,ae,oe,V){this.static_tree=O,this.extra_bits=H,this.extra_base=ae,this.elems=oe,this.max_length=V,this.has_stree=O&&O.length}function Y(O,H){this.dyn_tree=O,this.max_code=0,this.stat_desc=H}function M(O){return O<256?q[O]:q[256+(O>>>7)]}function Ee(O,H){O.pending_buf[O.pending++]=255&H,O.pending_buf[O.pending++]=H>>>8&255}function de(O,H,ae){O.bi_valid>d-ae?(O.bi_buf|=H<<O.bi_valid&65535,Ee(O,O.bi_buf),O.bi_buf=H>>d-O.bi_valid,O.bi_valid+=ae-d):(O.bi_buf|=H<<O.bi_valid&65535,O.bi_valid+=ae)}function me(O,H,ae){de(O,ae[2*H],ae[2*H+1])}function Fe(O,H){for(var ae=0;ae|=1&O,O>>>=1,ae<<=1,0<--H;);return ae>>>1}function je(O,H,ae){var oe,V,ne=new Array(h+1),we=0;for(oe=1;oe<=h;oe++)ne[oe]=we=we+ae[oe-1]<<1;for(V=0;V<=H;V++){var ve=O[2*V+1];ve!==0&&(O[2*V]=Fe(ne[ve]++,ve))}}function Ce(O){var H;for(H=0;H<v;H++)O.dyn_ltree[2*H]=0;for(H=0;H<p;H++)O.dyn_dtree[2*H]=0;for(H=0;H<w;H++)O.bl_tree[2*H]=0;O.dyn_ltree[2*E]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Be(O){8<O.bi_valid?Ee(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Ue(O,H,ae,oe){var V=2*H,ne=2*ae;return O[V]<O[ne]||O[V]===O[ne]&&oe[H]<=oe[ae]}function Re(O,H,ae){for(var oe=O.heap[ae],V=ae<<1;V<=O.heap_len&&(V<O.heap_len&&Ue(H,O.heap[V+1],O.heap[V],O.depth)&&V++,!Ue(H,oe,O.heap[V],O.depth));)O.heap[ae]=O.heap[V],ae=V,V<<=1;O.heap[ae]=oe}function He(O,H,ae){var oe,V,ne,we,ve=0;if(O.last_lit!==0)for(;oe=O.pending_buf[O.d_buf+2*ve]<<8|O.pending_buf[O.d_buf+2*ve+1],V=O.pending_buf[O.l_buf+ve],ve++,oe===0?me(O,V,H):(me(O,(ne=x[V])+c+1,H),(we=S[ne])!==0&&de(O,V-=$[ne],we),me(O,ne=M(--oe),ae),(we=R[ne])!==0&&de(O,oe-=se[ne],we)),ve<O.last_lit;);me(O,E,H)}function Le(O,H){var ae,oe,V,ne=H.dyn_tree,we=H.stat_desc.static_tree,ve=H.stat_desc.has_stree,Te=H.stat_desc.elems,Pe=-1;for(O.heap_len=0,O.heap_max=y,ae=0;ae<Te;ae++)ne[2*ae]!==0?(O.heap[++O.heap_len]=Pe=ae,O.depth[ae]=0):ne[2*ae+1]=0;for(;O.heap_len<2;)ne[2*(V=O.heap[++O.heap_len]=Pe<2?++Pe:0)]=1,O.depth[V]=0,O.opt_len--,ve&&(O.static_len-=we[2*V+1]);for(H.max_code=Pe,ae=O.heap_len>>1;1<=ae;ae--)Re(O,ne,ae);for(V=Te;ae=O.heap[1],O.heap[1]=O.heap[O.heap_len--],Re(O,ne,1),oe=O.heap[1],O.heap[--O.heap_max]=ae,O.heap[--O.heap_max]=oe,ne[2*V]=ne[2*ae]+ne[2*oe],O.depth[V]=(O.depth[ae]>=O.depth[oe]?O.depth[ae]:O.depth[oe])+1,ne[2*ae+1]=ne[2*oe+1]=V,O.heap[1]=V++,Re(O,ne,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(ze,Je){var st,at,ct,Me,ut,wt,I=Je.dyn_tree,le=Je.max_code,ge=Je.stat_desc.static_tree,ke=Je.stat_desc.has_stree,j=Je.stat_desc.extra_bits,ie=Je.stat_desc.extra_base,A=Je.stat_desc.max_length,he=0;for(Me=0;Me<=h;Me++)ze.bl_count[Me]=0;for(I[2*ze.heap[ze.heap_max]+1]=0,st=ze.heap_max+1;st<y;st++)A<(Me=I[2*I[2*(at=ze.heap[st])+1]+1]+1)&&(Me=A,he++),I[2*at+1]=Me,le<at||(ze.bl_count[Me]++,ut=0,ie<=at&&(ut=j[at-ie]),wt=I[2*at],ze.opt_len+=wt*(Me+ut),ke&&(ze.static_len+=wt*(ge[2*at+1]+ut)));if(he!==0){do{for(Me=A-1;ze.bl_count[Me]===0;)Me--;ze.bl_count[Me]--,ze.bl_count[Me+1]+=2,ze.bl_count[A]--,he-=2}while(0<he);for(Me=A;Me!==0;Me--)for(at=ze.bl_count[Me];at!==0;)le<(ct=ze.heap[--st])||(I[2*ct+1]!==Me&&(ze.opt_len+=(Me-I[2*ct+1])*I[2*ct],I[2*ct+1]=Me),at--)}}(O,H),je(ne,Pe,O.bl_count)}function b(O,H,ae){var oe,V,ne=-1,we=H[1],ve=0,Te=7,Pe=4;for(we===0&&(Te=138,Pe=3),H[2*(ae+1)+1]=65535,oe=0;oe<=ae;oe++)V=we,we=H[2*(oe+1)+1],++ve<Te&&V===we||(ve<Pe?O.bl_tree[2*V]+=ve:V!==0?(V!==ne&&O.bl_tree[2*V]++,O.bl_tree[2*C]++):ve<=10?O.bl_tree[2*_]++:O.bl_tree[2*D]++,ne=V,Pe=(ve=0)===we?(Te=138,3):V===we?(Te=6,3):(Te=7,4))}function re(O,H,ae){var oe,V,ne=-1,we=H[1],ve=0,Te=7,Pe=4;for(we===0&&(Te=138,Pe=3),oe=0;oe<=ae;oe++)if(V=we,we=H[2*(oe+1)+1],!(++ve<Te&&V===we)){if(ve<Pe)for(;me(O,V,O.bl_tree),--ve!=0;);else V!==0?(V!==ne&&(me(O,V,O.bl_tree),ve--),me(O,C,O.bl_tree),de(O,ve-3,2)):ve<=10?(me(O,_,O.bl_tree),de(O,ve-3,3)):(me(O,D,O.bl_tree),de(O,ve-11,7));ne=V,Pe=(ve=0)===we?(Te=138,3):V===we?(Te=6,3):(Te=7,4)}}u(se);var Q=!1;function L(O,H,ae,oe){de(O,(l<<1)+(oe?1:0),3),function(V,ne,we,ve){Be(V),ve&&(Ee(V,we),Ee(V,~we)),n.arraySet(V.pending_buf,V.window,ne,we,V.pending),V.pending+=we}(O,H,ae,!0)}i._tr_init=function(O){Q||(function(){var H,ae,oe,V,ne,we=new Array(h+1);for(V=oe=0;V<f-1;V++)for($[V]=oe,H=0;H<1<<S[V];H++)x[oe++]=V;for(x[oe-1]=V,V=ne=0;V<16;V++)for(se[V]=ne,H=0;H<1<<R[V];H++)q[ne++]=V;for(ne>>=7;V<p;V++)for(se[V]=ne<<7,H=0;H<1<<R[V]-7;H++)q[256+ne++]=V;for(ae=0;ae<=h;ae++)we[ae]=0;for(H=0;H<=143;)X[2*H+1]=8,H++,we[8]++;for(;H<=255;)X[2*H+1]=9,H++,we[9]++;for(;H<=279;)X[2*H+1]=7,H++,we[7]++;for(;H<=287;)X[2*H+1]=8,H++,we[8]++;for(je(X,v+1,we),H=0;H<p;H++)N[2*H+1]=5,N[2*H]=Fe(H,5);ce=new Ae(X,S,c+1,v,h),K=new Ae(N,R,0,p,h),fe=new Ae(new Array(0),z,0,w,g)}(),Q=!0),O.l_desc=new Y(O.dyn_ltree,ce),O.d_desc=new Y(O.dyn_dtree,K),O.bl_desc=new Y(O.bl_tree,fe),O.bi_buf=0,O.bi_valid=0,Ce(O)},i._tr_stored_block=L,i._tr_flush_block=function(O,H,ae,oe){var V,ne,we=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(ve){var Te,Pe=4093624447;for(Te=0;Te<=31;Te++,Pe>>>=1)if(1&Pe&&ve.dyn_ltree[2*Te]!==0)return s;if(ve.dyn_ltree[18]!==0||ve.dyn_ltree[20]!==0||ve.dyn_ltree[26]!==0)return a;for(Te=32;Te<c;Te++)if(ve.dyn_ltree[2*Te]!==0)return a;return s}(O)),Le(O,O.l_desc),Le(O,O.d_desc),we=function(ve){var Te;for(b(ve,ve.dyn_ltree,ve.l_desc.max_code),b(ve,ve.dyn_dtree,ve.d_desc.max_code),Le(ve,ve.bl_desc),Te=w-1;3<=Te&&ve.bl_tree[2*F[Te]+1]===0;Te--);return ve.opt_len+=3*(Te+1)+5+5+4,Te}(O),V=O.opt_len+3+7>>>3,(ne=O.static_len+3+7>>>3)<=V&&(V=ne)):V=ne=ae+5,ae+4<=V&&H!==-1?L(O,H,ae,oe):O.strategy===4||ne===V?(de(O,2+(oe?1:0),3),He(O,X,N)):(de(O,4+(oe?1:0),3),function(ve,Te,Pe,ze){var Je;for(de(ve,Te-257,5),de(ve,Pe-1,5),de(ve,ze-4,4),Je=0;Je<ze;Je++)de(ve,ve.bl_tree[2*F[Je]+1],3);re(ve,ve.dyn_ltree,Te-1),re(ve,ve.dyn_dtree,Pe-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,we+1),He(O,O.dyn_ltree,O.dyn_dtree)),Ce(O),oe&&Be(O)},i._tr_tally=function(O,H,ae){return O.pending_buf[O.d_buf+2*O.last_lit]=H>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&H,O.pending_buf[O.l_buf+O.last_lit]=255&ae,O.last_lit++,H===0?O.dyn_ltree[2*ae]++:(O.matches++,H--,O.dyn_ltree[2*(x[ae]+c+1)]++,O.dyn_dtree[2*M(H)]++),O.last_lit===O.lit_bufsize-1},i._tr_align=function(O){de(O,2,3),me(O,E,X),function(H){H.bi_valid===16?(Ee(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(n){(function(s,a){if(!s.setImmediate){var u,l,f,c,v=1,p={},w=!1,y=s.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(s);h=h&&h.setTimeout?h:s,u={}.toString.call(s.process)==="[object process]"?function(C){process.nextTick(function(){g(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,_=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=_,C}}()?(c="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(c+C,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){g(C.data)},function(C){f.port2.postMessage(C)}):y&&"onreadystatechange"in y.createElement("script")?(l=y.documentElement,function(C){var _=y.createElement("script");_.onreadystatechange=function(){g(C),_.onreadystatechange=null,l.removeChild(_),_=null},l.appendChild(_)}):function(C){setTimeout(g,0,C)},h.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var _=new Array(arguments.length-1),D=0;D<_.length;D++)_[D]=arguments[D+1];var S={callback:C,args:_};return p[v]=S,u(v),v++},h.clearImmediate=d}function d(C){delete p[C]}function g(C){if(w)setTimeout(g,0,C);else{var _=p[C];if(_){w=!0;try{(function(D){var S=D.callback,R=D.args;switch(R.length){case 0:S();break;case 1:S(R[0]);break;case 2:S(R[0],R[1]);break;case 3:S(R[0],R[1],R[2]);break;default:S.apply(a,R)}})(_)}finally{d(C),w=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(c)===0&&g(+C.data.slice(c.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(nl);export{cr as e};
